var C=Object.defineProperty,B=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var y=(e,t,a)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,I=(e,t)=>{for(var a in t||(t={}))D.call(t,a)&&y(e,a,t[a]);if(O)for(var a of O(t))w.call(t,a)&&y(e,a,t[a]);return e},L=(e,t)=>B(e,R(t));import{S as E}from"./EntryFile-D68kwv0T.js";let M=()=>{K()},K=()=>{const e=new URL(window.location.href),t=new URL("./Customer.html",e);let a=H(),l=P();t.searchParams.append("CustomerMobile",a),t.searchParams.append("CustomerName",l),window.location.href=t.href},H=()=>{let t=document.getElementById("CustomerMobileId");if(t!==null)return t.value.trim()},P=()=>{let t=document.getElementById("CustomerNameId");if(t!==null)return t.value.trim()},k=()=>{let e=document.getElementById("BranchNameAnchorId");e!==null&&e.addEventListener("click",M)};const J=()=>{var e=$("#table").bootstrapTable("getData");return e.length===0?(window.alert("Please Add Items"),!1):!0};let x=()=>{J()&&U()},U=()=>{const e=new URL(window.location.href),t=new URL("./Settlement.html",e);let a=W();t.searchParams.append("OrderNumber",a),window.location.href=t.href},W=()=>{let t=document.getElementById("OrderNumberId");if(t!==null)return t.innerHTML.trim()},q=()=>{let e=document.getElementById("CheckOutButtonId");e!==null&&e.addEventListener("click",x)},z=()=>{k(),q()},_=()=>{z()};const G="binV4",Y="Transactions",Q="Kakinada",X={OrderKey:"PresentOrder",ItemNamesKey:"ItemNames",AddOnsKey:"AddOns",PresentOrderAddOnsKey:"PresentOrderAddOns"},Z={ItemsTable:{DeleteUrl_Common:"$tableName/SubTable/Delete/SubKey/:Id/:inKey/:SubId",DeleteAddOnUrl:"/Custom/Cleaning/Branch/Order/NewOrder/addOn/$tableName/:Id/:SubId",DeleteItemUrl:"/Custom/Cleaning/Branch/Order/NewOrder/Item/$tableName/:Id/:SubId"}},ee={AddOnModal:"AddOnModal"},s={routePath:G,folderName:Y,tableName:Q,localStorageKeys:X,ApiUrls:Z,ModalIds:ee};let S=async()=>{let e=localStorage.getItem("BranchName"),t=s.localStorageKeys.OrderKey,a=`/Custom/Cleaning/Branch/Order/NewOrder/MaxRow/${e}`,o=await(await fetch(a)).json();localStorage.setItem(t,JSON.stringify(o))},te=async()=>{await S()},ae=({inRow:e})=>{const t=e;le(t.ItemName),oe(t.pk),re(t.Rate)},le=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},oe=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},re=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const ne=({inRow:e})=>{let t=e.AddOnArray;const a=s.ModalIds.AddOnModal;var l=$("#AddOnTable");l.bootstrapTable("load",t),ae({inRow:e}),$(`#${a}`).modal("show")},de=async({inRowpk:e,inItemSerial:t})=>{const a=s.ApiUrls.ItemsTable.DeleteItemUrl;let l=localStorage.getItem("BranchName");const o=t;let n=a.replace("$tableName",l).replace(":Id",e).replace(":SubId",o);return await fetch(n,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}})},ce=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e),a=JSON.parse(t);return me({inItemsObject:a.ItemsInOrder})},me=({inItemsObject:e})=>Object.entries(e).map(([a,l])=>L(I({},l),{pk:a})),V=()=>{let e=ce();var t=$("#table");t.bootstrapTable("load",e)},se=({inResponse:e})=>{e.status===200&&S().then(t=>{V(),$("#TableFooterItemNameId").focus()})},ue=async({inItemSerial:e})=>{let t=ie(),a=await de({inRowpk:t,inItemSerial:e});se({inResponse:a})},ie=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},Ie=(e,t,a)=>{a==="KS-AddOns"&&ne({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")&&ue({inItemSerial:e.pk})};let Le=()=>!(Fe()===!1||je()===!1||fe()===!1||Se()===!1||Ve()===!1||ge()===!1||be()===!1);const Fe=()=>{let e=document.getElementById("TableFooterItemNameId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},je=()=>{let e=document.getElementById("TableFooterPcsInputId");return e.value===""||e.value<=0?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},fe=()=>{let e=document.getElementById("exampleFormControlInput1");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Se=()=>{let e=document.getElementById("TableFooterFactoryInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Ve=()=>{let e=document.getElementById("TableFooterCategoryId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ge=()=>{let e=document.getElementById("TableFooterdateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},be=()=>{let e=document.getElementById("TableFooterRateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},pe="POST",Oe={Accept:"application/json","Content-Type":"application/json"},ye="",T={method:pe,headers:Oe,body:ye},Te=()=>{let e=Ae(),t=$e(),a=he(),l=Ne(),o=Re(),n=Ce(),r=Be();const d=ve();let u=JSON.parse(localStorage.getItem("PresentOrderAddOns")),c={};return c.Category=e,c.ItemName=t,c.Rate=a,c.Pcs=l,c.Total=o,c.location=n,c.DeliveryDateTime=r,c.ItemService=d,c.AddOnArray=u,c};let ve=()=>{let t=document.getElementById("TableFooterItemServiceId");if(t!==null)return t.value.trim()},Ae=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},$e=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},he=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},Ne=()=>{let t=document.getElementById("TableFooterPcsInputId");if(t!==null)return t.value.trim()},Ce=()=>{let t=document.getElementById("TableFooterFactoryInputId");if(t!==null)return t.value.trim()},Be=()=>{let t=document.getElementById("TableFooterdateInputId");if(t!==null)return t.value.trim()},Re=()=>{let t=document.getElementById("TableFooterRateInputId"),l=document.getElementById("TableFooterPcsInputId");return console.log("Total:",t.value*l.value),t.value*l.value},De=()=>(T.body=JSON.stringify(Te()),T),we=async()=>{let e=localStorage.getItem("BranchName"),t=parseInt(document.getElementById("OrderNumberId").innerHTML),a=De(),l=`/${s.routePath}/${e}/SubTable/Create/${t}/ItemsInOrder`;return await await fetch(l,a)},Ee=()=>{window.location.href="",localStorage.removeItem("PresentOrderAddOns")},Me=async()=>{(await we()).status===200&&Ee()};const Ke=()=>{Le()&&Me()};let He=()=>{let e=document.getElementById("TableFooterSaveButtonId");e!==null&&e.addEventListener("click",Ke)},Pe=()=>{let e=s.localStorageKeys.ItemNamesKey,t=localStorage.getItem(e);return JSON.parse(t)};const ke=({inCategorySelected:e})=>{let a=document.getElementById("ItemsDataListId"),l=e,r=Pe().filter(c=>c.Category===l).sort((c,i)=>c.ItemName==i.ItemName?0:c.ItemName>i.ItemName?1:-1);for(var d="",u=0;u<r.length;u++)d+=`<option value="${r[u].ItemName}">${r[u].ItemName}</option>`;a.innerHTML=d},Je=e=>{let a=e.currentTarget.value;ke({inCategorySelected:a})};let xe=()=>{let e=document.getElementById("TableFooterCategoryId");e!==null&&e.addEventListener("change",Je)},Ue=({inItemName:e})=>{let t=s.localStorageKeys.ItemNamesKey,a=localStorage.getItem(t);return JSON.parse(a).find(n=>n.ItemName===e)};const We=e=>{let a=e.currentTarget.value,l=Ue({inItemName:a});qe(l.DryWashRate)};let qe=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},ze=()=>{let e=document.getElementById("TableFooterItemNameId");e!==null&&e.addEventListener("change",We)};const v=(e,t,a)=>{_e(e.ItemName),Ge(e.Category),Ye(e.DryWashRate),Qe(1),$("#ItemsOnModal").modal("hide"),document.getElementById("TableFooterSaveButtonId").click()};let _e=e=>{let a=document.getElementById("TableFooterItemNameId");a!==null&&(a.value=e)},Ge=e=>{let a=document.getElementById("TableFooterCategoryId");a!==null&&(a.value=e)},Ye=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},Qe=e=>{let a=document.getElementById("TableFooterPcsInputId");a!==null&&(a.value=e)};const Xe=e=>{let t="ItemsOnModal";var a=$(document.getElementById(t).querySelector("table"));e?(a.bootstrapTable({data:et(e),onClickRow:v}),document.getElementById("SearchString").innerHTML=`Search Results for - ${e}`):(a.bootstrapTable({data:Ze(),onClickRow:v}),document.getElementById("SearchString").innerHTML="All Items"),$(`#${t}`).modal("show")},Ze=()=>{let e=localStorage.getItem("ItemNames");return JSON.parse(e)},et=e=>{let t=localStorage.getItem("ItemNames");return JSON.parse(t).filter(l=>l.ItemName.toLowerCase().includes(e.toLowerCase()))},tt=()=>{let e=document.getElementById("TableFooterItemNameId").value;Xe(e)};let at=()=>{let e=document.getElementById("TableFooterItemNameSearchButtonId");e!==null&&e.addEventListener("click",tt)},h=document.getElementById("AddOnModalLocalStorage"),lt=({inRow:e})=>{const t=ot(),a=rt();nt(t),dt(a)},ot=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},rt=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},nt=e=>{const t=h.querySelector(".AddOnModalLocalStorageItemNameClass");t!==null&&(t.value=e)},dt=e=>{const t=h.querySelector(".AddOnModalLocalStorageItemRateClass");t!==null&&(t.value=e)};const ct=()=>{let e=s.localStorageKeys.PresentOrderAddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},mt="AddOnModalLocalStorageTable",g=()=>{let e=ct();var t=$(`#${mt}`);t.bootstrapTable("load",e===null?[]:e)},st="AddOnModalLocalStorage",ut=({inRow:e})=>{g();let t=document.getElementById(st);lt({inRow:e}),$(t).modal("show")};let it=()=>{let e=document.getElementById("TableFooterAddOnId");e!==null&&e.addEventListener("click",ut)},It=()=>{Ft(),He(),xe(),ze(),at(),it(),Lt(),$("#TableFooterItemNameId").focus()},Lt=()=>{var e=new Event("change");document.getElementById("TableFooterCategoryId")!==null&&document.getElementById("TableFooterCategoryId").dispatchEvent(e)};const Ft=()=>{var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear(),o=l+"-"+a+"-"+t;e.setDate(e.getDate()+7);var n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),d=e.getFullYear(),u=d+"-"+r+"-"+n;let c=document.getElementById("TableFooterdateInputId");c!==null&&(c.value=u,c.setAttribute("min",o))};let jt=({inFindColumn:e})=>{e.formatter=ft},ft=(e,t,a)=>a+1,St=({inFindColumn:e})=>{e.footerFormatter=Vt},Vt=e=>` <div class="input-group">
                                        <input type="text" class="form-control" id="TableFooterRateInputId"
                                            autocomplete="off" tabindex="-1" readonly>
                                        <div class="invalid-feedback">
                                            Please provide correct item.
                                        </div>
                                    </div>`,gt=({inFindColumn:e})=>{e.formatter=bt,e.footerFormatter=pt},bt=(e,t,a)=>{let l=t.AddOnArray;if(l.length>0){let o=l.map(n=>n.AddOnRate).reduce((n,r)=>n+r,0);return['<a href="#" class="btn btn-primary ">',`${l.length} -${o}`,"</a>"].join("")}else return['<a href="#" class="btn btn-outline-primary ">',"Click","</a>"].join("")},pt=(e,t,a)=>['<a href="#" id="TableFooterAddOnId" class="btn btn-outline-primary ">',"Click","</a>"].join(""),Ot=({inFindColumn:e})=>{e.formatter=yt,e.footerFormatter=Tt};function yt(e,t,a){return['<a href="#" class="btn btn-danger ">','<i class="bi bi-trash3"></i>',"</a>"].join("")}const Tt=e=>`<button class="btn btn-outline-success" type="button"
                                        id="TableFooterSaveButtonId">Save</button>`;let vt=({inFindColumn:e})=>{e.formatter=At};function At(e,t,a){let l=localStorage.getItem("PresentOrder"),o=JSON.parse(l),n=t.ItemSerial,r=Object.values(o.AddOnData).filter(d=>d.AddOnItemSerial===n);return r.length>0?r.map(u=>u.AddOnRate).reduce((u,c)=>u+c,0)*t.Pcs+t.Total:t.Total}let $t=({inFindColumn:e})=>{e.footerFormatter=ht};const ht=(e,t,a)=>`  <select class="form-select" aria-label="Default select example"
                                        id="TableFooterCategoryId">
                                        <option selected value="Men">Men</option>
                                        <option value="Women">Women</option>
                                        <option value="Kids">Kids</option>
                                        <option value="Others">Others</option>
                                    </select>`;let Nt=({inFindColumn:e})=>{e.footerFormatter=Ct};const Ct=(e,t,a)=>` <div class="input-group">
                                        <input type="text" class="form-control" id="TableFooterItemNameId"
                                            list="ItemsDataListId" autocomplete="off" autofocus>
                                        <button class="btn btn-outline-secondary" type="button"
                                            id="TableFooterItemNameSearchButtonId">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                                <path
                                                    d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
                                            </svg>
                                        </button>
                                        <div class="invalid-feedback">
                                            Select Item Name...
                                        </div>
                                    </div>`;let Bt=({inFindColumn:e})=>{e.footerFormatter=Rt};const Rt=e=>`   <div class="input-group">
                                        <input class="form-control" id="TableFooterPcsInputId" type="number" min="1"
                                            max="100" step="1" value="1">

                                        <div class="invalid-feedback">
                                            Please provide correct pcs.
                                        </div>
                                    </div>`;let Dt=({inFindColumn:e})=>{e.footerFormatter=wt};const wt=e=>` <select class="form-select" aria-label="Default select example"
                                        id="TableFooterFactoryInputId" tabindex="-1">
                                        <option value="Vizag" selected>Vizag</option>
                                        <option value="GD">GD</option>
                                        <option value="Vzm">Vzm</option>
                                    </select>`;let Et=({inFindColumn:e})=>{e.footerFormatter=Mt};const Mt=e=>'<input class="form-control" tabindex="-1" type="date" id="TableFooterdateInputId">';let Kt=({inFindColumn:e})=>{e.footerFormatter=Ht};const Ht=(e,t,a)=>`  <select class="form-select" aria-label="Default select example"
                                        id="TableFooterItemServiceId">
                                        <option>DW</option>
                                          <option>PW</option>
                                          <option>CW</option>
                                    </select>`;let Pt=({inColumns:e})=>{let t=e,a=t.find(m=>m.field==="KS-Serial"),l=t.find(m=>m.field==="Rate"),o=t.find(m=>m.field==="KS-AddOns"),n=t.find(m=>m.field==="KS-Opts"),r=t.find(m=>m.field==="KS-Amount"),d=t.find(m=>m.field==="Category"),u=t.find(m=>m.field==="ItemName"),c=t.find(m=>m.field==="Pcs"),i=t.find(m=>m.field==="location"),b=t.find(m=>m.field==="DeliveryDateTime"),p=t.find(m=>m.field==="ItemService");a!==void 0&&jt({inFindColumn:a}),l!==void 0&&St({inFindColumn:l}),o!==void 0&&gt({inFindColumn:o}),n!==void 0&&Ot({inFindColumn:n}),r!==void 0&&vt({inFindColumn:r}),d!==void 0&&$t({inFindColumn:d}),u!==void 0&&Nt({inFindColumn:u}),c!==void 0&&Bt({inFindColumn:c}),i!==void 0&&Dt({inFindColumn:i}),b!==void 0&&Et({inFindColumn:b}),p!==void 0&&Kt({inFindColumn:p})};const kt=[],Jt=[{field:"KS-Serial",title:"#",width:50},{field:"Category",title:"Category",width:200},{field:"ItemName",title:"Item Name",width:350},{field:"ItemService",title:"Service",width:200},{field:"KS-AddOns",title:"Add Ons",width:100},{field:"Rate",title:"Rate",align:"right",width:100},{field:"Pcs",title:"Pcs",align:"right",width:220},{field:"KS-Amount",title:"Amount",align:"right",formatter:"",width:200},{field:"location",title:"Factory",width:200},{field:"DeliveryDateTime",title:"Delivery",width:100},{field:"KS-Opts",title:"Opts.",width:100}],xt="",Ut="",F={data:kt,columns:Jt,onPostBody:xt,onClickRow:Ut},Wt=()=>{var e=$("#table");F.onPostBody=It,F.onClickRow=Ie,Pt({inColumns:F.columns}),e.bootstrapTable(F)};let qt=({inRow:e})=>{const t=e;zt(t.ItemName),_t(t.pk),Gt(t.Rate)},zt=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},_t=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},Gt=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const Yt=({inRow:e})=>{let t=Qt({inItemSerial:parseInt(e.pk)});var a=$("#AddOnTable");a.bootstrapTable("load",t),qt({inRow:e}),$("#AddOnModal").modal("show")};let Qt=({inItemSerial:e})=>{let t=s.localStorageKeys.OrderKey,a=localStorage.getItem(t),l=JSON.parse(a),o=e;return Object.keys(l.AddOnData).map(d=>L(I({},l.AddOnData[d]),{AddOnPK:d})).filter(d=>d.AddOnItemSerial===o)};const Xt=async({inRowpk:e,inItemSerial:t})=>{const a=s.ApiUrls.ItemsTable.DeleteAddOnUrl;let l=localStorage.getItem("BranchName");const o=t;let n=a.replace("$tableName",l).replace(":Id",e).replace(":SubId",o);return await fetch(n,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}})},Zt=({inResponse:e})=>{e.status===200&&(ea("AddOnModal"),S().then(t=>{V(),$("#TableFooterItemNameId").focus()}))};function ea(e){const t=document.querySelector("#"+e),a=bootstrap.Modal.getInstance(t);a!=null&&a.hide()}const ta=async({inItemSerial:e})=>{debugger;let t=aa(),a=await Xt({inRowpk:t,inItemSerial:e});Zt({inResponse:a})},aa=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},la=(e,t,a)=>{console.log("row : ",e),a==="KS-AddOns"&&Yt({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")&&ta({inItemSerial:e.AddOnPK})};let oa=({inFindColumn:e})=>{e.formatter=ra},ra=(e,t,a)=>a+1,na=({inColumns:e})=>{let a=e.find(l=>l.field==="KS-Serial");a!==void 0&&oa({inFindColumn:a})};const da=[],ca=[{field:"KS-Serial",title:"#",width:75},{field:"AddOnService",title:"Service",width:400},{field:"AddOnRate",title:"Rate",width:200}],ma="",f={data:da,columns:ca,onClickRow:ma},sa="AddOnTable",ua=()=>{var e=$(`#${sa}`);f.onClickRow=la,na({inColumns:f.columns}),e.bootstrapTable(f)};let ia=({inRow:e})=>{const t=e;Ia(t.ItemName),La(t.pk),Fa(t.Rate)},Ia=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},La=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},Fa=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const ja=({inRow:e})=>{let t=fa({inItemSerial:parseInt(e.pk)});var a=$("#AddOnTable");a.bootstrapTable("load",t),ia({inRow:e}),$("#AddOnModal").modal("show")};let fa=({inItemSerial:e})=>{let t=s.localStorageKeys.OrderKey,a=localStorage.getItem(t),l=JSON.parse(a),o=e;return Object.keys(l.AddOnData).map(d=>L(I({},l.AddOnData[d]),{AddOnPK:d})).filter(d=>d.AddOnItemSerial===o)};const Sa=({inRowIndex:e})=>{ga({inRowIndex:e}),g(),Va()};let Va=()=>{let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.focus()};const ga=({inRowIndex:e})=>{let t=s.localStorageKeys.PresentOrderAddOnsKey,a=localStorage.getItem(t),l=JSON.parse(a);l.splice(e,1),localStorage.setItem(t,JSON.stringify(l))},ba=(e,t,a)=>{if(console.log("row------------ : ",e,t[0].dataset.index,a),a==="KS-AddOns"&&ja({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")){const l=t[0].dataset.index;Sa({inRowIndex:parseInt(l)})}},pa=()=>{let e=ya(),t=Oa(),a=Ta(),l={};return l.AddOnService=e,l.AddOnRate=parseInt(t),l.AddOnItemSerial=parseInt(a),l};let Oa=()=>{let t=document.getElementById("AddOnRateId");if(t!==null)return t.value.trim()},ya=()=>{let t=document.getElementById("TableFooterAddOnSelectId");if(t!==null)return t.value.trim()},Ta=()=>{let t=document.getElementById("AddOnModalItemSerialId");if(t!==null)return t.value.trim()};const va=()=>{const e=pa();Aa({inAddOnRow:e})},Aa=({inAddOnRow:e})=>{let t=s.localStorageKeys.PresentOrderAddOnsKey,a=localStorage.getItem(t);if(a===null){localStorage.setItem(t,JSON.stringify([e]));return}let l=JSON.parse(a);l.push(e),localStorage.setItem(t,JSON.stringify(l))},N=()=>{let e=s.localStorageKeys.PresentOrderAddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},$a=({inAddOnService:e})=>N().find(l=>l.AddOnService===e)===void 0;let ha=()=>{const e=Na();return $a({inAddOnService:e})},Na=()=>{let t=document.getElementById("TableFooterAddOnSelectId");if(t!==null)return t.value.trim()};const Ca=()=>{const e=ha();console.log(" : ",e),e&&(va(),g(),Ba())};let Ba=()=>{let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.focus()},Ra=()=>{let e=document.getElementById("AddOnModalSaveButtonId");e!==null&&e.addEventListener("click",Ca)};const Da=()=>{let e=s.localStorageKeys.AddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},wa=()=>{let e=document.getElementById("TableFooterAddOnSelectId"),t=Da();console.log("jVarLocalTableFooterAddOnSelectId: ",e);for(var a=0;a<t.length;a++){let l=document.createElement("option");l.value=t[a].AddOnService,l.innerHTML=t[a].AddOnService,e.appendChild(l)}},Ea="AddOns",Ma=()=>{const e=event.currentTarget,t=Ha({inAddOnData:e.value});Pa(t)},Ka=()=>{const e=localStorage.getItem(Ea);return JSON.parse(e)},Ha=({inAddOnData:e})=>Ka().find(l=>l.AddOnService===e).AddOnRate;let Pa=e=>{let a=document.getElementById("AddOnRateId");a!==null&&(a.value=e)};const ka=e=>{e.currentTarget,e.key==="Enter"&&Ja()};let Ja=()=>{var e=new Event("click");let t=document.getElementById("AddOnModalSaveButtonId");t!==null&&t.dispatchEvent(e)},xa=()=>{let e=document.getElementById("TableFooterAddOnSelectId");e!==null&&e.addEventListener("change",Ma),e!==null&&e.addEventListener("keypress",ka)},Ua=()=>{Ra(),wa(),xa(),Wa(),$("#TableFooterItemNameId").focus()},Wa=()=>{var e=new Event("change");let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.dispatchEvent(e)},qa=({inFindColumn:e})=>{e.formatter=za},za=(e,t,a)=>a+1,_a=({inFindColumn:e})=>{e.footerFormatter=Ga},Ga=e=>`<input type="number" name="AddOnRate" id="AddOnRateId" class="form-control"
                                placeholder="AddOn Rate">`,Ya=({inFindColumn:e})=>{e.formatter=Qa,e.footerFormatter=Xa};function Qa(e,t,a){return['<a href="#" class="btn btn-danger ">','<i class="bi bi-trash3"></i>',"</a>"].join("")}const Xa=e=>`   <button type="button" class="btn btn-primary" id="AddOnModalSaveButtonId">
                                Save
                            </button>`;let Za=({inFindColumn:e})=>{e.footerFormatter=el};const el=(e,t,a)=>`  <select class="form-select" aria-label="Select AddOn" id="TableFooterAddOnSelectId">
                            </select>`;let tl=({inColumns:e})=>{let t=e,a=t.find(r=>r.field==="KS-Serial"),l=t.find(r=>r.field==="KS-Opts"),o=t.find(r=>r.field==="AddOnService"),n=t.find(r=>r.field==="AddOnRate");a!==void 0&&qa({inFindColumn:a}),l!==void 0&&Ya({inFindColumn:l}),o!==void 0&&Za({inFindColumn:o}),n!==void 0&&_a({inFindColumn:n})};const al=[],ll=[{field:"KS-Serial",title:"#",width:75},{field:"AddOnService",title:"Service",width:400},{field:"AddOnRate",title:"Rate",width:200},{field:"KS-Opts",title:"Options",width:100}],ol="",rl="",j={data:al,columns:ll,onPostBody:ol,onClickRow:rl},nl="AddOnModalLocalStorage",dl=()=>{let t=document.getElementById(nl).querySelector("table");var a=$(t);j.onPostBody=Ua,j.onClickRow=ba,tl({inColumns:j.columns}),a.bootstrapTable(j)},cl=()=>{Wt(),ua(),dl()};let ml=()=>{let t=document.getElementById("BranchNameId"),a=localStorage.getItem("BranchName");t!==null&&(t.innerHTML=a)};const sl=async()=>{ml(),cl(),await te(),_()},ul=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t)},il=()=>{let e=ul();jl(e.CustomerData.CustomerMobile),Fl(e.CustomerData.CustomerName),Ll(e.pk),Il(localStorage.getItem("BranchName"))};let Il=e=>{let a=document.getElementById("BranchNameAnchorId");a!==null&&(a.innerHTML=e)},Ll=e=>{let a=document.getElementById("OrderNumberId");a!==null&&(a.innerHTML=e)},Fl=e=>{let a=document.getElementById("CustomerNameId");a!==null&&(a.value=e)},jl=e=>{let a=document.getElementById("CustomerMobileId");a!==null&&(a.value=e)};const A=()=>{V(),il()},fl=()=>{let e=s.localStorageKeys.PresentOrderAddOnsKey;N()===null&&localStorage.setItem(e,JSON.stringify([]))},Sl=async()=>{await sl(),E({inSuccessFunc:A})&&(fl(),A())};Sl().then();
