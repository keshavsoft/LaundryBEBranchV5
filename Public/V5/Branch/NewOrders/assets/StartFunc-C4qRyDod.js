var R=Object.defineProperty,w=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var b=(e,t,a)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,F=(e,t)=>{for(var a in t||(t={}))D.call(t,a)&&b(e,a,t[a]);if(O)for(var a of O(t))K.call(t,a)&&b(e,a,t[a]);return e},j=(e,t)=>w(e,E(t));import{S as M}from"./EntryFile-D68kwv0T.js";let H=()=>{P()},P=()=>{const e=new URL(window.location.href),t=new URL("./Customer.html",e);let a=J(),l=k();t.searchParams.append("CustomerMobile",a),t.searchParams.append("CustomerName",l),window.location.href=t.href},J=()=>{let t=document.getElementById("CustomerMobileId");if(t!==null)return t.value.trim()},k=()=>{let t=document.getElementById("CustomerNameId");if(t!==null)return t.value.trim()},U=()=>{let e=document.getElementById("BranchNameAnchorId");e!==null&&e.addEventListener("click",H)};const x=()=>{var e=$("#table").bootstrapTable("getData");return e.length===0?(window.alert("Please Add Items"),!1):!0};let q=()=>{x()&&W()},W=()=>{const e=new URL(window.location.href),t=new URL("./Settlement.html",e);let a=_();t.searchParams.append("OrderNumber",a),window.location.href=t.href},_=()=>{let t=document.getElementById("OrderNumberId");if(t!==null)return t.innerHTML.trim()},G=()=>{let e=document.getElementById("CheckOutButtonId");e!==null&&e.addEventListener("click",q)},z=()=>{U(),G()},Q=()=>!(X()===!1||Y()===!1||Z()===!1||ee()===!1||te()===!1||ae()===!1||le()===!1);const X=()=>{let e=document.getElementById("TableFooterItemNameId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Y=()=>{let e=document.getElementById("TableFooterPcsInputId");return e.value===""||e.value<=0?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Z=()=>{let e=document.getElementById("exampleFormControlInput1");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ee=()=>{let e=document.getElementById("TableFooterFactoryInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},te=()=>{let e=document.getElementById("TableFooterCategoryId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ae=()=>{let e=document.getElementById("TableFooterdateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},le=()=>{let e=document.getElementById("TableFooterRateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},oe="POST",re={Accept:"application/json","Content-Type":"application/json"},ne="",p={method:oe,headers:re,body:ne},de="binV4",ce="Transactions",me="Kakinada",ue={OrderKey:"PresentOrder",ItemNamesKey:"ItemNames",AddOnsKey:"AddOns",PresentOrderAddOnsKey:"PresentOrderAddOns"},se={ItemsTable:{DeleteUrl_Common:"$tableName/SubTable/Delete/SubKey/:Id/:inKey/:SubId",DeleteAddOnUrl:"/Custom/Cleaning/Branch/Order/NewOrder/addOn/$tableName/:Id/:SubId/:AddOnKey",DeleteItemUrl:"/Custom/Cleaning/Branch/Order/NewOrder/Item/$tableName/:Id/:SubId"}},ie={AddOnModal:"AddOnModal"},m={routePath:de,folderName:ce,tableName:me,localStorageKeys:ue,ApiUrls:se,ModalIds:ie};let Ie=({inCategory:e,inItemType:t})=>{let a=m.localStorageKeys.ItemNamesKey,l=localStorage.getItem(a);return JSON.parse(l).filter(d=>d.Category===e&&d.ItemType===t)},v=({inCategory:e,inItemType:t,inService:a})=>{let l=m.localStorageKeys.ItemNamesKey,r=localStorage.getItem(l);return JSON.parse(r).find(c=>c.Category===e&&c.ItemType===t&&c.Service===a)},Le=()=>{let e=m.localStorageKeys.ItemNamesKey,t=localStorage.getItem(e);return JSON.parse(t)};const Fe=()=>{let e=fe(),t=Se(),a=Ve(),l=ge(),r=be(),n=ye(),d=Oe();const c=je();let u=JSON.parse(localStorage.getItem("PresentOrderAddOns"));const i=v({inCategory:e,inItemType:t,inService:c});let o={};return o.Category=e,o.ItemName=i.ItemName,o.ItemType=t,o.Rate=a,o.Pcs=l,o.Total=r,o.location=n,o.DeliveryDateTime=d,o.ItemService=c,o.AddOnArray=u,o};let je=()=>{let t=document.getElementById("TableFooterItemServiceId");if(t!==null)return t.value.trim()},fe=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},Se=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},Ve=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},ge=()=>{let t=document.getElementById("TableFooterPcsInputId");if(t!==null)return t.value.trim()},ye=()=>{let t=document.getElementById("TableFooterFactoryInputId");if(t!==null)return t.value.trim()},Oe=()=>{let t=document.getElementById("TableFooterdateInputId");if(t!==null)return t.value.trim()},be=()=>{let t=document.getElementById("TableFooterRateInputId"),l=document.getElementById("TableFooterPcsInputId"),n=JSON.parse(localStorage.getItem("PresentOrderAddOns")).map(c=>c.AddOnRate).reduce((c,u)=>c+parseInt(u),0),d=parseInt(t.value)+n;return console.log("Total:",d*l.value),d*l.value},pe=()=>(p.body=JSON.stringify(Fe()),p),Te=async()=>{let e=localStorage.getItem("BranchName"),t=parseInt(document.getElementById("OrderNumberId").innerHTML),a=pe(),l=`/${m.routePath}/${e}/SubTable/Create/${t}/ItemsInOrder`;return await await fetch(l,a)},S=async()=>{let e=localStorage.getItem("BranchName"),t=m.localStorageKeys.OrderKey,a=`/Custom/Cleaning/Branch/Order/NewOrder/MaxRow/${e}`,r=await(await fetch(a)).json();localStorage.setItem(t,JSON.stringify(r))};const Ae=()=>{let e=m.localStorageKeys.OrderKey,t=localStorage.getItem(e),a=JSON.parse(t);return ve({inItemsObject:a.ItemsInOrder})},ve=({inItemsObject:e})=>Object.entries(e).map(([a,l])=>j(F({},l),{pk:a})),V=()=>{let e=Ae();var t=$("#table");t.bootstrapTable("load",e)};let $e=()=>{he(),h()},he=()=>{let t=document.getElementById("BranchNameId"),a=localStorage.getItem("BranchName");t!==null&&(t.innerHTML=a)};const h=()=>{const e=new Date,t=e.toISOString().split("T")[0];e.setDate(e.getDate()+7);const a=e.toISOString().split("T")[0],l=document.getElementById("TableFooterdateInputId");l&&(l.value=a,l.setAttribute("min",t))};let Ce=()=>{S().then(()=>{V(),localStorage.removeItem("PresentOrderAddOns"),$("#table").bootstrapTable("refresh"),$("#AddItemsId")[0].reset(),$("#TableFooterItemNameId").focus(),h()})},Ne=async()=>{(await Te()).status===200&&Ce()};const Be=()=>{Q()&&Ne()};let Re=()=>{let e=document.getElementById("TableFooterSaveButtonId");e!==null&&e.addEventListener("click",Be)};const we=({inCategorySelected:e})=>{let a=document.getElementById("ItemsDataListId"),l=e,n=Le().filter(s=>s.Category===l);const d=Object.groupBy(n,({ItemType:s})=>s);let u=Object.keys(d).map(s=>s).sort((s,I)=>s==I?0:s>I?1:-1);for(var i="",o=0;o<u.length;o++)i+=`<option value="${u[o]}">${u[o]}</option>`;a.innerHTML=i},Ee=e=>{let a=e.currentTarget.value;we({inCategorySelected:a})};let De=()=>{let e=document.getElementById("TableFooterCategoryId");e!==null&&e.addEventListener("change",Ee)};const C="TableFooterItemServiceId",Ke=e=>{let a=e.currentTarget.value;const l=Me();let r=document.getElementById(C),n=Ie({inCategory:l,inItemType:a});const d=Object.groupBy(n,({Service:s})=>s);let u=Object.keys(d).map(s=>s).sort((s,I)=>s==I?0:s>I?1:-1);for(var i="",o=0;o<u.length;o++)i+=`<option value="${u[o]}">${u[o]}</option>`;r.innerHTML=i,He()};let Me=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},He=()=>{var e=new Event("change");let t=document.getElementById(C);t!==null&&t.dispatchEvent(e)},Pe=()=>{let e=document.getElementById("TableFooterItemNameId");e!==null&&e.addEventListener("change",Ke)};const T=(e,t,a)=>{Je(e.ItemName),ke(e.Category),Ue(e.DryWashRate),xe(1),$("#ItemsOnModal").modal("hide"),document.getElementById("TableFooterSaveButtonId").click()};let Je=e=>{let a=document.getElementById("TableFooterItemNameId");a!==null&&(a.value=e)},ke=e=>{let a=document.getElementById("TableFooterCategoryId");a!==null&&(a.value=e)},Ue=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},xe=e=>{let a=document.getElementById("TableFooterPcsInputId");a!==null&&(a.value=e)};const qe=e=>{let t="ItemsOnModal";var a=$(document.getElementById(t).querySelector("table"));e?(a.bootstrapTable({data:_e(e),onClickRow:T}),document.getElementById("SearchString").innerHTML=`Search Results for - ${e}`):(a.bootstrapTable({data:We(),onClickRow:T}),document.getElementById("SearchString").innerHTML="All Items"),$(`#${t}`).modal("show")},We=()=>{let e=localStorage.getItem("ItemNames");return JSON.parse(e)},_e=e=>{let t=localStorage.getItem("ItemNames");return JSON.parse(t).filter(l=>l.ItemName.toLowerCase().includes(e.toLowerCase()))},Ge=()=>{let e=document.getElementById("TableFooterItemNameId").value;qe(e)};let ze=()=>{let e=document.getElementById("TableFooterItemNameSearchButtonId");e!==null&&e.addEventListener("click",Ge)},N=document.getElementById("AddOnModalLocalStorage"),Qe=({inRow:e})=>{const t=Xe(),a=Ye();Ze(t),et(a)},Xe=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},Ye=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},Ze=e=>{const t=N.querySelector(".AddOnModalLocalStorageItemNameClass");t!==null&&(t.value=e)},et=e=>{const t=N.querySelector(".AddOnModalLocalStorageItemRateClass");t!==null&&(t.value=e)};const tt=()=>{let e=m.localStorageKeys.PresentOrderAddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},at="AddOnModalLocalStorageTable",y=()=>{let e=tt();var t=$(`#${at}`);t.bootstrapTable("load",e===null?[]:e)},lt="AddOnModalLocalStorage",ot=({inRow:e})=>{y();let t=document.getElementById(lt);Qe({inRow:e}),$(t).modal("show")};let rt=()=>{let e=document.getElementById("TableFooterAddOnId");e!==null&&e.addEventListener("click",ot)};const nt=e=>{let a=e.currentTarget.value;const l=ct(),r=dt();let n=v({inCategory:l,inItemType:r,inService:a});mt(n.DryWashRate)};let dt=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},ct=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},mt=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},ut=()=>{let e=document.getElementById("TableFooterItemServiceId");e!==null&&e.addEventListener("change",nt)};const st=()=>{De(),rt(),ze(),ut(),Pe(),Re()};let it=()=>{z(),st(),It()},It=()=>{var e=new Event("change");document.getElementById("TableFooterCategoryId")!==null&&document.getElementById("TableFooterCategoryId").dispatchEvent(e)},Lt=async()=>{await S()},Ft=({inRow:e})=>{const t=e;jt(t.ItemName),ft(t.pk),St(t.Rate)},jt=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},ft=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},St=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const Vt=({inRow:e})=>{let t=e.AddOnArray;const a=m.ModalIds.AddOnModal;var l=$("#AddOnTable");l.bootstrapTable("load",t),Ft({inRow:e}),$(`#${a}`).modal("show")},gt=async({inRowpk:e,inItemSerial:t})=>{const a=m.ApiUrls.ItemsTable.DeleteItemUrl;let l=localStorage.getItem("BranchName");const r=t;let n=a.replace("$tableName",l).replace(":Id",e).replace(":SubId",r);return await fetch(n,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}})},yt=({inResponse:e})=>{e.status===200&&S().then(t=>{V(),$("#TableFooterItemNameId").focus()})},Ot=async({inItemSerial:e})=>{let t=bt(),a=await gt({inRowpk:t,inItemSerial:e});yt({inResponse:a})},bt=()=>{let e=m.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},pt=(e,t,a)=>{a==="KS-AddOns"&&Vt({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")&&Ot({inItemSerial:e.pk})};let Tt=()=>{},At=({inFindColumn:e})=>{e.formatter=vt},vt=(e,t,a)=>a+1,$t=({inFindColumn:e})=>{e.footerFormatter=ht};function ht(e){return this.field,"₹ "+e.map(function(t){return+t.Rate}).reduce(function(t,a){return t+a},0)}const Ct=({inFindColumn:e})=>{e.formatter=Nt},Nt=(e,t)=>{const a=t.AddOnArray;if(a&&a.length>0){const l=a.reduce((r,n)=>r+n.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${a.length}-${l}</a>`}return"No"};let Bt=({inFindColumn:e})=>{e.formatter=Rt};function Rt(e,t,a){return['<a href="#" class="link-danger">','<i class="bi bi-trash3"></i>',"</a>"].join("")}let wt=({inFindColumn:e})=>{e.formatter=Et,e.footerFormatter=Dt};function Et(e,t,a){let l=localStorage.getItem("PresentOrder"),r=JSON.parse(l),n=t.ItemSerial,d=Object.values(r.AddOnData).filter(c=>c.AddOnItemSerial===n);return d.length>0?d.map(u=>u.AddOnRate).reduce((u,i)=>u+i,0)*t.Pcs+t.Total:t.Total}function Dt(e){return this.field,"₹ "+e.map(function(t){return+t.Total}).reduce(function(t,a){return t+a},0)}let Kt=({inFindColumn:e})=>{e.footerFormatter=""},Mt=({inFindColumn:e})=>{e.footerFormatter=Ht};function Ht(e){var t=this.field;return e.map(function(l){return l[t]===void 0?0:+l[t]}).reduce(function(l,r){return l+r},0).toFixed(0)}let Pt=({inFindColumn:e})=>{e.formatter=Jt},Jt=(e,t,a)=>new Date(e).toLocaleDateString("en-GB"),kt=({inColumns:e})=>{let t=e,a=t.find(o=>o.field==="KS-Serial"),l=t.find(o=>o.field==="Rate"),r=t.find(o=>o.field==="KS-AddOns"),n=t.find(o=>o.field==="KS-Opts"),d=t.find(o=>o.field==="KS-Amount"),c=t.find(o=>o.field==="Category");t.find(o=>o.field==="ItemName");let u=t.find(o=>o.field==="Pcs");t.find(o=>o.field==="location");let i=t.find(o=>o.field==="DeliveryDateTime");t.find(o=>o.field==="ItemService"),a!==void 0&&At({inFindColumn:a}),l!==void 0&&$t({inFindColumn:l}),r!==void 0&&Ct({inFindColumn:r}),n!==void 0&&Bt({inFindColumn:n}),d!==void 0&&wt({inFindColumn:d}),c!==void 0&&Kt({inFindColumn:c}),u!==void 0&&Mt({inFindColumn:u}),i!==void 0&&Pt({inFindColumn:i})};const Ut=(e,t)=>e.ItemService==="PW"?{classes:"table-warning"}:{},xt=[],qt="true",Wt=[{field:"KS-Serial",title:"#",width:5,widthUnit:"%"},{field:"Category",title:"Category",width:10,widthUnit:"%"},{field:"ItemName",title:"Item Name",width:10,widthUnit:"%"},{field:"ItemService",title:"Service",width:10,widthUnit:"%"},{field:"KS-AddOns",title:"Add Ons",width:100},{field:"Rate",title:"Rate",align:"right",footerFormatter:"",width:10,widthUnit:"%"},{field:"Pcs",title:"Pcs",align:"right",width:8,widthUnit:"%"},{field:"KS-Amount",title:"Amount",align:"right",footerFormatter:"",width:15,widthUnit:"%"},{field:"location",title:"Factory",width:200},{field:"DeliveryDateTime",title:"Delivery",width:10,widthUnit:"%"},{field:"KS-Opts",title:"",width:100}],_t="",Gt="",L={data:xt,showFooter:qt,columns:Wt,onPostBody:_t,onClickRow:Gt},zt=()=>{var e=$("#table");L.onPostBody=Tt,L.onClickRow=pt,L.rowStyle=Ut,kt({inColumns:L.columns}),e.bootstrapTable(L)};let Qt=({inRow:e})=>{const t=e;Xt(t.ItemName),Yt(t.pk),Zt(t.Rate)},Xt=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},Yt=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},Zt=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const ea=({inRow:e})=>{let t=ta({inItemSerial:parseInt(e.pk)});var a=$("#AddOnTable");a.bootstrapTable("load",t),Qt({inRow:e}),$("#AddOnModal").modal("show")};let ta=({inItemSerial:e})=>{let t=m.localStorageKeys.OrderKey,a=localStorage.getItem(t),l=JSON.parse(a),r=e;return Object.keys(l.AddOnData).map(c=>j(F({},l.AddOnData[c]),{AddOnPK:c})).filter(c=>c.AddOnItemSerial===r)};const aa=async({inRowpk:e,inItemSerial:t})=>{const a=m.ApiUrls.ItemsTable.DeleteAddOnUrl;let l=localStorage.getItem("BranchName");const r=t;let n=la(),d=a.replace("$tableName",l).replace(":Id",e).replace(":SubId",n).replace(":AddOnKey",r);return await fetch(d,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}})};let la=()=>{let t=document.getElementById("AddOnModalItemSerialId");if(t!==null)return t.value.trim()};const oa=({inResponse:e})=>{e.status===200&&(ra("AddOnModal"),S().then(t=>{V(),$("#TableFooterItemNameId").focus()}))};function ra(e){const t=document.querySelector("#"+e),a=bootstrap.Modal.getInstance(t);a!=null&&a.hide()}const na=async({inItemSerial:e})=>{let t=da(),a=await aa({inRowpk:t,inItemSerial:e});oa({inResponse:a})},da=()=>{let e=m.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},ca=(e,t,a)=>{console.log("row : ",e),a==="KS-AddOns"&&ea({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")&&na({inItemSerial:e.AddOnService})};let ma=({inFindColumn:e})=>{e.formatter=ua},ua=(e,t,a)=>a+1,sa=({inFindColumn:e})=>{e.formatter=ia};function ia(e,t,a){return['<a href="#" class="link-danger">','<i class="bi bi-trash3"></i>',"</a>"].join("")}let Ia=({inFindColumn:e})=>{e.footerFormatter=La};function La(e){var t=this.field;return e.map(function(l){return l[t]===void 0?0:+l[t]}).reduce(function(l,r){return l+r},0).toFixed(2)}let Fa=({inColumns:e})=>{let t=e,a=t.find(n=>n.field==="KS-Serial"),l=t.find(n=>n.field==="KS-Opts"),r=t.find(n=>n.field==="AddOnRate");a!==void 0&&ma({inFindColumn:a}),l!==void 0&&sa({inFindColumn:l}),r!==void 0&&Ia({inFindColumn:r})};const ja=[],fa=[{field:"KS-Serial",title:"#",width:75},{field:"AddOnService",title:"Service",width:400},{field:"AddOnRate",title:"Rate",width:200},{field:"KS-Opts",title:"",width:100}],Sa="",g={data:ja,columns:fa,onClickRow:Sa},Va="AddOnTable",ga=()=>{var e=$(`#${Va}`);g.onClickRow=ca,Fa({inColumns:g.columns}),e.bootstrapTable(g)};let ya=({inRow:e})=>{const t=e;Oa(t.ItemName),ba(t.pk),pa(t.Rate)},Oa=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},ba=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},pa=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const Ta=({inRow:e})=>{let t=Aa({inItemSerial:parseInt(e.pk)});var a=$("#AddOnTable");a.bootstrapTable("load",t),ya({inRow:e}),$("#AddOnModal").modal("show")};let Aa=({inItemSerial:e})=>{let t=m.localStorageKeys.OrderKey,a=localStorage.getItem(t),l=JSON.parse(a),r=e;return Object.keys(l.AddOnData).map(c=>j(F({},l.AddOnData[c]),{AddOnPK:c})).filter(c=>c.AddOnItemSerial===r)};const va=({inRowIndex:e})=>{ha({inRowIndex:e}),y(),$a()};let $a=()=>{let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.focus()};const ha=({inRowIndex:e})=>{let t=m.localStorageKeys.PresentOrderAddOnsKey,a=localStorage.getItem(t),l=JSON.parse(a);l.splice(e,1),localStorage.setItem(t,JSON.stringify(l))},Ca=(e,t,a)=>{if(console.log("row------------ : ",e,t[0].dataset.index,a),a==="KS-AddOns"&&Ta({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")){const l=t[0].dataset.index;va({inRowIndex:parseInt(l)})}},Na=()=>{let e=Ra(),t=Ba(),a=wa(),l={};return l.AddOnService=e,l.AddOnRate=parseInt(t),l.AddOnItemSerial=parseInt(a),l};let Ba=()=>{let t=document.getElementById("AddOnRateId");if(t!==null)return t.value.trim()},Ra=()=>{let t=document.getElementById("TableFooterAddOnSelectId");if(t!==null)return t.value.trim()},wa=()=>{let t=document.getElementById("AddOnModalItemSerialId");if(t!==null)return t.value.trim()};const Ea=()=>{const e=Na();Da({inAddOnRow:e})},Da=({inAddOnRow:e})=>{let t=m.localStorageKeys.PresentOrderAddOnsKey,a=localStorage.getItem(t);if(a===null){localStorage.setItem(t,JSON.stringify([e]));return}let l=JSON.parse(a);l.push(e),localStorage.setItem(t,JSON.stringify(l))},B=()=>{let e=m.localStorageKeys.PresentOrderAddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},Ka=({inAddOnService:e})=>B().find(l=>l.AddOnService===e)===void 0;let Ma=()=>{const e=Ha();return Ka({inAddOnService:e})},Ha=()=>{let t=document.getElementById("TableFooterAddOnSelectId");if(t!==null)return t.value.trim()};const Pa=()=>{const e=Ma();console.log(" : ",e),e&&(Ea(),y(),Ja())};let Ja=()=>{let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.focus()},ka=()=>{let e=document.getElementById("AddOnModalSaveButtonId");e!==null&&e.addEventListener("click",Pa)};const Ua=()=>{let e=m.localStorageKeys.AddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},xa=()=>{let e=document.getElementById("TableFooterAddOnSelectId"),t=Ua();for(var a=0;a<t.length;a++){let l=document.createElement("option");l.value=t[a].AddOnService,l.innerHTML=t[a].AddOnService,e.appendChild(l)}},qa="AddOns",Wa=()=>{const e=event.currentTarget,t=Ga({inAddOnData:e.value});za(t)},_a=()=>{const e=localStorage.getItem(qa);return JSON.parse(e)},Ga=({inAddOnData:e})=>_a().find(l=>l.AddOnService===e).AddOnRate;let za=e=>{let a=document.getElementById("AddOnRateId");a!==null&&(a.value=e)};const Qa=e=>{e.currentTarget,e.key==="Enter"&&Xa()};let Xa=()=>{var e=new Event("click");let t=document.getElementById("AddOnModalSaveButtonId");t!==null&&t.dispatchEvent(e)},Ya=()=>{let e=document.getElementById("TableFooterAddOnSelectId");e!==null&&e.addEventListener("change",Wa),e!==null&&e.addEventListener("keypress",Qa)},Za=()=>{ka(),xa(),Ya(),el(),$("#TableFooterItemNameId").focus()},el=()=>{var e=new Event("change");let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.dispatchEvent(e)},tl=({inFindColumn:e})=>{e.formatter=al},al=(e,t,a)=>a+1,ll=({inFindColumn:e})=>{e.footerFormatter=ol},ol=e=>`<input type="number" name="AddOnRate" id="AddOnRateId" class="form-control"
                                placeholder="AddOn Rate">`,rl=({inFindColumn:e})=>{e.formatter=nl,e.footerFormatter=dl};function nl(e,t,a){return['<a href="#" class="btn btn-danger ">','<i class="bi bi-trash3"></i>',"</a>"].join("")}const dl=e=>`   <button type="button" class="btn btn-primary" id="AddOnModalSaveButtonId">
                                Save
                            </button>`;let cl=({inFindColumn:e})=>{e.footerFormatter=ml};const ml=(e,t,a)=>`  <select class="form-select" aria-label="Select AddOn" id="TableFooterAddOnSelectId">
                            </select>`;let ul=({inColumns:e})=>{let t=e,a=t.find(d=>d.field==="KS-Serial"),l=t.find(d=>d.field==="KS-Opts"),r=t.find(d=>d.field==="AddOnService"),n=t.find(d=>d.field==="AddOnRate");a!==void 0&&tl({inFindColumn:a}),l!==void 0&&rl({inFindColumn:l}),r!==void 0&&cl({inFindColumn:r}),n!==void 0&&ll({inFindColumn:n})};const sl=[],il=[{field:"KS-Serial",title:"#",width:75},{field:"AddOnService",title:"Service",width:400},{field:"AddOnRate",title:"Rate",width:200},{field:"KS-Opts",title:"Options",width:100}],Il="",Ll="",f={data:sl,columns:il,onPostBody:Il,onClickRow:Ll},Fl="AddOnModalLocalStorage",jl=()=>{let t=document.getElementById(Fl).querySelector("table");var a=$(t);f.onPostBody=Za,f.onClickRow=Ca,ul({inColumns:f.columns}),a.bootstrapTable(f)},fl=()=>{zt(),ga(),jl()},Sl=async()=>{$e(),fl(),await Lt(),it()},Vl=()=>{let e=m.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t)},gl=()=>{let e=Vl();pl(e.CustomerData.CustomerMobile),bl(e.CustomerData.CustomerName),Ol(e.pk),yl(localStorage.getItem("BranchName"))};let yl=e=>{let a=document.getElementById("BranchNameAnchorId");a!==null&&(a.innerHTML=e)},Ol=e=>{let a=document.getElementById("OrderNumberId");a!==null&&(a.innerHTML=e)},bl=e=>{let a=document.getElementById("CustomerNameId");a!==null&&(a.value=e)},pl=e=>{let a=document.getElementById("CustomerMobileId");a!==null&&(a.value=e)};const A=()=>{V(),gl()},Tl=()=>{let e=m.localStorageKeys.PresentOrderAddOnsKey;B()===null&&localStorage.setItem(e,JSON.stringify([]))},Al=async()=>{await Sl(),M({inSuccessFunc:A})&&(Tl(),A())};Al().then();
