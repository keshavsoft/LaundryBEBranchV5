(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();const d=()=>i("KSToken")!=="",i=e=>document.cookie.split("; ").reduce((t,a)=>a.startsWith(e+"=")?a.split("=")[1]:t,""),u=()=>{const e=document.getElementById("LoginModalId");e.addEventListener("shown.bs.modal",function(){document.getElementById("UsernameId").focus()}),new bootstrap.Modal(e,{focus:!0}).show()};let m=()=>!(f()===!1||L()===!1);const f=()=>{let e=document.getElementById("UsernameId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},L=()=>{let e=document.getElementById("PasswordId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},I="POST",g={Accept:"application/json","Content-Type":"application/json"},y="",s={method:I,headers:g,body:y};let p=()=>{let e={},t=document.getElementById("UsernameId").value,a=document.getElementById("PasswordId").value;return e.UserName=t,e.Password=a,e},h=()=>(s.body=JSON.stringify(p()),s),j=async()=>{let e=h();return await await fetch("/Users/Generate",e)};const c=()=>{U(),B(),S()};let U=()=>{let t=document.getElementById("UserName"),a=localStorage.getItem("UserName");if(t!==null)return t.innerHTML=a},B=()=>{let t=document.getElementById("BranchLogOutId");const n=localStorage.getItem("BranchName").replace("BranOrders","");t!==null&&(t.innerHTML=n)},S=()=>{let t=document.getElementById("UserNameId"),a=localStorage.getItem("UserName");if(t!==null)return t.innerHTML=a},V=async({Status:e,inSuccessFunc:t})=>{let a=e;const n="BranchName";let r=localStorage.getItem("UserUuId");if(a.status===200){v(),c();const o=N("KSToken");if(o){const l=F(o);l&&(console.log(l),l.UserUuId!=r&&(localStorage.setItem(n,`BranOrders${l.Branch}`),localStorage.setItem("UserName",l.UserName),localStorage.setItem("UserUuId",l.UserUuId),window.location.href=""))}t()}a.status===401&&E()};const N=e=>{const a=`; ${document.cookie}`.split(`; ${e}=`);return a.length===2?a.pop().split(";").shift():null},F=e=>{try{const[t,a,n]=e.split(".");return JSON.parse(atob(a))}catch(t){return console.error("Error decoding JWT payload:",t),null}};let v=()=>{const e=document.getElementById("LoginModalId"),t=bootstrap.Modal.getInstance(e);t&&t.hide()},E=()=>{let e=document.getElementById("UsernameId"),t=document.getElementById("PasswordId");e.classList.add("is-invalid"),t.classList.add("is-invalid")},w=async({inSuccessFunc:e})=>{if(m()){let t=await j();V({Status:t,inSuccessFunc:e})}},M=({inSuccessFunc:e})=>{document.getElementById("LoginButtonId").addEventListener("click",async()=>{await w({inSuccessFunc:e})})},$=({inSuccessFunc:e})=>{M({inSuccessFunc:e})};const O=({inSuccessFunc:e})=>{if(d()===!0)return c(),!0;u(),$({inSuccessFunc:e})};export{O as S};
