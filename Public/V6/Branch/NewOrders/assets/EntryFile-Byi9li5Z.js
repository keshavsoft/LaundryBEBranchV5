import{C as h}from"./Config-kioEcG-G.js";import{S as N}from"./EntryFile-D68kwv0T.js";const D=()=>{let t=localStorage.getItem("CustomerNames");if(t===null){document.getElementById("MasterButtonId").click();return}let e=JSON.parse(t),l=document.getElementById("CustomersDataListId");e.forEach(a=>{let o=document.createElement("option");o.value=`${a.CustomerName}:${a.Mobile}`,o.innerHTML=`${a.CustomerName}:${a.Mobile}`,l.appendChild(o)})},B="binV4",k="Masters",R="CustomerNames",E="Custom/Cleaning/Branch/Order/NewOrderV1/TodayCustomerFilter",P={OrderKey:"CustomerNames",ItemNamesKey:"ItemNames",AddOnsKey:"AddOns"},x={NewOrderButtonId:{PostFetch1:"/Custom/Cleaning/Branch/Order/NewOrderV1/InSertOrder",PostFetch2:"/Custom/Cleaning/Branch/Order/NewOrderV1",PostFetch_good_8Sep2025:"/Custom/Cleaning/Branch/Order/NewOrderV2",PostFetch:"/BranOrdersKKD/AddWithDefault/InsertFromBody",RedirectUrl:{"500Status":"/Laundry/Branch/NewOrders/HtmlFiles/AddItemsWBtns.html","200Status":"AddItemsWBtns.html"}},AddItemsButtonId:{PostFetch:"/Custom/Cleaning/Branch/Order/NewOrder",RedirectUrl:{"500Status":"/Laundry/Branch/NewOrders/HtmlFiles/AddItemsWBtns.html","200Status":"AddItemsTotalRight.html"}}},F={routePath:B,folderName:k,tableName:R,TodayUrl:E,localStorageKeys:P,Urls:x};let M=async()=>{let t=F.TodayUrl,e=localStorage.getItem("BranchName"),o=document.getElementById("CustomerNameInputId").value.replace(/\D/g,""),r=`/${t}/${e}/${o}`;return await await fetch(r)},H=t=>{let a=K({inData:t}).sort((i,d)=>i.pk===d.pk?0:i.pk<d.pk?1:-1);console.log("jVarLocalOrdered:",a);var o=$("#table"),r=$("#YesterdayTableId"),c=$("#ThisWeekTableId"),s=$("#AllTableId");o.bootstrapTable("load",a),r.bootstrapTable("load",[]),c.bootstrapTable("load",[]),s.bootstrapTable("load",[])},K=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(r=>r.Pcs).reduce((r,c)=>r+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let o=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(r=>(r.AddOnDataAsArray=o.filter(c=>c.AddOnItemSerial===r.ItemSerial),r)),a}),l},J=t=>{var e=$("#table"),l=$("#YesterdayTableId"),a=$("#ThisWeekTableId"),o=$("#AllTableId");e.bootstrapTable("load",[]),l.bootstrapTable("load",[]),a.bootstrapTable("load",[]),o.bootstrapTable("load",[])},U=async t=>{let e=t;e.status===200&&H(await e.json()),e.status===500&&J(await e.json())},W=async()=>{let t=await M();U(t)};const L=()=>{W()};let z=()=>{document.getElementById("CustomerNameInputId").addEventListener("keypress",l=>{l.key==="Enter"&&L()})},G=async()=>{let t=document.getElementById("CustomerNameInputId");if(t.value==="")return t.classList.add("is-invalid"),!1;let e=await Y();return console.log("LocalFech:",e),e===!1?(t.classList.add("is-invalid"),!1):!0};const Y=async()=>{let e=document.getElementById("CustomerNameInputId").value.split(":")[1],l=`/${F.routePath}/MastersCustomers/Show/Filter/Mobile/${e}`;return(await fetch(l)).status!==500},X="POST",q={Accept:"application/json","Content-Type":"application/json"},_={},u={method:X,headers:q,body:_};let Q=()=>{let t=Z(),l=localStorage.getItem("BranchName").replace("BranOrders",""),a=t.split(":")[1],o=localStorage.getItem("UserName");return u.body.ItemsInOrder={},u.body.CustomerData={},u.body.OrderData={},u.body.AddOnData={},u.body.CheckOutData={},u.body.OrderData.BranchName=l,u.body.OrderData.Mobile=a,u.body.CustomerData.Mobile=a,u.body.CustomerData.UserName=o,u.body.CustomerData.CustomerName=t.split(":")[0],u.body.CustomerData.DOB="",u.body.CustomerData.GSTNumber="",u.body.CustomerData.City="",u.body.CustomerData.Occupation="",u.body=JSON.stringify(u.body),u},Z=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},tt=async()=>{let t=Q(),e=localStorage.getItem("BranchName"),l=`/${h.routePath}/${e}/Insert/AsIsAndTS`;return await await fetch(l,t)},et=()=>{window.location=F.Urls.NewOrderButtonId.RedirectUrl["200Status"]},at=({inresponse:t})=>{Swal.fire({title:"Error Alert",text:`${t}`,icon:"error",confirmButtonColor:"#3085d6",showDenyButton:!0,denyButtonText:"Add ItemsV1",denyButtonColor:"#008000"}).then(e=>{(e.isConfirmed||e.isDismissed)&&(window.location.href=""),e.isDenied&&(window.location.href=F.Urls.NewOrderButtonId.RedirectUrl["500Status"])})},lt=async()=>{let t=await tt();t.status===200&&et(),t.status===500&&at({inresponse:await t.text()})};const ot=async()=>{await G()&&lt()};let rt=()=>{document.getElementById("NewOrderButtonId").addEventListener("click",ot)},nt=()=>{document.getElementById("CustomerNameSearchButtonId").addEventListener("click",L)},ct=async()=>{let t=h.routePath,e=F.localStorageKeys.OrderKey,l=`/${t}/MastersCustomers/Read/AsIs`,o=await(await fetch(l)).json();console.log(o);let r=o.sort((c,s)=>c.CustomerName-s.CustomerName);o.sort(function(c,s){var i=s.CustomerName.toLowerCase(),d=c.CustomerName.toLowerCase();return d<i?-1:d>i?1:0}),localStorage.setItem(e,JSON.stringify(r))},it=async()=>{let t=h.routePath,e=F.localStorageKeys.ItemNamesKey,l=`/${t}/MastersItems/Read/AsIs`,o=await(await fetch(l)).json();localStorage.setItem(e,JSON.stringify(o))},st=async()=>{let t=h.routePath,e=F.localStorageKeys.AddOnsKey,l=`/${t}/MastersAddOns/Read/AsIs`,o=await(await fetch(l)).json();localStorage.setItem(e,JSON.stringify(o))},dt=()=>{ct().then(()=>{ut()}),it().then(),st().then()};const ut=()=>{let t=localStorage.getItem("CustomerNames");if(t!==null){let e=JSON.parse(t),l=document.getElementById("CustomersDataListId");l.innerHTML="",e.forEach(a=>{let o=document.createElement("option");o.value=`${a.CustomerName}:${a.Mobile}`,o.innerHTML=`${a.CustomerName}:${a.Mobile}`,l.appendChild(o)})}};let mt=()=>{document.getElementById("MasterButtonId").addEventListener("click",()=>{dt()})},ft=()=>{let t=localStorage.getItem("BranchName");if(t===null){localStorage.setItem("BranchName","BranOrdersKKD");return}const e=t.replace("BranOrders","");let l=document.getElementById("BranchButtonId");l.innerText=e,l.addEventListener("click",function(){window.location.href="/LoginUsers/HtmlFiles/loginBranch.html"})};const Ft="binV4",Lt="MastersCustomers",$t="Custom/Cleaning/Branch/Order/NewOrderV1/YesterdayCustomerFilter",pt={routePath:Ft,tableName:Lt,url:$t};let It=async()=>{let t=pt.url,e=localStorage.getItem("BranchName");const a=St().split(":")[1].trim();let o=`/${t}/${e}/${a}`;return await await fetch(o)},St=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},jt=({inData:t})=>{let a=Ct({inData:t}).sort((r,c)=>r.pk===c.pk?0:r.pk<c.pk?1:-1);var o=$("#YesterdayTableId");o.bootstrapTable("load",a)},Ct=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(r=>r.Pcs).reduce((r,c)=>r+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let o=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(r=>(r.AddOnDataAsArray=o.filter(c=>c.AddOnItemSerial===r.ItemSerial),r)),a}),l},Vt=async()=>{let t=await It();t.status===200&&jt({inData:await t.json()})},bt=()=>{document.getElementById("YesterdayRefreshButtonId").addEventListener("click",Vt)};const gt="binV4",ht="MastersCustomers",Ot="Custom/Cleaning/Branch/Order/NewOrderV1/WeekCustomerFilter",At={routePath:gt,tableName:ht,url:Ot};let Tt=async()=>{let t=At.url,e=localStorage.getItem("BranchName");const a=yt().split(":")[1].trim();let o=`/${t}/${e}/${a}`;return await await fetch(o)},yt=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},Dt=({inData:t})=>{let a=wt({inData:t}).sort((r,c)=>r.pk===c.pk?0:r.pk<c.pk?1:-1);var o=$("#ThisWeekTableId");o.bootstrapTable("load",a)},wt=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(r=>r.Pcs).reduce((r,c)=>r+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let o=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(r=>(r.AddOnDataAsArray=o.filter(c=>c.AddOnItemSerial===r.ItemSerial),r)),a}),l},vt=async()=>{let t=await Tt();t.status===200&&Dt({inData:await t.json()})},Nt=()=>{document.getElementById("ThisWeekRefreshButtonId").addEventListener("click",vt)};const Bt="binV4",kt="MastersCustomers",Rt="Custom/Cleaning/Branch/Order/NewOrderV1/AllCustomerFilter",Et={routePath:Bt,tableName:kt,url:Rt};let Pt=async()=>{let t=Et.url,e=localStorage.getItem("BranchName");const a=xt().split(":")[1].trim();let o=`/${t}/${e}/${a}`;return await await fetch(o)},xt=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},Mt=({inData:t})=>{let a=Ht({inData:t}).sort((r,c)=>r.pk===c.pk?0:r.pk<c.pk?1:-1);var o=$("#AllTableId");o.bootstrapTable("load",a)},Ht=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(r=>r.Pcs).reduce((r,c)=>r+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let o=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(r=>(r.AddOnDataAsArray=o.filter(c=>c.AddOnItemSerial===r.ItemSerial),r)),a}),l},Kt=async()=>{let t=await Pt();t.status===200&&Mt({inData:await t.json()})},Jt=()=>{document.getElementById("AllRefreshButtonId").addEventListener("click",Kt)},Ut=()=>{bt(),Nt(),Jt()};const Wt="/Custom/Cleaning/Masters/V2/Customers/Filter/Mobile/{MobileNumber}",zt={GetEndPoint:Wt};let Gt=async()=>{let t=zt.GetEndPoint;const l=Yt().split(":")[1].trim(),a=t.replace("{MobileNumber}",l);return await await fetch(a)},Yt=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},Xt=({inData:t})=>{qt({inValue:t.pk}),_t({inValue:t.CustomerName}),Qt({inValue:t.Mobile}),Zt({inValue:t.DOB}),ee({inValue:t.City}),ae({inValue:t.Occupation}),le({inValue:t.CompanyName}),te({inValue:t.GSTNumber})},qt=({inValue:t})=>{let l=document.getElementById("pkId");l!==null&&(l.value=t)},_t=({inValue:t})=>{let l=document.getElementById("CustomerName");l!==null&&(l.value=t)},Qt=({inValue:t})=>{let l=document.getElementById("CustomerMobileNumber");l!==null&&(l.value=t)},Zt=({inValue:t})=>{let l=document.getElementById("dob");l!==null&&(l.value=t)},te=({inValue:t})=>{let l=document.getElementById("CustomerGST");l!==null&&(l.value=t)},ee=({inValue:t})=>{let l=document.getElementById("CustomerLocation");l!==null&&(l.value=t)},ae=({inValue:t})=>{let l=document.getElementById("CustomerOccupation");l!==null&&(l.value=t)},le=({inValue:t})=>{let l=document.getElementById("CustomerCompany");l!==null&&(l.value=t)},oe=({inData:t})=>{Xt({inData:t})},re=({inResponse:t})=>{Swal.fire({text:`${t}`,icon:"error",title:"check"})},ne=async({inResponse:t})=>{let e=await t;if(e.status===200){let l=await e.json();oe({inData:l[0]})}if(e.status===500){let l=await e.text();re({inResponse:l})}};const ce=async()=>{let t=await Gt();ne({inResponse:t})};let ie=()=>{document.getElementById("CustomerAlter").addEventListener("click",ce)},se=()=>{ie()};const de="PUT",ue={Accept:"application/json","Content-Type":"application/json"},me="",w={method:de,headers:ue,body:me};let fe=()=>{let t=document.getElementById("FormId");return w.body=JSON.stringify(Fe(t)),w};function Fe(t){var e=new FormData(t),l={};for(var[a,o]of e)l[a]?(Array.isArray(l[a])||(l[a]=[l[a]]),l[a].push(o)):l[a]=o;return l}const Le="/Custom/Cleaning/Masters/V1/Customers",$e="MastersCustomers",pe={url:Le,tableName:$e};let Ie=async()=>{let t=pe.url,e=Se(),l=fe(),a=`${t}/${e}`;return await await fetch(a,l)},Se=()=>{let e=document.getElementById("pkId");if(e!==null)return e.value.trim()},je=()=>{let e=document.getElementById("FormId").querySelectorAll("[required]"),l=!0;return e.forEach(a=>{if(a.value.trim().length===0){a.classList.add("is-invalid"),l=!1;return}if(a.value.trim().length>0&&a.classList.remove("is-invalid"),a.name==="Mobile"&&a.value.trim().length!==10){document.getElementById("MobileClass").innerHTML="must be 10",a.classList.add("is-invalid"),a.focus(),l=!1;return}if(a.name==="AddOnRate"&&!(a.value.trim().length<4)){l=!1;return}}),l},Ce=({inFetchData:t})=>{$("#editCustomerModal").modal("hide")},Ve=async()=>{if(je()){let e=await Ie();Ce({inResponse:e})}},be=()=>{let t=document.getElementById("ModelAlter");t!==null&&t.addEventListener("click",Ve)},ge=()=>{be()},he=()=>{z(),rt(),nt(),mt(),ft(),Ut(),se(),ge()};const Oe=()=>{let t=v({inGetKey:"CustomerMobile"}),e=v({inGetKey:"CustomerName"});if(t!==null&&e!==null){let l=`${e}:${t}`;Ae(l)}};let Ae=t=>{let l=document.getElementById("CustomerNameInputId");l!==null&&(l.value=t)},v=({inGetKey:t})=>{const e=window.location.search;return new URLSearchParams(e).get(t)};const Te="#toolbar",ye="pk",De="true",we=[],ve="",Ne="",Be=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],O={toolbar:Te,idfield:ye,showFooter:De,data:we,onClickRow:ve,icons:Ne,columns:Be};let ke=({inFindColumn:t})=>{t.formatter=Re},Re=(t,e,l)=>l+1,Ee=({inFindColumn:t})=>{t.footerFormatter=Pe};function Pe(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let xe=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="AddOnRate");l!==void 0&&ke({inFindColumn:l}),a!==void 0&&Ee({inFindColumn:a})},Me=(t,e,l)=>{let a=e.AddOnArray,r=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(r);let i=l.html(s).find("table");O.data=a,xe({inColumns:O.columns}),i.bootstrapTable(O)};const He="#toolbar",Ke="pk",Je="true",Ue=[],We=!0,ze="",Ge="",Ye="",Xe=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],C={toolbar:He,idfield:Ke,showFooter:Je,data:Ue,detailView:We,onClickRow:ze,onExpandRow:Ge,icons:Ye,columns:Xe};let qe=({inFindColumn:t})=>{t.formatter=_e},_e=(t,e,l)=>l+1,Qe=({inFindColumn:t})=>{t.footerFormatter=Ze};function Ze(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let ta=({inFindColumn:t})=>{t.footerFormatter=ea};function ea(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let aa=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="Rate"),o=e.find(r=>r.field==="Pcs");l!==void 0&&qe({inFindColumn:l}),a!==void 0&&Qe({inFindColumn:a}),o!==void 0&&ta({inFindColumn:o})},la=(t,e,l)=>{let a=e.AggValues.ItemsArray,r=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(r);let i=l.html(s).find("table");C.data=a,C.onExpandRow=Me,aa({inColumns:C.columns}),i.bootstrapTable(C)};const oa="bi-plus-circle fs-4",ra="bi-dash-circle fs-4",na={detailOpen:oa,detailClose:ra},ca="#toolbar",ia="pk",sa="true",da=[],ua=!0,ma="",fa="",Fa="",La=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],p={toolbar:ca,idfield:ia,showFooter:sa,data:da,detailView:ua,onClickRow:ma,onExpandRow:fa,icons:Fa,columns:La};let $a=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):L()};const pa=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return $a({inFromFetch:c}),c};let Ia=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&pa({inRowData:t}).then(l=>{})})};const Sa=(t,e,l)=>{l==="Opts"&&(t.IsSettled||Ia({inRowData:t}))};let ja=({inFindColumn:t})=>{t.formatter=Ca},Ca=(t,e,l)=>l+1,Va=({inFindColumn:t})=>{t.footerFormatter=ga,t.formatter=ba};const ba=(t,e,l)=>t===""?"":`₹ ${t}`;function ga(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let ha=({inFindColumn:t})=>{t.footerFormatter=Oa};function Oa(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,o){return a+o},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,o){return a+o},0);return`${l}/${e}`}const Aa=({inFindColumn:t})=>{t.formatter=Ta},Ta=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((o,r)=>o+r.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let ya=({inFindColumn:t})=>{t.formatter=Da};function Da(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let wa=({inFindColumn:t})=>{t.formatter=va,t.footerFormatter=Na};function va(t,e,l){let a=localStorage.getItem("PresentOrder"),o=JSON.parse(a),r=e.ItemSerial,c=Object.values(o.AddOnData).filter(s=>s.AddOnItemSerial===r);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function Na(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let Ba=({inFindColumn:t})=>{t.formatter=ka};const ka=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),o=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+o+" min..."};let Ra=({inFindColumn:t})=>{t.footerFormatter=Ea};function Ea(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Pa=({inFindColumn:t})=>{t.formatter=xa},xa=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),Ma=({inFindColumn:t})=>{t.formatter=Ha},Ha=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),Ka=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="AggValues.SettlementAmount"),o=e.find(n=>n.field==="AggValues.ItemDetails"),r=e.find(n=>n.field==="KS-AddOns"),c=e.find(n=>n.field==="Opts"),s=e.find(n=>n.field==="KS-Amount"),i=e.find(n=>n.field==="DateTime");e.find(n=>n.field==="ItemName");let d=e.find(n=>n.field==="Pcs");e.find(n=>n.field==="location");let m=e.find(n=>n.field==="DeliveryDateTime");e.find(n=>n.field==="ItemService");let f=e.find(n=>n.field==="IsSettled");l!==void 0&&ja({inFindColumn:l}),a!==void 0&&Va({inFindColumn:a}),o!==void 0&&ha({inFindColumn:o}),r!==void 0&&Aa({inFindColumn:r}),c!==void 0&&ya({inFindColumn:c}),s!==void 0&&wa({inFindColumn:s}),i!==void 0&&Ba({inFindColumn:i}),d!==void 0&&Ra({inFindColumn:d}),m!==void 0&&Pa({inFindColumn:m}),f!==void 0&&Ma({inFindColumn:f})};const Ja=()=>{var t=$("#table");p.icons=na,p.onExpandRow=la,p.onClickRow=Sa,Ka({inColumns:p.columns}),t.bootstrapTable(p)},Ua="#toolbar",Wa="pk",za="true",Ga=[],Ya="",Xa="",qa=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],A={toolbar:Ua,idfield:Wa,showFooter:za,data:Ga,onClickRow:Ya,icons:Xa,columns:qa};let _a=({inFindColumn:t})=>{t.formatter=Qa},Qa=(t,e,l)=>l+1,Za=({inFindColumn:t})=>{t.footerFormatter=tl};function tl(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let el=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="AddOnRate");l!==void 0&&_a({inFindColumn:l}),a!==void 0&&Za({inFindColumn:a})},al=(t,e,l)=>{let a=e.AddOnArray,r=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(r);let i=l.html(s).find("table");A.data=a,el({inColumns:A.columns}),i.bootstrapTable(A)};const ll="#toolbar",ol="pk",rl="true",nl=[],cl=!0,il="",sl="",dl="",ul=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],V={toolbar:ll,idfield:ol,showFooter:rl,data:nl,detailView:cl,onClickRow:il,onExpandRow:sl,icons:dl,columns:ul};let ml=({inFindColumn:t})=>{t.formatter=fl},fl=(t,e,l)=>l+1,Fl=({inFindColumn:t})=>{t.footerFormatter=Ll};function Ll(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let $l=({inFindColumn:t})=>{t.footerFormatter=pl};function pl(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Il=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="Rate"),o=e.find(r=>r.field==="Pcs");l!==void 0&&ml({inFindColumn:l}),a!==void 0&&Fl({inFindColumn:a}),o!==void 0&&$l({inFindColumn:o})},Sl=(t,e,l)=>{let a=e.AggValues.ItemsArray,r=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(r);let i=l.html(s).find("table");V.data=a,V.onExpandRow=al,Il({inColumns:V.columns}),i.bootstrapTable(V)};const jl="bi-plus-circle fs-4",Cl="bi-dash-circle fs-4",Vl={detailOpen:jl,detailClose:Cl},bl="#toolbar",gl="pk",hl="true",Ol=[],Al=!0,Tl="",yl="",Dl="",wl=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],I={toolbar:bl,idfield:gl,showFooter:hl,data:Ol,detailView:Al,onClickRow:Tl,onExpandRow:yl,icons:Dl,columns:wl};let vl=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):L()};const Nl=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return vl({inFromFetch:c}),c};let Bl=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&Nl({inRowData:t}).then(l=>{})})};const kl=(t,e,l)=>{l==="Opts"&&(t.IsSettled||Bl({inRowData:t}))};let Rl=({inFindColumn:t})=>{t.formatter=El},El=(t,e,l)=>l+1,Pl=({inFindColumn:t})=>{t.footerFormatter=Ml,t.formatter=xl};const xl=(t,e,l)=>t===""?"":`₹ ${t}`;function Ml(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let Hl=({inFindColumn:t})=>{t.footerFormatter=Kl};function Kl(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,o){return a+o},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,o){return a+o},0);return`${l}/${e}`}const Jl=({inFindColumn:t})=>{t.formatter=Ul},Ul=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((o,r)=>o+r.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let Wl=({inFindColumn:t})=>{t.formatter=zl};function zl(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let Gl=({inFindColumn:t})=>{t.formatter=Yl,t.footerFormatter=Xl};function Yl(t,e,l){let a=localStorage.getItem("PresentOrder"),o=JSON.parse(a),r=e.ItemSerial,c=Object.values(o.AddOnData).filter(s=>s.AddOnItemSerial===r);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function Xl(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let ql=({inFindColumn:t})=>{t.formatter=_l};const _l=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),o=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+o+" min..."};let Ql=({inFindColumn:t})=>{t.footerFormatter=Zl};function Zl(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let to=({inFindColumn:t})=>{t.formatter=eo},eo=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),ao=({inFindColumn:t})=>{t.formatter=lo},lo=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),oo=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="AggValues.SettlementAmount"),o=e.find(n=>n.field==="AggValues.ItemDetails"),r=e.find(n=>n.field==="KS-AddOns"),c=e.find(n=>n.field==="Opts"),s=e.find(n=>n.field==="KS-Amount"),i=e.find(n=>n.field==="DateTime");e.find(n=>n.field==="ItemName");let d=e.find(n=>n.field==="Pcs");e.find(n=>n.field==="location");let m=e.find(n=>n.field==="DeliveryDateTime");e.find(n=>n.field==="ItemService");let f=e.find(n=>n.field==="IsSettled");l!==void 0&&Rl({inFindColumn:l}),a!==void 0&&Pl({inFindColumn:a}),o!==void 0&&Hl({inFindColumn:o}),r!==void 0&&Jl({inFindColumn:r}),c!==void 0&&Wl({inFindColumn:c}),s!==void 0&&Gl({inFindColumn:s}),i!==void 0&&ql({inFindColumn:i}),d!==void 0&&Ql({inFindColumn:d}),m!==void 0&&to({inFindColumn:m}),f!==void 0&&ao({inFindColumn:f})};const ro="YesterdayTableId",no=()=>{var t=$(`#${ro}`);I.icons=Vl,I.onExpandRow=Sl,I.onClickRow=kl,oo({inColumns:I.columns}),t.bootstrapTable(I)},co="#toolbar",io="pk",so="true",uo=[],mo="",fo="",Fo=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],T={toolbar:co,idfield:io,showFooter:so,data:uo,onClickRow:mo,icons:fo,columns:Fo};let Lo=({inFindColumn:t})=>{t.formatter=$o},$o=(t,e,l)=>l+1,po=({inFindColumn:t})=>{t.footerFormatter=Io};function Io(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let So=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="AddOnRate");l!==void 0&&Lo({inFindColumn:l}),a!==void 0&&po({inFindColumn:a})},jo=(t,e,l)=>{let a=e.AddOnArray,r=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(r);let i=l.html(s).find("table");T.data=a,So({inColumns:T.columns}),i.bootstrapTable(T)};const Co="#toolbar",Vo="pk",bo="true",go=[],ho=!0,Oo="",Ao="",To="",yo=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],b={toolbar:Co,idfield:Vo,showFooter:bo,data:go,detailView:ho,onClickRow:Oo,onExpandRow:Ao,icons:To,columns:yo};let Do=({inFindColumn:t})=>{t.formatter=wo},wo=(t,e,l)=>l+1,vo=({inFindColumn:t})=>{t.footerFormatter=No};function No(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Bo=({inFindColumn:t})=>{t.footerFormatter=ko};function ko(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Ro=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="Rate"),o=e.find(r=>r.field==="Pcs");l!==void 0&&Do({inFindColumn:l}),a!==void 0&&vo({inFindColumn:a}),o!==void 0&&Bo({inFindColumn:o})},Eo=(t,e,l)=>{let a=e.AggValues.ItemsArray,r=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(r);let i=l.html(s).find("table");b.data=a,b.onExpandRow=jo,Ro({inColumns:b.columns}),i.bootstrapTable(b)};const Po="bi-plus-circle fs-4",xo="bi-dash-circle fs-4",Mo={detailOpen:Po,detailClose:xo},Ho="#toolbar",Ko="pk",Jo="true",Uo=[],Wo=!0,zo="",Go="",Yo="",Xo=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],S={toolbar:Ho,idfield:Ko,showFooter:Jo,data:Uo,detailView:Wo,onClickRow:zo,onExpandRow:Go,icons:Yo,columns:Xo};let qo=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):L()};const _o=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return qo({inFromFetch:c}),c};let Qo=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&_o({inRowData:t}).then(l=>{})})};const Zo=(t,e,l)=>{l==="Opts"&&(t.IsSettled||Qo({inRowData:t}))};let tr=({inFindColumn:t})=>{t.formatter=er},er=(t,e,l)=>l+1,ar=({inFindColumn:t})=>{t.footerFormatter=or,t.formatter=lr};const lr=(t,e,l)=>t===""?"":`₹ ${t}`;function or(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let rr=({inFindColumn:t})=>{t.footerFormatter=nr};function nr(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,o){return a+o},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,o){return a+o},0);return`${l}/${e}`}const cr=({inFindColumn:t})=>{t.formatter=ir},ir=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((o,r)=>o+r.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let sr=({inFindColumn:t})=>{t.formatter=dr};function dr(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let ur=({inFindColumn:t})=>{t.formatter=mr,t.footerFormatter=fr};function mr(t,e,l){let a=localStorage.getItem("PresentOrder"),o=JSON.parse(a),r=e.ItemSerial,c=Object.values(o.AddOnData).filter(s=>s.AddOnItemSerial===r);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function fr(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let Fr=({inFindColumn:t})=>{t.formatter=Lr};const Lr=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),o=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+o+" min..."};let $r=({inFindColumn:t})=>{t.footerFormatter=pr};function pr(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Ir=({inFindColumn:t})=>{t.formatter=Sr},Sr=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),jr=({inFindColumn:t})=>{t.formatter=Cr},Cr=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),Vr=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="AggValues.SettlementAmount"),o=e.find(n=>n.field==="AggValues.ItemDetails"),r=e.find(n=>n.field==="KS-AddOns"),c=e.find(n=>n.field==="Opts"),s=e.find(n=>n.field==="KS-Amount"),i=e.find(n=>n.field==="DateTime");e.find(n=>n.field==="ItemName");let d=e.find(n=>n.field==="Pcs");e.find(n=>n.field==="location");let m=e.find(n=>n.field==="DeliveryDateTime");e.find(n=>n.field==="ItemService");let f=e.find(n=>n.field==="IsSettled");l!==void 0&&tr({inFindColumn:l}),a!==void 0&&ar({inFindColumn:a}),o!==void 0&&rr({inFindColumn:o}),r!==void 0&&cr({inFindColumn:r}),c!==void 0&&sr({inFindColumn:c}),s!==void 0&&ur({inFindColumn:s}),i!==void 0&&Fr({inFindColumn:i}),d!==void 0&&$r({inFindColumn:d}),m!==void 0&&Ir({inFindColumn:m}),f!==void 0&&jr({inFindColumn:f})};const br="ThisWeekTableId",gr=()=>{var t=$(`#${br}`);S.icons=Mo,S.onExpandRow=Eo,S.onClickRow=Zo,Vr({inColumns:S.columns}),t.bootstrapTable(S)},hr="#toolbar",Or="pk",Ar="true",Tr=[],yr="",Dr="",wr=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],y={toolbar:hr,idfield:Or,showFooter:Ar,data:Tr,onClickRow:yr,icons:Dr,columns:wr};let vr=({inFindColumn:t})=>{t.formatter=Nr},Nr=(t,e,l)=>l+1,Br=({inFindColumn:t})=>{t.footerFormatter=kr};function kr(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Rr=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="AddOnRate");l!==void 0&&vr({inFindColumn:l}),a!==void 0&&Br({inFindColumn:a})},Er=(t,e,l)=>{let a=e.AddOnArray,r=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(r);let i=l.html(s).find("table");y.data=a,Rr({inColumns:y.columns}),i.bootstrapTable(y)};const Pr="#toolbar",xr="pk",Mr="true",Hr=[],Kr=!0,Jr="",Ur="",Wr="",zr=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],g={toolbar:Pr,idfield:xr,showFooter:Mr,data:Hr,detailView:Kr,onClickRow:Jr,onExpandRow:Ur,icons:Wr,columns:zr};let Gr=({inFindColumn:t})=>{t.formatter=Yr},Yr=(t,e,l)=>l+1,Xr=({inFindColumn:t})=>{t.footerFormatter=qr};function qr(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let _r=({inFindColumn:t})=>{t.footerFormatter=Qr};function Qr(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Zr=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="Rate"),o=e.find(r=>r.field==="Pcs");l!==void 0&&Gr({inFindColumn:l}),a!==void 0&&Xr({inFindColumn:a}),o!==void 0&&_r({inFindColumn:o})},tn=(t,e,l)=>{let a=e.AggValues.ItemsArray,r=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(r);let i=l.html(s).find("table");g.data=a,g.onExpandRow=Er,Zr({inColumns:g.columns}),i.bootstrapTable(g)};const en="bi-plus-circle fs-4",an="bi-dash-circle fs-4",ln={detailOpen:en,detailClose:an},on="#toolbar",rn="pk",nn="true",cn=[],sn=!0,dn="",un="",mn="",fn=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],j={toolbar:on,idfield:rn,showFooter:nn,data:cn,detailView:sn,onClickRow:dn,onExpandRow:un,icons:mn,columns:fn};let Fn=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):L()};const Ln=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return Fn({inFromFetch:c}),c};let $n=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&Ln({inRowData:t}).then(l=>{})})};const pn=(t,e,l)=>{l==="Opts"&&(t.IsSettled||$n({inRowData:t}))};let In=({inFindColumn:t})=>{t.formatter=Sn},Sn=(t,e,l)=>l+1,jn=({inFindColumn:t})=>{t.footerFormatter=Vn,t.formatter=Cn};const Cn=(t,e,l)=>t===""?"":`₹ ${t}`;function Vn(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let bn=({inFindColumn:t})=>{t.footerFormatter=gn};function gn(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,o){return a+o},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,o){return a+o},0);return`${l}/${e}`}const hn=({inFindColumn:t})=>{t.formatter=On},On=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((o,r)=>o+r.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let An=({inFindColumn:t})=>{t.formatter=Tn};function Tn(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let yn=({inFindColumn:t})=>{t.formatter=Dn,t.footerFormatter=wn};function Dn(t,e,l){let a=localStorage.getItem("PresentOrder"),o=JSON.parse(a),r=e.ItemSerial,c=Object.values(o.AddOnData).filter(s=>s.AddOnItemSerial===r);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function wn(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let vn=({inFindColumn:t})=>{t.formatter=Nn};const Nn=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),o=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+o+" min..."};let Bn=({inFindColumn:t})=>{t.footerFormatter=kn};function kn(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Rn=({inFindColumn:t})=>{t.formatter=En},En=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),Pn=({inFindColumn:t})=>{t.formatter=xn},xn=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),Mn=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="AggValues.SettlementAmount"),o=e.find(n=>n.field==="AggValues.ItemDetails"),r=e.find(n=>n.field==="KS-AddOns"),c=e.find(n=>n.field==="Opts"),s=e.find(n=>n.field==="KS-Amount"),i=e.find(n=>n.field==="DateTime");e.find(n=>n.field==="ItemName");let d=e.find(n=>n.field==="Pcs");e.find(n=>n.field==="location");let m=e.find(n=>n.field==="DeliveryDateTime");e.find(n=>n.field==="ItemService");let f=e.find(n=>n.field==="IsSettled");l!==void 0&&In({inFindColumn:l}),a!==void 0&&jn({inFindColumn:a}),o!==void 0&&bn({inFindColumn:o}),r!==void 0&&hn({inFindColumn:r}),c!==void 0&&An({inFindColumn:c}),s!==void 0&&yn({inFindColumn:s}),i!==void 0&&vn({inFindColumn:i}),d!==void 0&&Bn({inFindColumn:d}),m!==void 0&&Rn({inFindColumn:m}),f!==void 0&&Pn({inFindColumn:f})};const Hn="AllTableId",Kn=()=>{var t=$(`#${Hn}`);j.icons=ln,j.onExpandRow=tn,j.onClickRow=pn,Mn({inColumns:j.columns}),t.bootstrapTable(j)},Jn=()=>{no(),gr(),Kn()},Un=()=>{Jn(),Ja(),he(),Oe(),Wn()};let Wn=()=>{if(zn()!==""){var t=document.getElementById("CustomerNameSearchButtonId"),e=new Event("click");t.dispatchEvent(e)}},zn=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()};const Gn=async()=>{if(Un(),N({inSuccessFunc:D})===!1)return await!1;D()};document.addEventListener("DOMContentLoaded",function(){let t=document.getElementById("editCustomerModal"),l=document.getElementById("CustomerNameInputId");t.addEventListener("shown.bs.modal",function(){document.getElementById("CustomerName").focus()}),t.addEventListener("hidden.bs.modal",()=>{setTimeout(()=>{l.setAttribute("tabindex","-1"),l.focus()},5)})});Gn().then();
