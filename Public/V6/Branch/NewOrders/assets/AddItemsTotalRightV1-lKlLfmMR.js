var B=Object.defineProperty,w=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var O=(e,t,a)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,F=(e,t)=>{for(var a in t||(t={}))D.call(t,a)&&O(e,a,t[a]);if(p)for(var a of p(t))E.call(t,a)&&O(e,a,t[a]);return e},j=(e,t)=>w(e,R(t));import{S as M}from"./EntryFile-D68kwv0T.js";let K=()=>{H()},H=()=>{const e=new URL(window.location.href),t=new URL("./Customer.html",e);let a=P(),l=k();t.searchParams.append("CustomerMobile",a),t.searchParams.append("CustomerName",l),window.location.href=t.href},P=()=>{let t=document.getElementById("CustomerMobileId");if(t!==null)return t.value.trim()},k=()=>{let t=document.getElementById("CustomerNameId");if(t!==null)return t.value.trim()},J=()=>{let e=document.getElementById("BranchNameAnchorId");e!==null&&e.addEventListener("click",K)};const x=()=>{var e=$("#table").bootstrapTable("getData");return e.length===0?(window.alert("Please Add Items"),!1):!0};let U=()=>{x()&&W()},W=()=>{const e=new URL(window.location.href),t=new URL("./Settlement.html",e);let a=q();t.searchParams.append("OrderNumber",a),window.location.href=t.href},q=()=>{let t=document.getElementById("OrderNumberId");if(t!==null)return t.innerHTML.trim()},z=()=>{let e=document.getElementById("CheckOutButtonId");e!==null&&e.addEventListener("click",U)},G=()=>{J(),z()},_=()=>{G()};const Y="binV4",Q="Transactions",X="Kakinada",Z={OrderKey:"PresentOrder",ItemNamesKey:"ItemNames",AddOnsKey:"AddOns",PresentOrderAddOnsKey:"PresentOrderAddOns"},ee={ItemsTable:{DeleteUrl_Common:"$tableName/SubTable/Delete/SubKey/:Id/:inKey/:SubId",DeleteAddOnUrl:"/Custom/Cleaning/Branch/Order/NewOrder/addOn/$tableName/:Id/:SubId",DeleteItemUrl:"/Custom/Cleaning/Branch/Order/NewOrder/Item/$tableName/:Id/:SubId"}},te={AddOnModal:"AddOnModal"},s={routePath:Y,folderName:Q,tableName:X,localStorageKeys:Z,ApiUrls:ee,ModalIds:te};let g=async()=>{let e=localStorage.getItem("BranchName"),t=s.localStorageKeys.OrderKey,a=`/Custom/Cleaning/Branch/Order/NewOrder/MaxRow/${e}`,o=await(await fetch(a)).json();localStorage.setItem(t,JSON.stringify(o))},ae=async()=>{await g()},le=({inRow:e})=>{const t=e;oe(t.ItemName),re(t.pk),ne(t.Rate)},oe=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},re=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},ne=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const ce=({inRow:e})=>{let t=e.AddOnArray;const a=s.ModalIds.AddOnModal;var l=$("#AddOnTable");l.bootstrapTable("load",t),le({inRow:e}),$(`#${a}`).modal("show")},de=async({inRowpk:e,inItemSerial:t})=>{const a=s.ApiUrls.ItemsTable.DeleteItemUrl;let l=localStorage.getItem("BranchName");const o=t;let n=a.replace("$tableName",l).replace(":Id",e).replace(":SubId",o);return await fetch(n,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}})},me=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e),a=JSON.parse(t);return se({inItemsObject:a.ItemsInOrder})},se=({inItemsObject:e})=>Object.entries(e).map(([a,l])=>j(F({},l),{pk:a})),y=()=>{let e=me();var t=$("#table");t.bootstrapTable("load",e)},ue=({inResponse:e})=>{e.status===200&&g().then(t=>{y(),$("#TableFooterItemNameId").focus()})},ie=async({inItemSerial:e})=>{let t=Ie(),a=await de({inRowpk:t,inItemSerial:e});ue({inResponse:a})},Ie=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},Le=(e,t,a)=>{a==="KS-AddOns"&&ce({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")&&ie({inItemSerial:e.pk})};let Fe=()=>!(je()===!1||Se()===!1||fe()===!1||Ve()===!1||ge()===!1||ye()===!1||be()===!1);const je=()=>{let e=document.getElementById("TableFooterItemNameId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Se=()=>{let e=document.getElementById("TableFooterPcsInputId");return e.value===""||e.value<=0?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},fe=()=>{let e=document.getElementById("exampleFormControlInput1");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Ve=()=>{let e=document.getElementById("TableFooterFactoryInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ge=()=>{let e=document.getElementById("TableFooterCategoryId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ye=()=>{let e=document.getElementById("TableFooterdateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},be=()=>{let e=document.getElementById("TableFooterRateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},pe="POST",Oe={Accept:"application/json","Content-Type":"application/json"},Te="",T={method:pe,headers:Oe,body:Te};let ve=({inCategory:e,inItemType:t})=>{let a=s.localStorageKeys.ItemNamesKey,l=localStorage.getItem(a);return JSON.parse(l).filter(r=>r.Category===e&&r.ItemType===t)},h=({inCategory:e,inItemType:t,inService:a})=>{let l=s.localStorageKeys.ItemNamesKey,o=localStorage.getItem(l);return JSON.parse(o).find(c=>c.Category===e&&c.ItemType===t&&c.Service===a)},Ae=()=>{let e=s.localStorageKeys.ItemNamesKey,t=localStorage.getItem(e);return JSON.parse(t)};const $e=()=>{let e=Ce(),t=Ne(),a=Be(),l=we(),o=Ee(),n=Re(),r=De();const c=he();let u=JSON.parse(localStorage.getItem("PresentOrderAddOns"));const I=h({inCategory:e,inItemType:t,inService:c});let d={};return d.Category=e,d.ItemName=I.ItemName,d.ItemType=t,d.Rate=a,d.Pcs=l,d.Total=o,d.location=n,d.DeliveryDateTime=r,d.ItemService=c,d.AddOnArray=u,d};let he=()=>{let t=document.getElementById("TableFooterItemServiceId");if(t!==null)return t.value.trim()},Ce=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},Ne=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},Be=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},we=()=>{let t=document.getElementById("TableFooterPcsInputId");if(t!==null)return t.value.trim()},Re=()=>{let t=document.getElementById("TableFooterFactoryInputId");if(t!==null)return t.value.trim()},De=()=>{let t=document.getElementById("TableFooterdateInputId");if(t!==null)return t.value.trim()},Ee=()=>{let t=document.getElementById("TableFooterRateInputId"),l=document.getElementById("TableFooterPcsInputId");return console.log("Total:",t.value*l.value),t.value*l.value},Me=()=>(T.body=JSON.stringify($e()),T),Ke=async()=>{let e=localStorage.getItem("BranchName"),t=parseInt(document.getElementById("OrderNumberId").innerHTML),a=Me(),l=`/${s.routePath}/${e}/SubTable/Create/${t}/ItemsInOrder`;return await await fetch(l,a)},He=()=>{window.location.href="",localStorage.removeItem("PresentOrderAddOns")},Pe=async()=>{(await Ke()).status===200&&He()};const ke=()=>{Fe()&&Pe()};let Je=()=>{let e=document.getElementById("TableFooterSaveButtonId");e!==null&&e.addEventListener("click",ke)};const xe=({inCategorySelected:e})=>{let a=document.getElementById("ItemsDataListId"),l=e,n=Ae().filter(i=>i.Category===l);const r=Object.groupBy(n,({ItemType:i})=>i);let u=Object.keys(r).map(i=>i).sort((i,L)=>i==L?0:i>L?1:-1);for(var I="",d=0;d<u.length;d++)I+=`<option value="${u[d]}">${u[d]}</option>`;a.innerHTML=I},Ue=e=>{let a=e.currentTarget.value;xe({inCategorySelected:a})};let We=()=>{let e=document.getElementById("TableFooterCategoryId");e!==null&&e.addEventListener("change",Ue)};const qe=e=>{let a=e.currentTarget.value;const l=ze();let o=document.getElementById("TableFooterItemServiceId"),n=ve({inCategory:l,inItemType:a});const r=Object.groupBy(n,({Service:i})=>i);let u=Object.keys(r).map(i=>i).sort((i,L)=>i==L?0:i>L?1:-1);for(var I="",d=0;d<u.length;d++)I+=`<option value="${u[d]}">${u[d]}</option>`;o.innerHTML=I};let ze=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},Ge=()=>{let e=document.getElementById("TableFooterItemNameId");e!==null&&e.addEventListener("change",qe)};const v=(e,t,a)=>{_e(e.ItemName),Ye(e.Category),Qe(e.DryWashRate),Xe(1),$("#ItemsOnModal").modal("hide"),document.getElementById("TableFooterSaveButtonId").click()};let _e=e=>{let a=document.getElementById("TableFooterItemNameId");a!==null&&(a.value=e)},Ye=e=>{let a=document.getElementById("TableFooterCategoryId");a!==null&&(a.value=e)},Qe=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},Xe=e=>{let a=document.getElementById("TableFooterPcsInputId");a!==null&&(a.value=e)};const Ze=e=>{let t="ItemsOnModal";var a=$(document.getElementById(t).querySelector("table"));e?(a.bootstrapTable({data:tt(e),onClickRow:v}),document.getElementById("SearchString").innerHTML=`Search Results for - ${e}`):(a.bootstrapTable({data:et(),onClickRow:v}),document.getElementById("SearchString").innerHTML="All Items"),$(`#${t}`).modal("show")},et=()=>{let e=localStorage.getItem("ItemNames");return JSON.parse(e)},tt=e=>{let t=localStorage.getItem("ItemNames");return JSON.parse(t).filter(l=>l.ItemName.toLowerCase().includes(e.toLowerCase()))},at=()=>{let e=document.getElementById("TableFooterItemNameId").value;Ze(e)};let lt=()=>{let e=document.getElementById("TableFooterItemNameSearchButtonId");e!==null&&e.addEventListener("click",at)},C=document.getElementById("AddOnModalLocalStorage"),ot=({inRow:e})=>{const t=rt(),a=nt();ct(t),dt(a)},rt=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},nt=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},ct=e=>{const t=C.querySelector(".AddOnModalLocalStorageItemNameClass");t!==null&&(t.value=e)},dt=e=>{const t=C.querySelector(".AddOnModalLocalStorageItemRateClass");t!==null&&(t.value=e)};const mt=()=>{let e=s.localStorageKeys.PresentOrderAddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},st="AddOnModalLocalStorageTable",b=()=>{let e=mt();var t=$(`#${st}`);t.bootstrapTable("load",e===null?[]:e)},ut="AddOnModalLocalStorage",it=({inRow:e})=>{b();let t=document.getElementById(ut);ot({inRow:e}),$(t).modal("show")};let It=()=>{let e=document.getElementById("TableFooterAddOnId");e!==null&&e.addEventListener("click",it)};const Lt=e=>{let a=e.currentTarget.value;const l=jt(),o=Ft();let n=h({inCategory:l,inItemType:o,inService:a});St(n.DryWashRate)};let Ft=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},jt=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},St=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},ft=()=>{let e=document.getElementById("TableFooterItemServiceId");e!==null&&e.addEventListener("change",Lt)};const Vt=()=>{Je(),We(),It(),Ge(),lt(),ft()};let gt=()=>{bt(),Vt(),yt(),$("#TableFooterItemNameId").focus()},yt=()=>{var e=new Event("change");document.getElementById("TableFooterCategoryId")!==null&&document.getElementById("TableFooterCategoryId").dispatchEvent(e)};const bt=()=>{var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear(),o=l+"-"+a+"-"+t;e.setDate(e.getDate()+7);var n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),c=e.getFullYear(),u=c+"-"+r+"-"+n;let I=document.getElementById("TableFooterdateInputId");I!==null&&(I.value=u,I.setAttribute("min",o))};let pt=({inFindColumn:e})=>{e.formatter=Ot},Ot=(e,t,a)=>a+1,Tt=({inFindColumn:e})=>{e.footerFormatter=vt},vt=e=>` <div class="input-group">
                                        <input type="text" class="form-control" id="TableFooterRateInputId"
                                            autocomplete="off" tabindex="-1" readonly>
                                        <div class="invalid-feedback">
                                            Please provide correct item.
                                        </div>
                                    </div>`,At=({inFindColumn:e})=>{e.formatter=$t,e.footerFormatter=ht},$t=(e,t,a)=>{let l=t.AddOnArray;if(l.length>0){let o=l.map(n=>n.AddOnRate).reduce((n,r)=>n+r,0);return['<a href="#" class="btn btn-primary ">',`${l.length} -${o}`,"</a>"].join("")}else return['<a href="#" class="btn btn-outline-primary ">',"Click","</a>"].join("")},ht=(e,t,a)=>['<a href="#" id="TableFooterAddOnId" class="btn btn-outline-primary ">',"Click","</a>"].join(""),Ct=({inFindColumn:e})=>{e.formatter=Nt,e.footerFormatter=Bt};function Nt(e,t,a){return['<a href="#" class="btn btn-danger ">','<i class="bi bi-trash3"></i>',"</a>"].join("")}const Bt=e=>`<button class="btn btn-outline-success" type="button"
                                        id="TableFooterSaveButtonId">Save</button>`;let wt=({inFindColumn:e})=>{e.formatter=Rt};function Rt(e,t,a){let l=localStorage.getItem("PresentOrder"),o=JSON.parse(l),n=t.ItemSerial,r=Object.values(o.AddOnData).filter(c=>c.AddOnItemSerial===n);return r.length>0?r.map(u=>u.AddOnRate).reduce((u,I)=>u+I,0)*t.Pcs+t.Total:t.Total}let Dt=({inFindColumn:e})=>{e.footerFormatter=Et};const Et=(e,t,a)=>`  <select class="form-select" aria-label="Default select example"
                                        id="TableFooterCategoryId">
                                        <option selected value="Men">Men</option>
                                        <option value="Women">Women</option>
                                        <option value="Kids">Kids</option>
                                        <option value="Others">Others</option>
                                    </select>`;let Mt=({inFindColumn:e})=>{e.footerFormatter=Kt};const Kt=(e,t,a)=>` <div class="input-group">
                                        <input type="text" class="form-control" id="TableFooterItemNameId"
                                            list="ItemsDataListId" autocomplete="off" autofocus>
                                        <button class="btn btn-outline-secondary" type="button"
                                            id="TableFooterItemNameSearchButtonId">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                                <path
                                                    d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
                                            </svg>
                                        </button>
                                        <div class="invalid-feedback">
                                            Select Item Name...
                                        </div>
                                    </div>`;let Ht=({inFindColumn:e})=>{e.footerFormatter=Pt};const Pt=e=>`   <div class="input-group">
                                        <input class="form-control" id="TableFooterPcsInputId" type="number" min="1"
                                            max="100" step="1" value="1">

                                        <div class="invalid-feedback">
                                            Please provide correct pcs.
                                        </div>
                                    </div>`;let kt=({inFindColumn:e})=>{e.footerFormatter=Jt};const Jt=e=>` <select class="form-select" aria-label="Default select example"
                                        id="TableFooterFactoryInputId" tabindex="-1">
                                        <option value="Vizag" selected>Vizag</option>
                                        <option value="GD">GD</option>
                                        <option value="Vzm">Vzm</option>
                                    </select>`;let xt=({inFindColumn:e})=>{e.footerFormatter=Ut};const Ut=e=>'<input class="form-control" tabindex="-1" type="date" id="TableFooterdateInputId">';let Wt=({inFindColumn:e})=>{e.footerFormatter=qt};const qt=(e,t,a)=>`  <select class="form-select" aria-label="Default select example"
                                        id="TableFooterItemServiceId">
                                        <option>DW</option>
                                          <option>PW</option>
                                          <option>CW</option>
                                    </select>`;let zt=({inColumns:e})=>{let t=e,a=t.find(m=>m.field==="KS-Serial"),l=t.find(m=>m.field==="Rate"),o=t.find(m=>m.field==="KS-AddOns"),n=t.find(m=>m.field==="KS-Opts"),r=t.find(m=>m.field==="KS-Amount"),c=t.find(m=>m.field==="Category"),u=t.find(m=>m.field==="ItemName"),I=t.find(m=>m.field==="Pcs"),d=t.find(m=>m.field==="location"),i=t.find(m=>m.field==="DeliveryDateTime"),L=t.find(m=>m.field==="ItemService");a!==void 0&&pt({inFindColumn:a}),l!==void 0&&Tt({inFindColumn:l}),o!==void 0&&At({inFindColumn:o}),n!==void 0&&Ct({inFindColumn:n}),r!==void 0&&wt({inFindColumn:r}),c!==void 0&&Dt({inFindColumn:c}),u!==void 0&&Mt({inFindColumn:u}),I!==void 0&&Ht({inFindColumn:I}),d!==void 0&&kt({inFindColumn:d}),i!==void 0&&xt({inFindColumn:i}),L!==void 0&&Wt({inFindColumn:L})};const Gt=[],_t=[{field:"KS-Serial",title:"#",width:5,widthUnit:"%"},{field:"Category",title:"Category",width:10,widthUnit:"%"},{field:"ItemName",title:"Item Name",width:10,widthUnit:"%"},{field:"ItemService",title:"Service",width:10,widthUnit:"%"},{field:"KS-AddOns",title:"Add Ons",width:100},{field:"Rate",title:"Rate",align:"right",width:10,widthUnit:"%"},{field:"Pcs",title:"Pcs",align:"right",width:8,widthUnit:"%"},{field:"KS-Amount",title:"Amount",align:"right",formatter:"",width:15,widthUnit:"%"},{field:"location",title:"Factory",width:200},{field:"DeliveryDateTime",title:"Delivery",width:10,widthUnit:"%"},{field:"KS-Opts",title:"Opts.",width:100}],Yt="",Qt="",S={data:Gt,columns:_t,onPostBody:Yt,onClickRow:Qt},Xt=()=>{var e=$("#table");S.onPostBody=gt,S.onClickRow=Le,zt({inColumns:S.columns}),e.bootstrapTable(S)};let Zt=({inRow:e})=>{const t=e;ea(t.ItemName),ta(t.pk),aa(t.Rate)},ea=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},ta=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},aa=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const la=({inRow:e})=>{let t=oa({inItemSerial:parseInt(e.pk)});var a=$("#AddOnTable");a.bootstrapTable("load",t),Zt({inRow:e}),$("#AddOnModal").modal("show")};let oa=({inItemSerial:e})=>{let t=s.localStorageKeys.OrderKey,a=localStorage.getItem(t),l=JSON.parse(a),o=e;return Object.keys(l.AddOnData).map(c=>j(F({},l.AddOnData[c]),{AddOnPK:c})).filter(c=>c.AddOnItemSerial===o)};const ra=async({inRowpk:e,inItemSerial:t})=>{const a=s.ApiUrls.ItemsTable.DeleteAddOnUrl;let l=localStorage.getItem("BranchName");const o=t;let n=a.replace("$tableName",l).replace(":Id",e).replace(":SubId",o);return await fetch(n,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}})},na=({inResponse:e})=>{e.status===200&&(ca("AddOnModal"),g().then(t=>{y(),$("#TableFooterItemNameId").focus()}))};function ca(e){const t=document.querySelector("#"+e),a=bootstrap.Modal.getInstance(t);a!=null&&a.hide()}const da=async({inItemSerial:e})=>{debugger;let t=ma(),a=await ra({inRowpk:t,inItemSerial:e});na({inResponse:a})},ma=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},sa=(e,t,a)=>{console.log("row : ",e),a==="KS-AddOns"&&la({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")&&da({inItemSerial:e.AddOnPK})};let ua=({inFindColumn:e})=>{e.formatter=ia},ia=(e,t,a)=>a+1,Ia=({inColumns:e})=>{let a=e.find(l=>l.field==="KS-Serial");a!==void 0&&ua({inFindColumn:a})};const La=[],Fa=[{field:"KS-Serial",title:"#",width:75},{field:"AddOnService",title:"Service",width:400},{field:"AddOnRate",title:"Rate",width:200}],ja="",V={data:La,columns:Fa,onClickRow:ja},Sa="AddOnTable",fa=()=>{var e=$(`#${Sa}`);V.onClickRow=sa,Ia({inColumns:V.columns}),e.bootstrapTable(V)};let Va=({inRow:e})=>{const t=e;ga(t.ItemName),ya(t.pk),ba(t.Rate)},ga=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},ya=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},ba=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const pa=({inRow:e})=>{let t=Oa({inItemSerial:parseInt(e.pk)});var a=$("#AddOnTable");a.bootstrapTable("load",t),Va({inRow:e}),$("#AddOnModal").modal("show")};let Oa=({inItemSerial:e})=>{let t=s.localStorageKeys.OrderKey,a=localStorage.getItem(t),l=JSON.parse(a),o=e;return Object.keys(l.AddOnData).map(c=>j(F({},l.AddOnData[c]),{AddOnPK:c})).filter(c=>c.AddOnItemSerial===o)};const Ta=({inRowIndex:e})=>{Aa({inRowIndex:e}),b(),va()};let va=()=>{let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.focus()};const Aa=({inRowIndex:e})=>{let t=s.localStorageKeys.PresentOrderAddOnsKey,a=localStorage.getItem(t),l=JSON.parse(a);l.splice(e,1),localStorage.setItem(t,JSON.stringify(l))},$a=(e,t,a)=>{if(console.log("row------------ : ",e,t[0].dataset.index,a),a==="KS-AddOns"&&pa({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")){const l=t[0].dataset.index;Ta({inRowIndex:parseInt(l)})}},ha=()=>{let e=Na(),t=Ca(),a=Ba(),l={};return l.AddOnService=e,l.AddOnRate=parseInt(t),l.AddOnItemSerial=parseInt(a),l};let Ca=()=>{let t=document.getElementById("AddOnRateId");if(t!==null)return t.value.trim()},Na=()=>{let t=document.getElementById("TableFooterAddOnSelectId");if(t!==null)return t.value.trim()},Ba=()=>{let t=document.getElementById("AddOnModalItemSerialId");if(t!==null)return t.value.trim()};const wa=()=>{const e=ha();Ra({inAddOnRow:e})},Ra=({inAddOnRow:e})=>{let t=s.localStorageKeys.PresentOrderAddOnsKey,a=localStorage.getItem(t);if(a===null){localStorage.setItem(t,JSON.stringify([e]));return}let l=JSON.parse(a);l.push(e),localStorage.setItem(t,JSON.stringify(l))},N=()=>{let e=s.localStorageKeys.PresentOrderAddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},Da=({inAddOnService:e})=>N().find(l=>l.AddOnService===e)===void 0;let Ea=()=>{const e=Ma();return Da({inAddOnService:e})},Ma=()=>{let t=document.getElementById("TableFooterAddOnSelectId");if(t!==null)return t.value.trim()};const Ka=()=>{const e=Ea();console.log(" : ",e),e&&(wa(),b(),Ha())};let Ha=()=>{let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.focus()},Pa=()=>{let e=document.getElementById("AddOnModalSaveButtonId");e!==null&&e.addEventListener("click",Ka)};const ka=()=>{let e=s.localStorageKeys.AddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},Ja=()=>{let e=document.getElementById("TableFooterAddOnSelectId"),t=ka();console.log("jVarLocalTableFooterAddOnSelectId: ",e);for(var a=0;a<t.length;a++){let l=document.createElement("option");l.value=t[a].AddOnService,l.innerHTML=t[a].AddOnService,e.appendChild(l)}},xa="AddOns",Ua=()=>{const e=event.currentTarget,t=qa({inAddOnData:e.value});za(t)},Wa=()=>{const e=localStorage.getItem(xa);return JSON.parse(e)},qa=({inAddOnData:e})=>Wa().find(l=>l.AddOnService===e).AddOnRate;let za=e=>{let a=document.getElementById("AddOnRateId");a!==null&&(a.value=e)};const Ga=e=>{e.currentTarget,e.key==="Enter"&&_a()};let _a=()=>{var e=new Event("click");let t=document.getElementById("AddOnModalSaveButtonId");t!==null&&t.dispatchEvent(e)},Ya=()=>{let e=document.getElementById("TableFooterAddOnSelectId");e!==null&&e.addEventListener("change",Ua),e!==null&&e.addEventListener("keypress",Ga)},Qa=()=>{Pa(),Ja(),Ya(),Xa(),$("#TableFooterItemNameId").focus()},Xa=()=>{var e=new Event("change");let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.dispatchEvent(e)},Za=({inFindColumn:e})=>{e.formatter=el},el=(e,t,a)=>a+1,tl=({inFindColumn:e})=>{e.footerFormatter=al},al=e=>`<input type="number" name="AddOnRate" id="AddOnRateId" class="form-control"
                                placeholder="AddOn Rate">`,ll=({inFindColumn:e})=>{e.formatter=ol,e.footerFormatter=rl};function ol(e,t,a){return['<a href="#" class="btn btn-danger ">','<i class="bi bi-trash3"></i>',"</a>"].join("")}const rl=e=>`   <button type="button" class="btn btn-primary" id="AddOnModalSaveButtonId">
                                Save
                            </button>`;let nl=({inFindColumn:e})=>{e.footerFormatter=cl};const cl=(e,t,a)=>`  <select class="form-select" aria-label="Select AddOn" id="TableFooterAddOnSelectId">
                            </select>`;let dl=({inColumns:e})=>{let t=e,a=t.find(r=>r.field==="KS-Serial"),l=t.find(r=>r.field==="KS-Opts"),o=t.find(r=>r.field==="AddOnService"),n=t.find(r=>r.field==="AddOnRate");a!==void 0&&Za({inFindColumn:a}),l!==void 0&&ll({inFindColumn:l}),o!==void 0&&nl({inFindColumn:o}),n!==void 0&&tl({inFindColumn:n})};const ml=[],sl=[{field:"KS-Serial",title:"#",width:75},{field:"AddOnService",title:"Service",width:400},{field:"AddOnRate",title:"Rate",width:200},{field:"KS-Opts",title:"Options",width:100}],ul="",il="",f={data:ml,columns:sl,onPostBody:ul,onClickRow:il},Il="AddOnModalLocalStorage",Ll=()=>{let t=document.getElementById(Il).querySelector("table");var a=$(t);f.onPostBody=Qa,f.onClickRow=$a,dl({inColumns:f.columns}),a.bootstrapTable(f)},Fl=()=>{Xt(),fa(),Ll()};let jl=()=>{let t=document.getElementById("BranchNameId"),a=localStorage.getItem("BranchName");t!==null&&(t.innerHTML=a)};const Sl=async()=>{jl(),Fl(),await ae(),_()},fl=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t)},Vl=()=>{let e=fl();pl(e.CustomerData.CustomerMobile),bl(e.CustomerData.CustomerName),yl(e.pk),gl(localStorage.getItem("BranchName"))};let gl=e=>{let a=document.getElementById("BranchNameAnchorId");a!==null&&(a.innerHTML=e)},yl=e=>{let a=document.getElementById("OrderNumberId");a!==null&&(a.innerHTML=e)},bl=e=>{let a=document.getElementById("CustomerNameId");a!==null&&(a.value=e)},pl=e=>{let a=document.getElementById("CustomerMobileId");a!==null&&(a.value=e)};const A=()=>{y(),Vl()},Ol=()=>{let e=s.localStorageKeys.PresentOrderAddOnsKey;N()===null&&localStorage.setItem(e,JSON.stringify([]))},Tl=async()=>{await Sl(),M({inSuccessFunc:A})&&(Ol(),A())};Tl().then();
