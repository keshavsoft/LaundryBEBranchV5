import"./modulepreload-polyfill-B5Qt9EMX.js";import"./EntryFile-Dg-mTZIw.js";let h=async()=>{document.getElementById("RefreshBSTableId").click()};const m="binV3",u="",v="Custom/Cleaning/Branch/Today/Orders/OrdersWithQrs/Today",f={StartRoute:m,tableName:u,Url:v};let C=async()=>{let t=localStorage.getItem("BranchName"),a=` /${f.Url}/${t}`;return await await fetch(a)},V=t=>{var a=$("#table");let e=t.filter(l=>l.IsQrCodesRaised===!0);a.bootstrapTable("load",e)},p=async()=>{let t=await C();t.status===200&&V(await t.json())},g=()=>{let t=document.getElementById("RefreshBSTableId");t!==null&&t.addEventListener("click",p)},b=()=>{g()};const S="#toolbar",F="true",L="true",j="pk",w="true",H=[],B="5",Z="",D=[{field:"KS-Serial",title:"#",formatter:"jFGlobalSerialColumn",class:"d-none d-sm-table-cell"},{field:"pk",title:"Order #"},{field:"CustomerData.CustomerName",title:"Customer Name"},{field:"CustomerData.inMobileNumber",title:"Mobile",class:"d-none d-sm-table-cell"},{title:"Qr Print",field:"TotalItems"},{title:"Print",field:"OrderPrint"},{title:"Pcs",field:"AggValues.ItemDetails",width:"100",footerFormatter:"pcsFormatter",class:"d-none d-sm-table-cell"},{title:"Settlement",field:"AggValues.SettlementAmount",formatter:"symbolFormatPrice",align:"right",class:"d-none d-sm-table-cell"}],d={toolbar:S,search:F,searchable:L,idfield:j,showFooter:w,data:H,pageSize:B,onClickRow:Z,columns:D};let I=({inFindColumn:t})=>{t.formatter=N},N=(t,a,e)=>e+1,y=({inFindColumn:t})=>{t.formatter=T};function T(t){return this.field,"₹ "+t}let M=({inFindColumn:t})=>{t.formatter=A,t.footerFormatter=O};function A(t,a,e){return a.IsQrCodesRaised?['<a href="#" class="btn btn-primary QRGenerateClass">','<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-qr-code" viewBox="0 0 16 16">','<path d="M2 2h2v2H2V2Z"></path>','<path d="M6 0v6H0V0h6ZM5 1H1v4h4V1ZM4 12H2v2h2v-2Z"></path>','<path d="M6 10v6H0v-6h6Zm-5 1v4h4v-4H1Zm11-9h2v2h-2V2Z"></path>','<path d="M10 0v6h6V0h-6Zm5 1v4h-4V1h4ZM8 1V0h1v2H8v2H7V1h1Zm0 5V4h1v2H8ZM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8H6Zm0 0v1H2V8H1v1H0V7h3v1h3Zm10 1h-1V7h1v2Zm-1 0h-1v2h2v-1h-1V9Zm-4 0h2v1h-1v1h-1V9Zm2 3v-1h-1v1h-1v1H9v1h3v-2h1Zm0 0h3v1h-2v1h-1v-2Zm-4-1v1h1v-2H7v1h2Z">',"</path>",'<path d="M7 12h1v3h4v1H7v-4Zm9 2v2h-3v-1h2v-1h1Z"></path>',"</svg>"," ",`${a.TotalItems}`,"</a>"].join(""):[`<a href="#" data-rowpk="${a.pk}" class="btn btn-outline-primary QRGenerateClass">`,'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-qr-code" viewBox="0 0 16 16">','<path d="M2 2h2v2H2V2Z"></path>','<path d="M6 0v6H0V0h6ZM5 1H1v4h4V1ZM4 12H2v2h2v-2Z"></path>','<path d="M6 10v6H0v-6h6Zm-5 1v4h4v-4H1Zm11-9h2v2h-2V2Z"></path>','<path d="M10 0v6h6V0h-6Zm5 1v4h-4V1h4ZM8 1V0h1v2H8v2H7V1h1Zm0 5V4h1v2H8ZM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8H6Zm0 0v1H2V8H1v1H0V7h3v1h3Zm10 1h-1V7h1v2Zm-1 0h-1v2h2v-1h-1V9Zm-4 0h2v1h-1v1h-1V9Zm2 3v-1h-1v1h-1v1H9v1h3v-2h1Zm0 0h3v1h-2v1h-1v-2Zm-4-1v1h1v-2H7v1h2Z">',"</path>",'<path d="M7 12h1v3h4v1H7v-4Zm9 2v2h-3v-1h2v-1h1Z"></path>',"</svg>"," ",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">','<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path>','<path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path>',"</svg>","</a>"].join("")}function O(t){var a=this.field;return+t.map(function(e){return+e[a]}).reduce(function(e,l){return e+l},0)}let k=({inFindColumn:t})=>{t.formatter=x};function x(t,a,e){if(a.IsQrCodesRaised)return[`<a href="./Bill.html?OrderNumber=${a.pk}" target="_blank" class="btn btn-warning">`,'<i class="bi bi-printer-fill"></i>',"</a>"].join("")}let R=({inColumns:t})=>{let a=t,e=a.find(o=>o.field==="KS-Serial"),l=a.find(o=>o.field==="AggValues.SettlementAmount"),n=a.find(o=>o.field==="TotalItems"),r=a.find(o=>o.field==="OrderPrint");l!==void 0&&y({inFindColumn:l}),e!==void 0&&I({inFindColumn:e}),n!==void 0&&M({inFindColumn:n}),r!==void 0&&k({inFindColumn:r})},Q=({inFindColumn:t})=>{t.footerFormatter=P};function P(t){this.field;var a=t.map(function(l){return+l.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(l,n){return l+n},0),e=t.map(function(l){return+l.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(l,n){return l+n},0);return`${e}/${a}`}let E=({inFindColumn:t})=>{t.footerFormatter=q};function q(t){return this.field,"₹ "+t.map(function(a){return+a.AggValues.SettlementAmount}).reduce(function(a,e){return a+e},0)}let z=({inColumns:t})=>{let a=t,e=a.find(n=>n.field==="AggValues.ItemDetails"),l=a.find(n=>n.field==="AggValues.SettlementAmount");e!==void 0&&Q({inFindColumn:e}),l!==void 0&&E({inFindColumn:l})},G=({inColumns:t})=>{R({inColumns:t}),z({inColumns:t})};const U="binV4",J="Openings",K={routePath:U,tableName:J};let X=async({inRow:t})=>{var a=t.pk;let e=`/${K.routePath}/QrCodes/Show/Filter/OrderNumber/${a}`;return await await(await fetch(e)).json()},Y=({inData:t,inRow:a})=>{let e=t,n=document.getElementById("TemplateForQrCodePrint").content.cloneNode("true");i({inClone:n,inHtmlClassName:"BranchClass",inTextContent:e.BookingData.OrderData.BranchName}),i({inClone:n,inHtmlClassName:"PkClass",inTextContent:e.location}),i({inClone:n,inHtmlClassName:"QrCodeClass",inTextContent:e.UuId}),i({inClone:n,inHtmlClassName:"OrderNumberClass",inTextContent:e.OrderNumber}),i({inClone:n,inHtmlClassName:"ItemNameClass",inTextContent:e.ItemName}),i({inClone:n,inHtmlClassName:"ItemSerialClass",inTextContent:e.ItemSerial}),i({inClone:n,inHtmlClassName:"AddOnDataAsStringClass",inTextContent:e.AddOnDataAsString}),i({inClone:n,inHtmlClassName:"DateTimeClass",inTextContent:new Date(e.BookingData.OrderData.Currentdateandtime).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}).split("/").join("-")}),i({inClone:n,inHtmlClassName:"OrderDateClass",inTextContent:new Date(e.DeliveryDateTime).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}).split("/").join("-")});let r=n.getElementById("CanvasId");return r.dataset.qrcode=`${e.pk}`,new XMLSerializer().serializeToString(n)},i=({inClone:t,inHtmlClassName:a,inTextContent:e})=>{let l=t,n=a,r=e,o=l.querySelector(`.${n}`);o.textContent=r},W=({inData:t,inRow:a})=>{let e=t,l=document.getElementById("ModalBody");l.innerHTML="",e.map(s=>{const c=Y({inData:s,inRow:a});l.innerHTML+=c});let n=document.querySelectorAll("canvas");for(let s=0;s<n.length;s++){const c=n[s];_({inQrData:e,inCanvasId:c})}let r="ModalForQrCode";var o=new bootstrap.Modal(document.getElementById(r),{keyboard:!0,focus:!0});o.show()},_=({inQrData:t="",inCanvasId:a})=>{var e=a;e.height=1,e.width=1,e.style.visibility="hidden";let l={};l.text=e.dataset.qrcode,l.bcid="qrcode",l.scaleX=1,l.scaleY=1,l.rotate="N";try{let r=new Date;bwipjs.toCanvas(e,l),n(r,new Date)}catch(r){console.log("error : ",r);return}function n(r,o){e.style.visibility="visible"}},tt=({inQrCodeData:t,inRow:a})=>{let e=t;var l=a.pk;const r=localStorage.getItem("BranchName").replace("BranOrders","");let o=e.filter(c=>c.OrderNumber==l&&c.BookingData.OrderData.BranchName==r),s=et({inQrCodeData:o});W({inData:s,inRow:a})},et=({inQrCodeData:t})=>{let a=t.length;return t.map(l=>{let n=l.AddOnArray.map(r=>r.AddOnService);return l.AddOnDataAsString=n.join(", "),l.TotalQrCodes=a,l})},at=async({inRowData:t})=>{var a=t;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ok",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&X({inRow:a}).then(l=>{l&&tt({inQrCodeData:l,inRow:a})})})};const lt=(t,a,e)=>{e==="TotalItems"&&at({inRowData:t})},nt=$("#table"),rt=()=>{G({inColumns:d.columns}),d.onClickRow=lt,nt.bootstrapTable(d)};let ot=()=>{let a=document.getElementById("BranchNameId");const l=localStorage.getItem("BranchName").replace("BranOrders","");a!==null&&(a.innerHTML=l)};const it=()=>{ot(),rt(),b()},st=()=>{it(),h().then()};st();
