import"./modulepreload-polyfill-B5Qt9EMX.js";import"./EntryFile-Dg-mTZIw.js";let d=async()=>{document.getElementById("RefreshBSTableId").click()};const m="binV3",h="",u="Custom/Clients/Laundry/Today/Orders/OrdersWithQrs",v={StartRoute:m,tableName:h,Url:u};let f=async()=>{let e=localStorage.getItem("BranchName"),t=` /${v.Url}/${e}`;return await await fetch(t)},C=e=>{var t=$("#table");let l=e.filter(a=>a.IsQrCodesRaised===!0);t.bootstrapTable("load",l)},V=async()=>{let e=await f();e.status===200&&C(await e.json())},p=()=>{let e=document.getElementById("RefreshBSTableId");e!==null&&e.addEventListener("click",V)},g=()=>{p()};const b="#toolbar",S="true",F="true",L="pk",j="true",w=[],H="5",B="",D=[{field:"KS-Serial",title:"#",formatter:"jFGlobalSerialColumn",class:"d-none d-sm-table-cell"},{field:"pk",title:"Order #"},{field:"CustomerData.CustomerName",title:"Customer Name"},{field:"CustomerData.inMobileNumber",title:"Mobile",class:"d-none d-sm-table-cell"},{title:"Qr Print",field:"TotalItems"},{title:"Print",field:"OrderPrint"},{title:"Pcs",field:"AggValues.ItemDetails",width:"100",footerFormatter:"pcsFormatter",class:"d-none d-sm-table-cell"},{title:"Settlement",field:"AggValues.SettlementAmount",formatter:"symbolFormatPrice",align:"right",class:"d-none d-sm-table-cell"}],c={toolbar:b,search:S,searchable:F,idfield:L,showFooter:j,data:w,pageSize:H,onClickRow:B,columns:D};let I=({inFindColumn:e})=>{e.formatter=Z},Z=(e,t,l)=>l+1,N=({inFindColumn:e})=>{e.formatter=y};function y(e){return this.field,"₹ "+e}let T=({inFindColumn:e})=>{e.formatter=M,e.footerFormatter=A};function M(e,t,l){return t.IsQrCodesRaised?['<a href="#" class="btn btn-primary QRGenerateClass">','<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-qr-code" viewBox="0 0 16 16">','<path d="M2 2h2v2H2V2Z"></path>','<path d="M6 0v6H0V0h6ZM5 1H1v4h4V1ZM4 12H2v2h2v-2Z"></path>','<path d="M6 10v6H0v-6h6Zm-5 1v4h4v-4H1Zm11-9h2v2h-2V2Z"></path>','<path d="M10 0v6h6V0h-6Zm5 1v4h-4V1h4ZM8 1V0h1v2H8v2H7V1h1Zm0 5V4h1v2H8ZM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8H6Zm0 0v1H2V8H1v1H0V7h3v1h3Zm10 1h-1V7h1v2Zm-1 0h-1v2h2v-1h-1V9Zm-4 0h2v1h-1v1h-1V9Zm2 3v-1h-1v1h-1v1H9v1h3v-2h1Zm0 0h3v1h-2v1h-1v-2Zm-4-1v1h1v-2H7v1h2Z">',"</path>",'<path d="M7 12h1v3h4v1H7v-4Zm9 2v2h-3v-1h2v-1h1Z"></path>',"</svg>"," ",`${t.TotalItems}`,"</a>"].join(""):[`<a href="#" data-rowpk="${t.pk}" class="btn btn-outline-primary QRGenerateClass">`,'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-qr-code" viewBox="0 0 16 16">','<path d="M2 2h2v2H2V2Z"></path>','<path d="M6 0v6H0V0h6ZM5 1H1v4h4V1ZM4 12H2v2h2v-2Z"></path>','<path d="M6 10v6H0v-6h6Zm-5 1v4h4v-4H1Zm11-9h2v2h-2V2Z"></path>','<path d="M10 0v6h6V0h-6Zm5 1v4h-4V1h4ZM8 1V0h1v2H8v2H7V1h1Zm0 5V4h1v2H8ZM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8H6Zm0 0v1H2V8H1v1H0V7h3v1h3Zm10 1h-1V7h1v2Zm-1 0h-1v2h2v-1h-1V9Zm-4 0h2v1h-1v1h-1V9Zm2 3v-1h-1v1h-1v1H9v1h3v-2h1Zm0 0h3v1h-2v1h-1v-2Zm-4-1v1h1v-2H7v1h2Z">',"</path>",'<path d="M7 12h1v3h4v1H7v-4Zm9 2v2h-3v-1h2v-1h1Z"></path>',"</svg>"," ",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">','<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path>','<path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path>',"</svg>","</a>"].join("")}function A(e){var t=this.field;return+e.map(function(l){return+l[t]}).reduce(function(l,a){return l+a},0)}let O=({inFindColumn:e})=>{e.formatter=k};function k(e,t,l){if(t.IsQrCodesRaised)return[`<a href="./Bill.html?OrderNumber=${t.pk}" target="_blank" class="btn btn-warning">`,'<i class="bi bi-printer-fill"></i>',"</a>"].join("")}let x=({inColumns:e})=>{let t=e,l=t.find(r=>r.field==="KS-Serial"),a=t.find(r=>r.field==="AggValues.SettlementAmount"),n=t.find(r=>r.field==="TotalItems"),o=t.find(r=>r.field==="OrderPrint");a!==void 0&&N({inFindColumn:a}),l!==void 0&&I({inFindColumn:l}),n!==void 0&&T({inFindColumn:n}),o!==void 0&&O({inFindColumn:o})},Q=({inFindColumn:e})=>{e.footerFormatter=R};function R(e){this.field;var t=e.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,n){return a+n},0),l=e.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,n){return a+n},0);return`${l}/${t}`}let P=({inFindColumn:e})=>{e.footerFormatter=q};function q(e){return this.field,"₹ "+e.map(function(t){return+t.AggValues.SettlementAmount}).reduce(function(t,l){return t+l},0)}let E=({inColumns:e})=>{let t=e,l=t.find(n=>n.field==="AggValues.ItemDetails"),a=t.find(n=>n.field==="AggValues.SettlementAmount");l!==void 0&&Q({inFindColumn:l}),a!==void 0&&P({inFindColumn:a})},z=({inColumns:e})=>{x({inColumns:e}),E({inColumns:e})};const G="binV4",U="Openings",J={routePath:G,tableName:U};let K=async({inRowPk:e})=>{let t=e,l=`/${J.routePath}/QrCodes/Show/Filter/OrderNumber/${t}`;return await await(await fetch(l)).json()},W=({inData:e})=>{let t=e,a=document.getElementById("TemplateForQrCodePrint").content.cloneNode("true");i({inClone:a,inHtmlClassName:"BranchClass",inTextContent:t.BookingData.OrderData.BranchName}),i({inClone:a,inHtmlClassName:"PkClass",inTextContent:t.location}),i({inClone:a,inHtmlClassName:"QrCodeClass",inTextContent:t.UuId}),i({inClone:a,inHtmlClassName:"OrderNumberClass",inTextContent:t.OrderNumber}),i({inClone:a,inHtmlClassName:"ItemNameClass",inTextContent:t.ItemName}),i({inClone:a,inHtmlClassName:"ItemSerialClass",inTextContent:t.ItemSerial}),i({inClone:a,inHtmlClassName:"AddOnDataAsStringClass",inTextContent:t.AddOnDataAsString}),i({inClone:a,inHtmlClassName:"DateTimeClass",inTextContent:new Date(t.BookingData.OrderData.Currentdateandtime).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}).split("/").join("-")}),i({inClone:a,inHtmlClassName:"OrderDateClass",inTextContent:new Date(t.DeliveryDateTime).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}).split("/").join("-")});let n=a.getElementById("CanvasId");return n.dataset.qrcode=`${t.pk}~`,n.dataset.qrcode+=`${t.pk}-${t.OrderNumber}~`,n.dataset.qrcode+=`${t.ItemName}~`,n.dataset.qrcode+=`${t.WashType}@${t.ItemSerial}/${t.Pcs}/${t.TotalQrCodes}~`,n.dataset.qrcode+=`${t.AddOnDataAsString}~`,n.dataset.qrcode+=`${t.BookingData.OrderData.Currentdateandtime}~`,n.dataset.qrcode+=`${t.DeliveryDateTime}`,new XMLSerializer().serializeToString(a)},i=({inClone:e,inHtmlClassName:t,inTextContent:l})=>{let a=e,n=t,o=l,r=a.querySelector(`.${n}`);r.textContent=o},X=({inData:e})=>{let t=e,l=document.getElementById("ModalBody");l.innerHTML="",t.map(r=>{const s=W({inData:r});l.innerHTML+=s});let a=document.querySelectorAll("canvas");for(let r=0;r<a.length;r++){const s=a[r];Y({inQrData:t,inCanvasId:s})}let n="ModalForQrCode";var o=new bootstrap.Modal(document.getElementById(n),{keyboard:!0,focus:!0});o.show()},Y=({inQrData:e="",inCanvasId:t})=>{var l=t;l.height=1,l.width=1,l.style.visibility="hidden";let a={};a.text=l.dataset.qrcode,a.bcid="qrcode",a.scaleX=1,a.scaleY=1,a.rotate="N";try{let o=new Date;bwipjs.toCanvas(l,a),n(o,new Date)}catch(o){console.log("error : ",o);return}function n(o,r){l.style.visibility="visible"}},_=({inQrCodeData:e,inRowPk:t})=>{let l=e;const n=localStorage.getItem("BranchName").replace("BranOrders","");let o=l.filter(s=>s.OrderNumber==t&&s.BookingData.OrderData.BranchName==n),r=tt({inQrCodeData:o});X({inData:r})},tt=({inQrCodeData:e})=>{let t=e.length;return e.map(a=>{let n=a.AddOnArray.map(o=>o.AddOnService);return a.AddOnDataAsString=n.join(", "),a.TotalQrCodes=t,a})},et=async({inRowData:e})=>{var t=e.pk;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ok",focusCancel:!0,focusButtonColor:"#0000ff"}).then(l=>{l.isConfirmed&&K({inRowPk:t}).then(a=>{a&&_({inQrCodeData:a,inRowPk:t})})})};const at=(e,t,l)=>{l==="TotalItems"&&et({inRowData:e})},lt=$("#table"),nt=()=>{z({inColumns:c.columns}),c.onClickRow=at,lt.bootstrapTable(c)};let rt=()=>{let t=document.getElementById("BranchNameId");const a=localStorage.getItem("BranchName").replace("BranOrders","");t!==null&&(t.innerHTML=a)};const ot=()=>{rt(),nt(),g()},it=()=>{ot(),d().then()};it();
