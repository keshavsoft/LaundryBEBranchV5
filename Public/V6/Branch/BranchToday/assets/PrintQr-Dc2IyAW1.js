import"./modulepreload-polyfill-B5Qt9EMX.js";import"./EntryFile-Dg-mTZIw.js";import{S as v}from"./EntryFile-BnXMtMmL.js";let m=async()=>{document.getElementById("RefreshBSTableId").click()};const f="binV3",C="",V="Custom/Cleaning/Branch/Today/V1/OrdersWithQrs",p={StartRoute:f,tableName:C,Url:V};let g=async()=>{let t=localStorage.getItem("BranchName"),a=` /${p.Url}/${t}`;return await await fetch(a)},F=t=>{var a=$("#table");let e=t.filter(l=>l.IsQrCodesRaised===!0);a.bootstrapTable("load",e)},S=async()=>{let t=await g();t.status===200&&F(await t.json())},L=()=>{let t=document.getElementById("RefreshBSTableId");t!==null&&t.addEventListener("click",S)},b=()=>{L()};const j="#toolbar",w="true",H="true",B="pk",Z="true",D=[],I="5",y="",N=[{field:"KS-Serial",title:"#",formatter:"jFGlobalSerialColumn",class:"d-none d-sm-table-cell"},{field:"pk",title:"Order #"},{field:"CustomerData.CustomerName",title:"Customer Name"},{field:"CustomerData.inMobileNumber",title:"Mobile",class:"d-none d-sm-table-cell"},{title:"Qr Print",field:"TotalItems"},{title:"Print",field:"OrderPrint"},{title:"Pcs",field:"AggValues.ItemDetails",width:"100",footerFormatter:"pcsFormatter",class:"d-none d-sm-table-cell"},{title:"Settlement",field:"AggValues.SettlementAmount",formatter:"symbolFormatPrice",align:"right",class:"d-none d-sm-table-cell"}],d={toolbar:j,search:w,searchable:H,idfield:B,showFooter:Z,data:D,pageSize:I,onClickRow:y,columns:N};let T=({inFindColumn:t})=>{t.formatter=M},M=(t,a,e)=>e+1,A=({inFindColumn:t})=>{t.formatter=Q};function Q(t){return this.field,"₹ "+t}let O=({inFindColumn:t})=>{t.formatter=x,t.footerFormatter=k};function x(t,a,e){return a.IsQrCodesRaised?['<a href="#" class="btn btn-primary QRGenerateClass">','<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-qr-code" viewBox="0 0 16 16">','<path d="M2 2h2v2H2V2Z"></path>','<path d="M6 0v6H0V0h6ZM5 1H1v4h4V1ZM4 12H2v2h2v-2Z"></path>','<path d="M6 10v6H0v-6h6Zm-5 1v4h4v-4H1Zm11-9h2v2h-2V2Z"></path>','<path d="M10 0v6h6V0h-6Zm5 1v4h-4V1h4ZM8 1V0h1v2H8v2H7V1h1Zm0 5V4h1v2H8ZM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8H6Zm0 0v1H2V8H1v1H0V7h3v1h3Zm10 1h-1V7h1v2Zm-1 0h-1v2h2v-1h-1V9Zm-4 0h2v1h-1v1h-1V9Zm2 3v-1h-1v1h-1v1H9v1h3v-2h1Zm0 0h3v1h-2v1h-1v-2Zm-4-1v1h1v-2H7v1h2Z">',"</path>",'<path d="M7 12h1v3h4v1H7v-4Zm9 2v2h-3v-1h2v-1h1Z"></path>',"</svg>"," ",`${a.TotalItems}`,"</a>"].join(""):[`<a href="#" data-rowpk="${a.pk}" class="btn btn-outline-primary QRGenerateClass">`,'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-qr-code" viewBox="0 0 16 16">','<path d="M2 2h2v2H2V2Z"></path>','<path d="M6 0v6H0V0h6ZM5 1H1v4h4V1ZM4 12H2v2h2v-2Z"></path>','<path d="M6 10v6H0v-6h6Zm-5 1v4h4v-4H1Zm11-9h2v2h-2V2Z"></path>','<path d="M10 0v6h6V0h-6Zm5 1v4h-4V1h4ZM8 1V0h1v2H8v2H7V1h1Zm0 5V4h1v2H8ZM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8H6Zm0 0v1H2V8H1v1H0V7h3v1h3Zm10 1h-1V7h1v2Zm-1 0h-1v2h2v-1h-1V9Zm-4 0h2v1h-1v1h-1V9Zm2 3v-1h-1v1h-1v1H9v1h3v-2h1Zm0 0h3v1h-2v1h-1v-2Zm-4-1v1h1v-2H7v1h2Z">',"</path>",'<path d="M7 12h1v3h4v1H7v-4Zm9 2v2h-3v-1h2v-1h1Z"></path>',"</svg>"," ",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16">','<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path>','<path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path>',"</svg>","</a>"].join("")}function k(t){var a=this.field;return+t.map(function(e){return+e[a]}).reduce(function(e,l){return e+l},0)}let R=({inFindColumn:t})=>{t.formatter=P};function P(t,a,e){if(a.IsQrCodesRaised)return[`<a href="./Bill.html?OrderNumber=${a.pk}" target="_blank" class="btn btn-warning">`,'<i class="bi bi-printer-fill"></i>',"</a>"].join("")}let E=({inColumns:t})=>{let a=t,e=a.find(o=>o.field==="KS-Serial"),l=a.find(o=>o.field==="AggValues.SettlementAmount"),n=a.find(o=>o.field==="TotalItems"),r=a.find(o=>o.field==="OrderPrint");l!==void 0&&A({inFindColumn:l}),e!==void 0&&T({inFindColumn:e}),n!==void 0&&O({inFindColumn:n}),r!==void 0&&R({inFindColumn:r})},q=({inFindColumn:t})=>{t.footerFormatter=z};function z(t){this.field;var a=t.map(function(l){return+l.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(l,n){return l+n},0),e=t.map(function(l){return+l.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(l,n){return l+n},0);return`${e}/${a}`}let G=({inFindColumn:t})=>{t.footerFormatter=U};function U(t){return this.field,"₹ "+t.map(function(a){return+a.AggValues.SettlementAmount}).reduce(function(a,e){return a+e},0)}let J=({inColumns:t})=>{let a=t,e=a.find(n=>n.field==="AggValues.ItemDetails"),l=a.find(n=>n.field==="AggValues.SettlementAmount");e!==void 0&&q({inFindColumn:e}),l!==void 0&&G({inFindColumn:l})},K=({inColumns:t})=>{E({inColumns:t}),J({inColumns:t})},X=async({inRow:t})=>{var a=t.pk;let e=`/Custom/Cleaning/Branch/QrCode/V1/Filter/OrderNumber/${a}`;return await await(await fetch(e)).json()},Y=({inData:t,inQrCount:a})=>{let e=t,n=document.getElementById("TemplateForQrCodePrint").content.cloneNode("true");i({inClone:n,inHtmlClassName:"BranchClass",inTextContent:e.BookingData.OrderData.BranchName}),i({inClone:n,inHtmlClassName:"PkClass",inTextContent:e.location}),i({inClone:n,inHtmlClassName:"QrCodeClass",inTextContent:e.UuId}),i({inClone:n,inHtmlClassName:"OrderNumberClass",inTextContent:e.OrderNumber}),i({inClone:n,inHtmlClassName:"ItemNameClass",inTextContent:e.ItemName}),i({inClone:n,inHtmlClassName:"ItemSerialClass",inTextContent:e.ItemSerial}),i({inClone:n,inHtmlClassName:"AddOnDataAsStringClass",inTextContent:e.AddOnDataAsString}),i({inClone:n,inHtmlClassName:"DateTimeClass",inTextContent:new Date(e.BookingData.OrderData.Currentdateandtime).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}).split("/").join("-")}),i({inClone:n,inHtmlClassName:"OrderDateClass",inTextContent:new Date(e.DeliveryDateTime).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}).split("/").join("-")}),i({inClone:n,inHtmlClassName:"QuantityClass",inTextContent:a});let r=n.getElementById("CanvasId");return r.dataset.qrcode=`${e.pk}`,new XMLSerializer().serializeToString(n)},i=({inClone:t,inHtmlClassName:a,inTextContent:e})=>{let l=t,n=a,r=e,o=l.querySelector(`.${n}`);o.textContent=r},W=({inData:t,inRow:a})=>{let e=t,l=document.getElementById("ModalBody");l.innerHTML="",e.map((s,c)=>{let h=`${c+1}/${s.TotalQrCodes}`;const u=Y({inData:s,inQrCount:h});l.innerHTML+=u});let n=document.querySelectorAll("canvas");for(let s=0;s<n.length;s++){const c=n[s];_({inQrData:e,inCanvasId:c})}let r="ModalForQrCode";var o=new bootstrap.Modal(document.getElementById(r),{keyboard:!0,focus:!0});o.show()},_=({inQrData:t="",inCanvasId:a})=>{var e=a;e.height=150,e.width=150,e.style.visibility="hidden";let l={};l.text=e.dataset.qrcode,l.bcid="qrcode",l.scaleX=2,l.scaleY=2,l.rotate="N";try{let r=new Date;bwipjs.toCanvas(e,l),n(r,new Date)}catch(r){console.log("error : ",r);return}function n(r,o){e.style.visibility="visible"}},tt=({inQrCodeData:t,inRow:a})=>{let e=t;var l=a.pk;const r=localStorage.getItem("BranchName").replace("BranOrders","");let o=e.filter(c=>c.OrderNumber==l&&c.BookingData.OrderData.BranchName==r),s=et({inQrCodeData:o});W({inData:s,inRow:a})},et=({inQrCodeData:t})=>{let a=t.length;return t.map(l=>{let n=l.AddOnArray.map(r=>r.AddOnService);return l.AddOnDataAsString=n.join(", "),l.TotalQrCodes=a,l})},at=async({inRowData:t})=>{var a=t;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ok",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&X({inRow:a}).then(l=>{l&&tt({inQrCodeData:l,inRow:a})})})};const lt=(t,a,e)=>{e==="TotalItems"&&at({inRowData:t})},nt=$("#table"),rt=()=>{K({inColumns:d.columns}),d.onClickRow=lt,nt.bootstrapTable(d)};let ot=()=>{let a=document.getElementById("BranchNameId");const l=localStorage.getItem("BranchName").replace("BranOrders","");a!==null&&(a.innerHTML=l)};const it=()=>{ot(),rt(),b()},st=()=>{it(),v({inSuccessFunc:m})&&m().then()};st();
