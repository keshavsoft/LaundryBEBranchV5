import"./style-BQXEPnVk.js";const c="POST",d={Accept:"application/json","Content-Type":"application/json"},u={UserName:"",Password:""},n={method:c,headers:d,body:u};let m=()=>(n.body.UserName=i(),n.body.Password=parseInt(y()),n.body=JSON.stringify(n.body),n),i=()=>{let t=document.getElementById("yourUsername");if(t!==null)return t.value.trim()},y=()=>{let t=document.getElementById("yourPassword");if(t!==null)return t.value.trim()};const g="/Login/bin/Branch/UsingJwt/CreateToken",L="/Users/GenForBranch",h={PostUrl_Old_26Sep2025:g,PostUrl:L};let I=async()=>{let e=h.PostUrl,t=m();return await await fetch(e,t)},S=e=>{document.getElementById("yourUsername").addEventListener("input",l),document.getElementById("yourPassword").addEventListener("input",l);let o=document.getElementById("FormId").querySelectorAll("[required]"),a=!0;return o.forEach(r=>{if(r.value.trim().length===0){r.classList.add("is-invalid"),a=!1;return}}),a};const l=e=>{const t=e.target;t.classList.remove("is-invalid");const o=document.getElementById(`${t.id}TextId`);o&&(o.innerHTML="")},F="../../Branch/NewOrders/HtmlFiles/Customer.html",U={RedirectToUrl:F},j="BranchName",p=async e=>{let t=await e.json();v("KSToken")&&(localStorage.setItem(j,`${t.BranchName}`),window.location.href=U.RedirectToUrl)},v=e=>{const o=`; ${document.cookie}`.split(`; ${e}=`);return o.length===2?o.pop().split(";").shift():null},w=e=>{e.KReason.includes("Wrong Password")&&T(e.KReason),e.KReason.includes("Wrong Username")&&f(e.KReason)};let f=e=>{const t="yourUsername",o="usernameTextId",a=document.getElementById(t),r=document.getElementById(o);r.innerHTML=`${e}`,a.classList.add("is-invalid"),a.focus();const s=a.value.trim().length;a.setSelectionRange(0,s)},T=e=>{const t="yourPassword",o="passwordTextId",a=document.getElementById(t),r=document.getElementById(o);r.innerHTML=`${e}`,a.classList.add("is-invalid"),a.focus();const s=a.value.trim().length;a.setSelectionRange(0,s)},$=async e=>{switch(e.status){case 200:p(e);break;case 401:w(await e.json());break;default:console.error(`Unhandled status code: ${e.status}`)}},B=async e=>{if(e.preventDefault(),S()){let o=await I();$(o)}},P=()=>{let e=document.getElementById("loginButtonId");e!==null&&e.addEventListener("click",B)},E=()=>{P()};const V=()=>{k(),b()};let k=()=>{let e="KSToken";document.cookie=`${e}=; expires=Thu, 01 Jan 1947 00:00:00 UTC; path=/;`},b=()=>{localStorage.removeItem("BranchName"),localStorage.removeItem("DeliveryDateTime"),localStorage.removeItem("FactoryName"),localStorage.removeItem("PresentOrder"),localStorage.removeItem("PresentOrderAddOns")};const C=()=>{V(),E()},K=()=>{C()};K();
