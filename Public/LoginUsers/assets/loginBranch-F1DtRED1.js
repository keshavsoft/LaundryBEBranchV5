import"./style-CWPg30Uh.js";const c="POST",d={Accept:"application/json","Content-Type":"application/json"},u={UserName:"",Password:""},n={method:c,headers:d,body:u};let m=()=>(n.body.UserName=i(),n.body.Password=y(),n.body=JSON.stringify(n.body),n),i=()=>{let t=document.getElementById("yourUsername");if(t!==null)return t.value.trim()},y=()=>{let t=document.getElementById("yourPassword");if(t!==null)return t.value.trim()};const g="/Login/bin/Branch/UsingJwt/CreateToken",L={PostUrl:g};let I=async()=>{let e=L.PostUrl,t=m();return await await fetch(e,t)},h=e=>{document.getElementById("yourUsername").addEventListener("input",l),document.getElementById("yourPassword").addEventListener("input",l);let o=document.getElementById("FormId").querySelectorAll("[required]"),r=!0;return o.forEach(a=>{if(a.value.trim().length===0){a.classList.add("is-invalid"),r=!1;return}}),r};const l=e=>{const t=e.target;t.classList.remove("is-invalid");const o=document.getElementById(`${t.id}TextId`);o&&(o.innerHTML="")},S="/V1/Branch/NewOrders/HtmlFiles/Customer.html",F={RedirectToUrl:S},U="BranchName",p=()=>{const e=f("KSToken");if(e){const t=v(e);t&&(console.log(t),localStorage.setItem(U,`BranOrders${t.Branch}`),localStorage.setItem("UserName",t.UserName),localStorage.setItem("UserUuId",t.UserUuId),window.location.href=F.RedirectToUrl)}},f=e=>{const o=`; ${document.cookie}`.split(`; ${e}=`);return o.length===2?o.pop().split(";").shift():null},v=e=>{try{const[t,o,r]=e.split(".");return JSON.parse(atob(o))}catch(t){return console.error("Error decoding JWT payload:",t),null}},j=e=>{e.KReason.includes("Wrong Password")&&T(e.KReason),e.KReason.includes("Wrong Username")&&w(e.KReason)};let w=e=>{const t="yourUsername",o="usernameTextId",r=document.getElementById(t),a=document.getElementById(o);a.innerHTML=`${e}`,r.classList.add("is-invalid"),r.focus();const s=r.value.trim().length;r.setSelectionRange(0,s)},T=e=>{const t="yourPassword",o="passwordTextId",r=document.getElementById(t),a=document.getElementById(o);a.innerHTML=`${e}`,r.classList.add("is-invalid"),r.focus();const s=r.value.trim().length;r.setSelectionRange(0,s)},$=async e=>{switch(e.status){case 200:p();break;case 401:j(await e.json());break;default:console.error(`Unhandled status code: ${e.status}`)}},B=async e=>{if(e.preventDefault(),h()){let o=await I();$(o)}},E=()=>{let e=document.getElementById("loginButtonId");e!==null&&e.addEventListener("click",B)},P=()=>{E()};const V=()=>{k(),b()};let k=()=>{let e="KSToken";document.cookie=`${e}=; expires=Thu, 01 Jan 1947 00:00:00 UTC; path=/;`},b=()=>{localStorage.removeItem("BranchName"),localStorage.removeItem("DeliveryDateTime"),localStorage.removeItem("FactoryName"),localStorage.removeItem("PresentOrder"),localStorage.removeItem("PresentOrderAddOns")};const N=()=>{V(),P()},C=()=>{N()};C();
