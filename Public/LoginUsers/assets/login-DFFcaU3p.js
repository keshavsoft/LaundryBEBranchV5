import"./style-CWPg30Uh.js";const d="POST",u={Accept:"application/json","Content-Type":"application/json"},m={UserName:"",Password:""},n={method:d,headers:u,body:m};let i=()=>(n.body.UserName=y(),n.body.Password=L(),n.body=JSON.stringify(n.body),n),y=()=>{let t=document.getElementById("yourUsername");if(t!==null)return t.value.trim()},L=()=>{let t=document.getElementById("yourPassword");if(t!==null)return t.value.trim()};const h="/Login/bin/CreateToken/UsingJwt",g={PostUrl:h};let F=async()=>{let e=g.PostUrl,t=i();return await await fetch(e,t)},w=e=>{document.getElementById("yourUsername").addEventListener("input",l),document.getElementById("yourPassword").addEventListener("input",l);let r=document.getElementById("FormId").querySelectorAll("[required]"),a=!0;return r.forEach(o=>{if(o.value.trim().length===0){o.classList.add("is-invalid"),a=!1;return}}),a};const l=e=>{const t=e.target;t.classList.remove("is-invalid");const r=document.getElementById(`${t.id}TextId`);r&&(r.innerHTML="")},I="/Laundry/Branch/NewOrders/HtmlFiles/Customer.html",c={RedirectToUrl:I};let U=()=>{let e=f({inGetKey:"InKey"}),t=j();switch(e){case"Branch":localStorage.setItem("BranchName",t),window.location.href=c.RedirectToUrl;break;case"Factory":localStorage.setItem("FactoryName",t),window.location.href="/Laundry/Factory/Inward/FromBranch/FromBranchVoucher/FactoryMenu.html";break;case"WashFactory":localStorage.setItem("FactoryName",t),window.location.href="/Laundry/Factory/Process/WashingVoucher/menu.html";break;default:localStorage.setItem("BranchName",t),window.location.href=c.RedirectToUrl;break}},j=()=>{let t=document.getElementById("yourUsername");if(t!==null)return t.value.trim()},f=({inGetKey:e})=>{const t=window.location.search;return new URLSearchParams(t).get(e)};const S=e=>{e.KReason.includes("Wrong Password")&&T(e.KReason),e.KReason.includes("Wrong Username")&&V(e.KReason)};let V=e=>{const t="yourUsername",r="usernameTextId",a=document.getElementById(t),o=document.getElementById(r);o.innerHTML=`${e}`,a.classList.add("is-invalid"),a.focus();const s=a.value.trim().length;a.setSelectionRange(0,s)},T=e=>{const t="yourPassword",r="passwordTextId",a=document.getElementById(t),o=document.getElementById(r);o.innerHTML=`${e}`,a.classList.add("is-invalid"),a.focus();const s=a.value.trim().length;a.setSelectionRange(0,s)},B=async e=>{switch(e.status){case 200:U();break;case 401:S(await e.json());break;default:console.error(`Unhandled status code: ${e.status}`)}},v=async e=>{if(e.preventDefault(),w()){let r=await F();B(r)}},E=()=>{let e=document.getElementById("loginButtonId");e!==null&&e.addEventListener("click",v)},p=()=>{E()};const P=()=>{$(),p()};let $=()=>{let e="KSToken";document.cookie=`${e}=; expires=Thu, 01 Jan 1947 00:00:00 UTC; path=/;`};const b=()=>{P()};b();
