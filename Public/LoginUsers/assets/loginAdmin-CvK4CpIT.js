import"./style-CWPg30Uh.js";const c="POST",d={Accept:"application/json","Content-Type":"application/json"},u={UserName:"",Password:""},n={method:c,headers:d,body:u};let i=()=>(n.body.UserName=m(),n.body.Password=y(),n.body=JSON.stringify(n.body),n),m=()=>{let t=document.getElementById("yourUsername");if(t!==null)return t.value.trim()},y=()=>{let t=document.getElementById("yourPassword");if(t!==null)return t.value.trim()};const g="/Login/LoginAdmin/Admin/UsingJwt/CreateToken",L={PostUrl:g};let I=async()=>{let e=L.PostUrl,t=i();return await await fetch(e,t)},S=e=>{document.getElementById("yourUsername").addEventListener("input",l),document.getElementById("yourPassword").addEventListener("input",l);let o=document.getElementById("FormId").querySelectorAll("[required]"),r=!0;return o.forEach(a=>{if(a.value.trim().length===0){a.classList.add("is-invalid"),r=!1;return}}),r};const l=e=>{const t=e.target;t.classList.remove("is-invalid");const o=document.getElementById(`${t.id}TextId`);o&&(o.innerHTML="")},F="/Laundry/Admin/Menu/HtmlFiles/index.html",U={RedirectToUrl:F},h=()=>{const e=p("KSAToken");if(e){const t=f(e);t&&(console.log(t),localStorage.setItem("UserName",t.UserName),localStorage.setItem("UserUuId",t.UserUuId),window.location.href=U.RedirectToUrl)}},p=e=>{const o=`; ${document.cookie}`.split(`; ${e}=`);return o.length===2?o.pop().split(";").shift():null},f=e=>{try{const[t,o,r]=e.split(".");return JSON.parse(atob(o))}catch(t){return console.error("Error decoding JWT payload:",t),null}},v=e=>{e.KReason.includes("Wrong Password")&&T(e.KReason),e.KReason.includes("Wrong Username")&&j(e.KReason)};let j=e=>{const t="yourUsername",o="usernameTextId",r=document.getElementById(t),a=document.getElementById(o);a.innerHTML=`${e}`,r.classList.add("is-invalid"),r.focus();const s=r.value.trim().length;r.setSelectionRange(0,s)},T=e=>{const t="yourPassword",o="passwordTextId",r=document.getElementById(t),a=document.getElementById(o);a.innerHTML=`${e}`,r.classList.add("is-invalid"),r.focus();const s=r.value.trim().length;r.setSelectionRange(0,s)},w=async e=>{switch(e.status){case 200:h();break;case 401:v(await e.json());break;default:console.error(`Unhandled status code: ${e.status}`)}},$=async e=>{if(e.preventDefault(),S()){let o=await I();w(o)}},E=()=>{let e=document.getElementById("loginButtonId");e!==null&&e.addEventListener("click",$)},P=()=>{E()};const V=()=>{k(),B()};let k=()=>{let e="KSAToken";document.cookie=`${e}=; expires=Thu, 01 Jan 1947 00:00:00 UTC; path=/;`},B=()=>{localStorage.removeItem("BranchName"),localStorage.removeItem("DeliveryDateTime"),localStorage.removeItem("FactoryName"),localStorage.removeItem("PresentOrder"),localStorage.removeItem("PresentOrderAddOns")};const b=()=>{V(),P()},A=()=>{b()};A();
