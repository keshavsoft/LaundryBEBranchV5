var b=Object.defineProperty,y=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var p=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var i=(e,t,a)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,L=(e,t)=>{for(var a in t||(t={}))p.call(t,a)&&i(e,a,t[a]);if(I)for(var a of I(t))O.call(t,a)&&i(e,a,t[a]);return e},j=(e,t)=>y(e,T(t));import{S as v}from"./EntryFile-D68kwv0T.js";let N=()=>{h()},h=()=>{const e=new URL(window.location.href),t=new URL("./Customer.html",e);let a=B(),l=A();t.searchParams.append("CustomerMobile",a),t.searchParams.append("CustomerName",l),window.location.href=t.href},B=()=>{let t=document.getElementById("CustomerMobileId");if(t!==null)return t.value.trim()},A=()=>{let t=document.getElementById("CustomerNameId");if(t!==null)return t.value.trim()},E=()=>{let e=document.getElementById("BranchNameAnchorId");e!==null&&e.addEventListener("click",N)};const C=()=>{var e=$("#table").bootstrapTable("getData");return e.length===0?(window.alert("Please Add Items"),!1):!0};let D=()=>{C()&&H()},H=()=>{const e=new URL(window.location.href),t=new URL("./Settlement.html",e);let a=R();t.searchParams.append("OrderNumber",a),window.location.href=t.href},R=()=>{let t=document.getElementById("OrderNumberId");if(t!==null)return t.innerHTML.trim()},w=()=>{let e=document.getElementById("CheckOutButtonId");e!==null&&e.addEventListener("click",D)},M=()=>{E(),w()};const K="binV4",P="Transactions",J="Kakinada",k={OrderKey:"PresentOrder",ItemNamesKey:"ItemNames",AddOnsKey:"AddOns"},c={routePath:K,folderName:P,tableName:J,localStorageKeys:k};let U=async()=>{let e=localStorage.getItem("BranchName"),t=c.localStorageKeys.OrderKey,a=`/Custom/Cleaning/Branch/Order/NewOrder/MaxRow/${e}`,r=await(await fetch(a)).json();localStorage.setItem(t,JSON.stringify(r))},g=async()=>{await U()},x=e=>{W(e.ItemName),Y(e.ItemSerial),q(e.Rate)},W=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},Y=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},q=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const _=({inRow:e})=>{let t=z({inItemSerial:e.ItemSerial});var a=$("#AddOnTable");a.bootstrapTable("load",t),x(e),$("#AddOnModal").modal("show")};let z=({inItemSerial:e})=>{let t=c.localStorageKeys.OrderKey,a=localStorage.getItem(t),l=JSON.parse(a),r=e;return Object.keys(l.AddOnData).map(o=>j(L({},l.AddOnData[o]),{AddOnPK:o})).filter(o=>o.AddOnItemSerial===r)};const G=async({inRowpk:e,inItemSerial:t})=>{let a=localStorage.getItem("BranchName");Q();let l=`/bin/Transactions/${a}/FromKey/${e}/ItemsInOrder/${t}`;return await fetch(l,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}})};let Q=()=>{let t=document.getElementById("OrderNumberId");if(t!==null)return t.innerHTML.trim()};const X=async({inResponce:e})=>{e.status===200&&(window.location.href="")},Z=async({inItemSerial:e})=>{let t=ee(),a=await G({inRowpk:t,inItemSerial:e});X({inResponce:a})},ee=()=>{let e=c.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},te=(e,t,a)=>{a===3&&_({inRow:e}),a===9&&Z({inItemSerial:e.ItemSerial})};let ae=()=>!(le()===!1||re()===!1||oe()===!1||ne()===!1||ce()===!1||de()===!1||me()===!1);const le=()=>{let e=document.getElementById("TableFooterItemNameId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},re=()=>{let e=document.getElementById("TableFooterPcsInputId");return e.value===""||e.value<=0?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},oe=()=>{let e=document.getElementById("exampleFormControlInput1");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ne=()=>{let e=document.getElementById("TableFooterFactoryInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ce=()=>{let e=document.getElementById("TableFooterCategoryId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},de=()=>{let e=document.getElementById("TableFooterdateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},me=()=>{let e=document.getElementById("TableFooterRateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ue="POST",se={Accept:"application/json","Content-Type":"application/json"},Ie="",F={method:ue,headers:se,body:Ie},ie=()=>{let e=Le(),t=je(),a=Fe(),l=Se(),r=ge(),n=Ve(),d=fe(),o={};return o.Category=e,o.ItemName=t,o.Rate=a,o.Pcs=l,o.Total=r,o.location=n,o.DeliveryDateTime=d,o};let Le=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},je=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},Fe=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},Se=()=>{let t=document.getElementById("TableFooterPcsInputId");if(t!==null)return t.value.trim()},Ve=()=>{let t=document.getElementById("TableFooterFactoryInputId");if(t!==null)return t.value.trim()},fe=()=>{let t=document.getElementById("TableFooterdateInputId");if(t!==null)return t.value.trim()},ge=()=>{let t=document.getElementById("TableFooterRateInputId"),l=document.getElementById("TableFooterPcsInputId");return console.log("Total:",t.value*l.value),t.value*l.value},be=()=>(F.body=JSON.stringify(ie()),F),ye=async()=>{let e=localStorage.getItem("BranchName"),t=parseInt(document.getElementById("OrderNumberId").innerHTML),a=be(),l=`/${c.routePath}/${e}/SubTable/Create/${t}/ItemsInOrder`;return await await fetch(l,a)},Te=()=>{window.location.href=""},pe=async()=>{(await ye()).status===200&&Te()};const Oe=()=>{ae()&&pe()};let ve=()=>{let e=document.getElementById("TableFooterSaveButtonId");e!==null&&e.addEventListener("click",Oe)},Ne=()=>{let e=c.localStorageKeys.ItemNamesKey,t=localStorage.getItem(e);return JSON.parse(t)};const $e=({inCategorySelected:e})=>{let a=document.getElementById("ItemsDataListId"),l=e,d=Ne().filter(m=>m.Category===l).sort((m,s)=>m.ItemName==s.ItemName?0:m.ItemName>s.ItemName?1:-1);for(var o="",u=0;u<d.length;u++)o+=`<option value="${d[u].ItemName}">${d[u].ItemName}</option>`;a.innerHTML=o},he=e=>{let a=e.currentTarget.value;$e({inCategorySelected:a})};let Be=()=>{let e=document.getElementById("TableFooterCategoryId");e!==null&&e.addEventListener("change",he)},Ae=({inItemName:e})=>{let t=c.localStorageKeys.ItemNamesKey,a=localStorage.getItem(t);return JSON.parse(a).find(n=>n.ItemName===e)};const Ee=e=>{let a=e.currentTarget.value,l=Ae({inItemName:a});Ce(l.DryWashRate)};let Ce=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},De=()=>{let e=document.getElementById("TableFooterItemNameId");e!==null&&e.addEventListener("change",Ee)};const S=(e,t,a)=>{He(e.ItemName),Re(e.Category),we(e.DryWashRate),jFLocalToInputTableFooterPicsInputId(e.pcs),$("#ItemsOnModal").modal("hide"),document.getElementById("TableFooterSaveButtonId").click()};let He=e=>{let a=document.getElementById("TableFooterItemNameId");a!==null&&(a.value=e)},Re=e=>{let a=document.getElementById("TableFooterCategoryId");a!==null&&(a.value=e)},we=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)};const Me=e=>{let t="ItemsOnModal";var a=$(document.getElementById(t).querySelector("table"));e?(a.bootstrapTable({data:Pe(e),onClickRow:S}),document.getElementById("SearchString").innerHTML=`Search Results for - ${e}`):(a.bootstrapTable({data:Ke(),onClickRow:S}),document.getElementById("SearchString").innerHTML="All Items"),$(`#${t}`).modal("show")},Ke=()=>{let e=localStorage.getItem("ItemNames");return JSON.parse(e)},Pe=e=>{let t=localStorage.getItem("ItemNames");return JSON.parse(t).filter(l=>l.ItemName.toLowerCase().includes(e.toLowerCase()))},Je=()=>{let e=document.getElementById("TableFooterItemNameId").value;Me(e)};let ke=()=>{let e=document.getElementById("TableFooterItemNameSearchButtonId");e!==null&&e.addEventListener("click",Je)},Ue=()=>{ve(),Be(),De(),ke(),xe()},xe=()=>{var e=new Event("change");document.getElementById("TableFooterCategoryId").dispatchEvent(e)};const We=()=>{var e=$("#table");e.bootstrapTable({data:[],onPostBody:function(){Ue(),Ye(),$("#TableFooterItemNameId").focus()},onClickRow:te})},Ye=()=>{var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear(),r=l+"-"+a+"-"+t;e.setDate(e.getDate()+7);var n=String(e.getDate()).padStart(2,"0"),d=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear(),u=o+"-"+d+"-"+n,m=document.getElementById("TableFooterdateInputId");m.value=u,m.setAttribute("min",r)},qe=()=>{let e=ze(),t=_e({inlocalAddOnService:e}),a=Ge(),l={};return l.AddOnService=e,l.AddOnRate=parseInt(t),l.AddOnItemSerial=parseInt(a),l};let _e=({inlocalAddOnService:e})=>{let t=e,l=JSON.parse(localStorage.getItem("AddOns")).filter(r=>r.AddOnService===`${t}`);return l.length>0?l[0].AddOnRate:0},ze=()=>{let t=document.getElementById("TableFooterAddOnSelectId");if(t!==null)return t.value.trim()},Ge=()=>{let t=document.getElementById("AddOnModalItemSerialId");if(t!==null)return t.value.trim()},Qe=({PrepareBody:e})=>{var t=$("#AddOnTable"),a=t.bootstrapTable("getData");if(a.find(r=>r.AddOnService===e.AddOnService)!==void 0){let r=document.getElementById("TableFooterAddOnSelectId");return r.classList.add("is-invalid"),r.focus(),!1}return!0};const Xe="POST",Ze={Accept:"application/json","Content-Type":"application/json"},et="",V={method:Xe,headers:Ze,body:et};let tt=({PrepareBody:e})=>(V.body=JSON.stringify(e),V),at=async({PrepareBody:e})=>{let t=tt({PrepareBody:e}),a=localStorage.getItem("BranchName"),l=document.getElementById("OrderNumberId").innerHTML,r=`/${c.routePath}/${a}/SubTable/Create/${l}/AddOnData`;return await await fetch(r,t)},lt=async()=>{await g();let e=dt(),t=parseInt(ct()),a=Object.values(e.AddOnData).filter(l=>l.AddOnItemSerial===t);ot({inAddOnData:a}),nt({inItemsData:e}),rt()},rt=()=>{let t=document.getElementById("TableFooterAddOnSelectId");t.classList.remove("is-invalid"),t.focus()},ot=({inAddOnData:e})=>{let t=e;console.log("LocalAddOnData : ",t);var a=$("#AddOnTable");a.bootstrapTable("load",t)},nt=({inItemsData:e})=>{let t=e;var a=$("#table");a.bootstrapTable("load",t)},ct=()=>{let t=document.getElementById("AddOnModalItemSerialId");if(t!==null)return t.value.trim()},dt=()=>{document.getElementById("AddOnModalItemSerialId");let e=localStorage.getItem("PresentOrder");return JSON.parse(e)},mt=async()=>{let e=qe();Qe({PrepareBody:e})&&(await at({PrepareBody:e})).status===200&&lt()};const ut=()=>{mt()};let st=()=>{let e=document.getElementById("AddOnModalSaveButtonId");e!==null&&e.addEventListener("click",ut)},It=()=>{st()};const it=async e=>{let t=localStorage.getItem("BranchName"),a=Lt(),l=`/${c.routePath}/Transactions/${t}/FromKey/${a}/AddOnData/${e.AddOnPK}`;return await fetch(l,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}})};let Lt=()=>{let t=document.getElementById("OrderNumberId");if(t!==null)return t.innerHTML.trim()};const jt=async({inResponce:e})=>{e.status===200&&(window.location.href="")},Ft=async(e,t,a)=>{if(a===3){let l=await it(e);jt({inResponce:l})}},St=()=>{var e=$("#AddOnTable");e.bootstrapTable({data:[],onPostBody:It,onClickRow:Ft})},Vt=()=>{We(),St()};let ft=()=>{let t=document.getElementById("BranchNameId"),a=localStorage.getItem("BranchName");t!==null&&(t.innerHTML=a)};const gt=async()=>{ft(),Vt(),await g(),M()},bt=()=>{let e=c.localStorageKeys.OrderKey,t=localStorage.getItem(e),a=JSON.parse(t);return Object.values(a.ItemsInOrder)},yt=()=>{let e=bt();var t=$("#table");t.bootstrapTable("load",e)},Tt=()=>{let e=c.localStorageKeys.AddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},pt=()=>{let e=document.getElementById("TableFooterAddOnSelectId"),t=Tt();for(var a=0;a<t.length;a++){let l=document.createElement("option");l.value=t[a].AddOnService,l.innerHTML=t[a].AddOnService,e.appendChild(l)}},Ot=()=>{pt()},vt=()=>{let e=c.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t)},Nt=()=>{let e=vt();At(e.CustomerData.CustomerMobile),Bt(e.CustomerData.CustomerName),ht(e.pk),$t(localStorage.getItem("BranchName"))};let $t=e=>{let a=document.getElementById("BranchNameAnchorId");a!==null&&(a.innerHTML=e)},ht=e=>{let a=document.getElementById("OrderNumberId");a!==null&&(a.innerHTML=e)},Bt=e=>{let a=document.getElementById("CustomerNameId");a!==null&&(a.value=e)},At=e=>{let a=document.getElementById("CustomerMobileId");a!==null&&(a.value=e)};const f=()=>{yt(),Ot(),Nt()},Et=async()=>{await gt(),v({inSuccessFunc:f})&&f()};Et().then();
