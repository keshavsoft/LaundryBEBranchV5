import{C as h}from"./Config-3hNwyP2N.js";import{S as N}from"./EntryFile-D68kwv0T.js";const D=()=>{let t=localStorage.getItem("CustomerNames");if(t===null){document.getElementById("MasterButtonId").click();return}let e=JSON.parse(t),l=document.getElementById("CustomersDataListId");e.forEach(a=>{let o=document.createElement("option");o.value=`${a.CustomerName}:${a.Mobile}`,o.innerHTML=`${a.CustomerName}:${a.Mobile}`,l.appendChild(o)})},B="binV4",R="Masters",k="CustomerNames",E="Custom/Cleaning/Branch/Order/NewOrderV1/TodayCustomerFilter",P={OrderKey:"CustomerNames",ItemNamesKey:"ItemNames",AddOnsKey:"AddOns"},x={NewOrderButtonId:{PostFetch1:"/Custom/Cleaning/Branch/Order/NewOrderV1/InSertOrder",PostFetch2:"/Custom/Cleaning/Branch/Order/NewOrderV1",PostFetch_good_8Sep2025:"/Custom/Cleaning/Branch/Order/NewOrderV2",PostFetch:"/BranOrdersKKD/AddWithDefault/InsertFromBody",RedirectUrl:{"500Status":"/Laundry/Branch/NewOrders/HtmlFiles/AddItemsWBtns.html","200Status":"AddItemsWBtns.html"}},AddItemsButtonId:{PostFetch:"/Custom/Cleaning/Branch/Order/NewOrder",RedirectUrl:{"500Status":"/Laundry/Branch/NewOrders/HtmlFiles/AddItemsWBtns.html","200Status":"AddItemsTotalRight.html"}}},F={routePath:B,folderName:R,tableName:k,TodayUrl:E,localStorageKeys:P,Urls:x};let M=async()=>{let t=F.TodayUrl,e=localStorage.getItem("BranchName"),o=document.getElementById("CustomerNameInputId").value.replace(/\D/g,""),n=`/${t}/${e}/${o}`;return await await fetch(n)},H=t=>{let a=K({inData:t}).sort((i,d)=>i.pk===d.pk?0:i.pk<d.pk?1:-1);console.log("jVarLocalOrdered:",a);var o=$("#table"),n=$("#YesterdayTableId"),c=$("#ThisWeekTableId"),s=$("#AllTableId");o.bootstrapTable("load",a),n.bootstrapTable("load",[]),c.bootstrapTable("load",[]),s.bootstrapTable("load",[])},K=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(n=>n.Pcs).reduce((n,c)=>n+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let o=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(n=>(n.AddOnDataAsArray=o.filter(c=>c.AddOnItemSerial===n.ItemSerial),n)),a}),l},J=t=>{var e=$("#table"),l=$("#YesterdayTableId"),a=$("#ThisWeekTableId"),o=$("#AllTableId");e.bootstrapTable("load",[]),l.bootstrapTable("load",[]),a.bootstrapTable("load",[]),o.bootstrapTable("load",[])},U=async t=>{let e=t;e.status===200&&H(await e.json()),e.status===500&&J(await e.json())},W=async()=>{let t=await M();U(t)};const L=()=>{W()};let z=()=>{document.getElementById("CustomerNameInputId").addEventListener("keypress",l=>{l.key==="Enter"&&L()})},G=async()=>{let t=document.getElementById("CustomerNameInputId");if(t.value==="")return t.classList.add("is-invalid"),!1;let e=await Y();return console.log("LocalFech:",e),e===!1?(t.classList.add("is-invalid"),!1):!0};const Y=async()=>{let e=document.getElementById("CustomerNameInputId").value.split(":")[1],l=`/${F.routePath}/MastersCustomers/Show/Filter/Mobile/${e}`;return(await fetch(l)).status!==500},X="POST",q={Accept:"application/json","Content-Type":"application/json"},_={},u={method:X,headers:q,body:_};let Q=()=>{let t=Z();console.log("aaaaaaaaa : ",t);let e=t.split(":")[1],l=localStorage.getItem("UserName");return u.body.Key="CustomerData",u.body.Value={},u.body.Value.Mobile=e,u.body.Value.UserName=l,u.body.Value.CustomerName=t.split(":")[0],u.body.Value.DOB="",u.body.Value.GSTNumber="",u.body.Value.City="",u.body.Value.Occupation="",u.body=JSON.stringify(u.body),u},Z=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},tt=async()=>{let t=Q(),e=localStorage.getItem("BranchName"),l=`/${h.routePath}/${e}/AddWithDefault/InsertFromBody`;return await await fetch(l,t)},et=()=>{window.location=F.Urls.NewOrderButtonId.RedirectUrl["200Status"]},at=({inresponse:t})=>{Swal.fire({title:"Error Alert",text:`${t}`,icon:"error",confirmButtonColor:"#3085d6",showDenyButton:!0,denyButtonText:"Add ItemsV1",denyButtonColor:"#008000"}).then(e=>{(e.isConfirmed||e.isDismissed)&&(window.location.href=""),e.isDenied&&(window.location.href=F.Urls.NewOrderButtonId.RedirectUrl["500Status"])})},lt=async()=>{let t=await tt();t.status===200&&et(),t.status===500&&at({inresponse:await t.text()})};const ot=async()=>{await G()&&lt()};let nt=()=>{document.getElementById("NewOrderButtonId").addEventListener("click",ot)},rt=()=>{document.getElementById("CustomerNameSearchButtonId").addEventListener("click",L)},ct=async()=>{let t=h.routePath,e=F.localStorageKeys.OrderKey,l=`/${t}/MastersCustomers/Read/AsIs`,o=await(await fetch(l)).json();console.log(o);let n=o.sort((c,s)=>c.CustomerName-s.CustomerName);o.sort(function(c,s){var i=s.CustomerName.toLowerCase(),d=c.CustomerName.toLowerCase();return d<i?-1:d>i?1:0}),localStorage.setItem(e,JSON.stringify(n))},it=async()=>{let t=h.routePath,e=F.localStorageKeys.ItemNamesKey,l=`/${t}/MastersItems/Read/AsIs`,o=await(await fetch(l)).json();localStorage.setItem(e,JSON.stringify(o))},st=async()=>{let t=h.routePath,e=F.localStorageKeys.AddOnsKey,l=`/${t}/MastersAddOns/Read/AsIs`,o=await(await fetch(l)).json();localStorage.setItem(e,JSON.stringify(o))},dt=()=>{ct().then(()=>{ut()}),it().then(),st().then()};const ut=()=>{let t=localStorage.getItem("CustomerNames");if(t!==null){let e=JSON.parse(t),l=document.getElementById("CustomersDataListId");l.innerHTML="",e.forEach(a=>{let o=document.createElement("option");o.value=`${a.CustomerName}:${a.Mobile}`,o.innerHTML=`${a.CustomerName}:${a.Mobile}`,l.appendChild(o)})}};let mt=()=>{document.getElementById("MasterButtonId").addEventListener("click",()=>{dt()})},ft=()=>{let t=localStorage.getItem("BranchName");if(t===null){localStorage.setItem("BranchName","BranOrdersKKD");return}const e=t.replace("BranOrders","");let l=document.getElementById("BranchButtonId");l.innerText=e,l.addEventListener("click",function(){window.location.href="/LoginUsers/HtmlFiles/loginBranch.html"})};const Ft="binV4",Lt="MastersCustomers",$t="Custom/Cleaning/Branch/Order/NewOrderV1/YesterdayCustomerFilter",pt={routePath:Ft,tableName:Lt,url:$t};let It=async()=>{let t=pt.url,e=localStorage.getItem("BranchName");const a=St().split(":")[1].trim();let o=`/${t}/${e}/${a}`;return await await fetch(o)},St=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},jt=({inData:t})=>{let a=Vt({inData:t}).sort((n,c)=>n.pk===c.pk?0:n.pk<c.pk?1:-1);var o=$("#YesterdayTableId");o.bootstrapTable("load",a)},Vt=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(n=>n.Pcs).reduce((n,c)=>n+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let o=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(n=>(n.AddOnDataAsArray=o.filter(c=>c.AddOnItemSerial===n.ItemSerial),n)),a}),l},Ct=async()=>{let t=await It();t.status===200&&jt({inData:await t.json()})},bt=()=>{document.getElementById("YesterdayRefreshButtonId").addEventListener("click",Ct)};const gt="binV4",ht="MastersCustomers",Ot="Custom/Cleaning/Branch/Order/NewOrderV1/WeekCustomerFilter",At={routePath:gt,tableName:ht,url:Ot};let Tt=async()=>{let t=At.url,e=localStorage.getItem("BranchName");const a=yt().split(":")[1].trim();let o=`/${t}/${e}/${a}`;return await await fetch(o)},yt=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},Dt=({inData:t})=>{let a=wt({inData:t}).sort((n,c)=>n.pk===c.pk?0:n.pk<c.pk?1:-1);var o=$("#ThisWeekTableId");o.bootstrapTable("load",a)},wt=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(n=>n.Pcs).reduce((n,c)=>n+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let o=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(n=>(n.AddOnDataAsArray=o.filter(c=>c.AddOnItemSerial===n.ItemSerial),n)),a}),l},vt=async()=>{let t=await Tt();t.status===200&&Dt({inData:await t.json()})},Nt=()=>{document.getElementById("ThisWeekRefreshButtonId").addEventListener("click",vt)};const Bt="binV4",Rt="MastersCustomers",kt="Custom/Cleaning/Branch/Order/NewOrderV1/AllCustomerFilter",Et={routePath:Bt,tableName:Rt,url:kt};let Pt=async()=>{let t=Et.url,e=localStorage.getItem("BranchName");const a=xt().split(":")[1].trim();let o=`/${t}/${e}/${a}`;return await await fetch(o)},xt=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},Mt=({inData:t})=>{let a=Ht({inData:t}).sort((n,c)=>n.pk===c.pk?0:n.pk<c.pk?1:-1);var o=$("#AllTableId");o.bootstrapTable("load",a)},Ht=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(n=>n.Pcs).reduce((n,c)=>n+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let o=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(n=>(n.AddOnDataAsArray=o.filter(c=>c.AddOnItemSerial===n.ItemSerial),n)),a}),l},Kt=async()=>{let t=await Pt();t.status===200&&Mt({inData:await t.json()})},Jt=()=>{document.getElementById("AllRefreshButtonId").addEventListener("click",Kt)},Ut=()=>{bt(),Nt(),Jt()};const Wt="/Custom/Cleaning/Masters/V2/Customers/Filter/Mobile/{MobileNumber}",zt={GetEndPoint:Wt};let Gt=async()=>{let t=zt.GetEndPoint;const l=Yt().split(":")[1].trim(),a=t.replace("{MobileNumber}",l);return await await fetch(a)},Yt=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},Xt=({inData:t})=>{qt({inValue:t.pk}),_t({inValue:t.CustomerName}),Qt({inValue:t.Mobile}),Zt({inValue:t.DOB}),ee({inValue:t.City}),ae({inValue:t.Occupation}),le({inValue:t.CompanyName}),te({inValue:t.GSTNumber})},qt=({inValue:t})=>{let l=document.getElementById("pkId");l!==null&&(l.value=t)},_t=({inValue:t})=>{let l=document.getElementById("CustomerName");l!==null&&(l.value=t)},Qt=({inValue:t})=>{let l=document.getElementById("CustomerMobileNumber");l!==null&&(l.value=t)},Zt=({inValue:t})=>{let l=document.getElementById("dob");l!==null&&(l.value=t)},te=({inValue:t})=>{let l=document.getElementById("CustomerGST");l!==null&&(l.value=t)},ee=({inValue:t})=>{let l=document.getElementById("CustomerLocation");l!==null&&(l.value=t)},ae=({inValue:t})=>{let l=document.getElementById("CustomerOccupation");l!==null&&(l.value=t)},le=({inValue:t})=>{let l=document.getElementById("CustomerCompany");l!==null&&(l.value=t)},oe=({inData:t})=>{Xt({inData:t})},ne=({inResponse:t})=>{Swal.fire({text:`${t}`,icon:"error",title:"check"})},re=async({inResponse:t})=>{let e=await t;if(e.status===200){let l=await e.json();oe({inData:l[0]})}if(e.status===500){let l=await e.text();ne({inResponse:l})}};const ce=async()=>{let t=await Gt();re({inResponse:t})};let ie=()=>{document.getElementById("CustomerAlter").addEventListener("click",ce)},se=()=>{ie()};const de="PUT",ue={Accept:"application/json","Content-Type":"application/json"},me="",w={method:de,headers:ue,body:me};let fe=()=>{let t=document.getElementById("FormId");return w.body=JSON.stringify(Fe(t)),w};function Fe(t){var e=new FormData(t),l={};for(var[a,o]of e)l[a]?(Array.isArray(l[a])||(l[a]=[l[a]]),l[a].push(o)):l[a]=o;return l}const Le="/Custom/Cleaning/Masters/V1/Customers",$e="MastersCustomers",pe={url:Le,tableName:$e};let Ie=async()=>{let t=pe.url,e=Se(),l=fe(),a=`${t}/${e}`;return await await fetch(a,l)},Se=()=>{let e=document.getElementById("pkId");if(e!==null)return e.value.trim()},je=()=>{let e=document.getElementById("FormId").querySelectorAll("[required]"),l=!0;return e.forEach(a=>{if(a.value.trim().length===0){a.classList.add("is-invalid"),l=!1;return}if(a.value.trim().length>0&&a.classList.remove("is-invalid"),a.name==="Mobile"&&a.value.trim().length!==10){document.getElementById("MobileClass").innerHTML="must be 10",a.classList.add("is-invalid"),a.focus(),l=!1;return}if(a.name==="AddOnRate"&&!(a.value.trim().length<4)){l=!1;return}}),l},Ve=({inFetchData:t})=>{$("#editCustomerModal").modal("hide")},Ce=async()=>{if(je()){let e=await Ie();Ve({inResponse:e})}},be=()=>{let t=document.getElementById("ModelAlter");t!==null&&t.addEventListener("click",Ce)},ge=()=>{be()},he=()=>{z(),nt(),rt(),mt(),ft(),Ut(),se(),ge()};const Oe=()=>{let t=v({inGetKey:"CustomerMobile"}),e=v({inGetKey:"CustomerName"});if(t!==null&&e!==null){let l=`${e}:${t}`;Ae(l)}};let Ae=t=>{let l=document.getElementById("CustomerNameInputId");l!==null&&(l.value=t)},v=({inGetKey:t})=>{const e=window.location.search;return new URLSearchParams(e).get(t)};const Te="#toolbar",ye="pk",De="true",we=[],ve="",Ne="",Be=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],O={toolbar:Te,idfield:ye,showFooter:De,data:we,onClickRow:ve,icons:Ne,columns:Be};let Re=({inFindColumn:t})=>{t.formatter=ke},ke=(t,e,l)=>l+1,Ee=({inFindColumn:t})=>{t.footerFormatter=Pe};function Pe(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let xe=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="AddOnRate");l!==void 0&&Re({inFindColumn:l}),a!==void 0&&Ee({inFindColumn:a})},Me=(t,e,l)=>{let a=e.AddOnArray,n=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");O.data=a,xe({inColumns:O.columns}),i.bootstrapTable(O)};const He="#toolbar",Ke="pk",Je="true",Ue=[],We=!0,ze="",Ge="",Ye="",Xe=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],V={toolbar:He,idfield:Ke,showFooter:Je,data:Ue,detailView:We,onClickRow:ze,onExpandRow:Ge,icons:Ye,columns:Xe};let qe=({inFindColumn:t})=>{t.formatter=_e},_e=(t,e,l)=>l+1,Qe=({inFindColumn:t})=>{t.footerFormatter=Ze};function Ze(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let ta=({inFindColumn:t})=>{t.footerFormatter=ea};function ea(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let aa=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="Rate"),o=e.find(n=>n.field==="Pcs");l!==void 0&&qe({inFindColumn:l}),a!==void 0&&Qe({inFindColumn:a}),o!==void 0&&ta({inFindColumn:o})},la=(t,e,l)=>{let a=e.AggValues.ItemsArray,n=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");V.data=a,V.onExpandRow=Me,aa({inColumns:V.columns}),i.bootstrapTable(V)};const oa="bi-plus-circle fs-4",na="bi-dash-circle fs-4",ra={detailOpen:oa,detailClose:na},ca="#toolbar",ia="pk",sa="true",da=[],ua=!0,ma="",fa="",Fa="",La=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],p={toolbar:ca,idfield:ia,showFooter:sa,data:da,detailView:ua,onClickRow:ma,onExpandRow:fa,icons:Fa,columns:La};let $a=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):L()};const pa=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return $a({inFromFetch:c}),c};let Ia=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&pa({inRowData:t}).then(l=>{})})};const Sa=(t,e,l)=>{l==="Opts"&&(t.IsSettled||Ia({inRowData:t}))};let ja=({inFindColumn:t})=>{t.formatter=Va},Va=(t,e,l)=>l+1,Ca=({inFindColumn:t})=>{t.footerFormatter=ga,t.formatter=ba};const ba=(t,e,l)=>t===""?"":`₹ ${t}`;function ga(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let ha=({inFindColumn:t})=>{t.footerFormatter=Oa};function Oa(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,o){return a+o},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,o){return a+o},0);return`${l}/${e}`}const Aa=({inFindColumn:t})=>{t.formatter=Ta},Ta=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((o,n)=>o+n.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let ya=({inFindColumn:t})=>{t.formatter=Da};function Da(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let wa=({inFindColumn:t})=>{t.formatter=va,t.footerFormatter=Na};function va(t,e,l){let a=localStorage.getItem("PresentOrder"),o=JSON.parse(a),n=e.ItemSerial,c=Object.values(o.AddOnData).filter(s=>s.AddOnItemSerial===n);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function Na(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let Ba=({inFindColumn:t})=>{t.formatter=Ra};const Ra=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),o=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+o+" min..."};let ka=({inFindColumn:t})=>{t.footerFormatter=Ea};function Ea(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Pa=({inFindColumn:t})=>{t.formatter=xa},xa=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),Ma=({inFindColumn:t})=>{t.formatter=Ha},Ha=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),Ka=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="AggValues.SettlementAmount"),o=e.find(r=>r.field==="AggValues.ItemDetails"),n=e.find(r=>r.field==="KS-AddOns"),c=e.find(r=>r.field==="Opts"),s=e.find(r=>r.field==="KS-Amount"),i=e.find(r=>r.field==="DateTime");e.find(r=>r.field==="ItemName");let d=e.find(r=>r.field==="Pcs");e.find(r=>r.field==="location");let m=e.find(r=>r.field==="DeliveryDateTime");e.find(r=>r.field==="ItemService");let f=e.find(r=>r.field==="IsSettled");l!==void 0&&ja({inFindColumn:l}),a!==void 0&&Ca({inFindColumn:a}),o!==void 0&&ha({inFindColumn:o}),n!==void 0&&Aa({inFindColumn:n}),c!==void 0&&ya({inFindColumn:c}),s!==void 0&&wa({inFindColumn:s}),i!==void 0&&Ba({inFindColumn:i}),d!==void 0&&ka({inFindColumn:d}),m!==void 0&&Pa({inFindColumn:m}),f!==void 0&&Ma({inFindColumn:f})};const Ja=()=>{var t=$("#table");p.icons=ra,p.onExpandRow=la,p.onClickRow=Sa,Ka({inColumns:p.columns}),t.bootstrapTable(p)},Ua="#toolbar",Wa="pk",za="true",Ga=[],Ya="",Xa="",qa=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],A={toolbar:Ua,idfield:Wa,showFooter:za,data:Ga,onClickRow:Ya,icons:Xa,columns:qa};let _a=({inFindColumn:t})=>{t.formatter=Qa},Qa=(t,e,l)=>l+1,Za=({inFindColumn:t})=>{t.footerFormatter=tl};function tl(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let el=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="AddOnRate");l!==void 0&&_a({inFindColumn:l}),a!==void 0&&Za({inFindColumn:a})},al=(t,e,l)=>{let a=e.AddOnArray,n=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");A.data=a,el({inColumns:A.columns}),i.bootstrapTable(A)};const ll="#toolbar",ol="pk",nl="true",rl=[],cl=!0,il="",sl="",dl="",ul=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],C={toolbar:ll,idfield:ol,showFooter:nl,data:rl,detailView:cl,onClickRow:il,onExpandRow:sl,icons:dl,columns:ul};let ml=({inFindColumn:t})=>{t.formatter=fl},fl=(t,e,l)=>l+1,Fl=({inFindColumn:t})=>{t.footerFormatter=Ll};function Ll(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let $l=({inFindColumn:t})=>{t.footerFormatter=pl};function pl(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Il=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="Rate"),o=e.find(n=>n.field==="Pcs");l!==void 0&&ml({inFindColumn:l}),a!==void 0&&Fl({inFindColumn:a}),o!==void 0&&$l({inFindColumn:o})},Sl=(t,e,l)=>{let a=e.AggValues.ItemsArray,n=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");C.data=a,C.onExpandRow=al,Il({inColumns:C.columns}),i.bootstrapTable(C)};const jl="bi-plus-circle fs-4",Vl="bi-dash-circle fs-4",Cl={detailOpen:jl,detailClose:Vl},bl="#toolbar",gl="pk",hl="true",Ol=[],Al=!0,Tl="",yl="",Dl="",wl=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],I={toolbar:bl,idfield:gl,showFooter:hl,data:Ol,detailView:Al,onClickRow:Tl,onExpandRow:yl,icons:Dl,columns:wl};let vl=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):L()};const Nl=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return vl({inFromFetch:c}),c};let Bl=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&Nl({inRowData:t}).then(l=>{})})};const Rl=(t,e,l)=>{l==="Opts"&&(t.IsSettled||Bl({inRowData:t}))};let kl=({inFindColumn:t})=>{t.formatter=El},El=(t,e,l)=>l+1,Pl=({inFindColumn:t})=>{t.footerFormatter=Ml,t.formatter=xl};const xl=(t,e,l)=>t===""?"":`₹ ${t}`;function Ml(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let Hl=({inFindColumn:t})=>{t.footerFormatter=Kl};function Kl(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,o){return a+o},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,o){return a+o},0);return`${l}/${e}`}const Jl=({inFindColumn:t})=>{t.formatter=Ul},Ul=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((o,n)=>o+n.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let Wl=({inFindColumn:t})=>{t.formatter=zl};function zl(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let Gl=({inFindColumn:t})=>{t.formatter=Yl,t.footerFormatter=Xl};function Yl(t,e,l){let a=localStorage.getItem("PresentOrder"),o=JSON.parse(a),n=e.ItemSerial,c=Object.values(o.AddOnData).filter(s=>s.AddOnItemSerial===n);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function Xl(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let ql=({inFindColumn:t})=>{t.formatter=_l};const _l=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),o=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+o+" min..."};let Ql=({inFindColumn:t})=>{t.footerFormatter=Zl};function Zl(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let to=({inFindColumn:t})=>{t.formatter=eo},eo=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),ao=({inFindColumn:t})=>{t.formatter=lo},lo=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),oo=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="AggValues.SettlementAmount"),o=e.find(r=>r.field==="AggValues.ItemDetails"),n=e.find(r=>r.field==="KS-AddOns"),c=e.find(r=>r.field==="Opts"),s=e.find(r=>r.field==="KS-Amount"),i=e.find(r=>r.field==="DateTime");e.find(r=>r.field==="ItemName");let d=e.find(r=>r.field==="Pcs");e.find(r=>r.field==="location");let m=e.find(r=>r.field==="DeliveryDateTime");e.find(r=>r.field==="ItemService");let f=e.find(r=>r.field==="IsSettled");l!==void 0&&kl({inFindColumn:l}),a!==void 0&&Pl({inFindColumn:a}),o!==void 0&&Hl({inFindColumn:o}),n!==void 0&&Jl({inFindColumn:n}),c!==void 0&&Wl({inFindColumn:c}),s!==void 0&&Gl({inFindColumn:s}),i!==void 0&&ql({inFindColumn:i}),d!==void 0&&Ql({inFindColumn:d}),m!==void 0&&to({inFindColumn:m}),f!==void 0&&ao({inFindColumn:f})};const no="YesterdayTableId",ro=()=>{var t=$(`#${no}`);I.icons=Cl,I.onExpandRow=Sl,I.onClickRow=Rl,oo({inColumns:I.columns}),t.bootstrapTable(I)},co="#toolbar",io="pk",so="true",uo=[],mo="",fo="",Fo=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],T={toolbar:co,idfield:io,showFooter:so,data:uo,onClickRow:mo,icons:fo,columns:Fo};let Lo=({inFindColumn:t})=>{t.formatter=$o},$o=(t,e,l)=>l+1,po=({inFindColumn:t})=>{t.footerFormatter=Io};function Io(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let So=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="AddOnRate");l!==void 0&&Lo({inFindColumn:l}),a!==void 0&&po({inFindColumn:a})},jo=(t,e,l)=>{let a=e.AddOnArray,n=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");T.data=a,So({inColumns:T.columns}),i.bootstrapTable(T)};const Vo="#toolbar",Co="pk",bo="true",go=[],ho=!0,Oo="",Ao="",To="",yo=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],b={toolbar:Vo,idfield:Co,showFooter:bo,data:go,detailView:ho,onClickRow:Oo,onExpandRow:Ao,icons:To,columns:yo};let Do=({inFindColumn:t})=>{t.formatter=wo},wo=(t,e,l)=>l+1,vo=({inFindColumn:t})=>{t.footerFormatter=No};function No(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Bo=({inFindColumn:t})=>{t.footerFormatter=Ro};function Ro(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let ko=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="Rate"),o=e.find(n=>n.field==="Pcs");l!==void 0&&Do({inFindColumn:l}),a!==void 0&&vo({inFindColumn:a}),o!==void 0&&Bo({inFindColumn:o})},Eo=(t,e,l)=>{let a=e.AggValues.ItemsArray,n=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");b.data=a,b.onExpandRow=jo,ko({inColumns:b.columns}),i.bootstrapTable(b)};const Po="bi-plus-circle fs-4",xo="bi-dash-circle fs-4",Mo={detailOpen:Po,detailClose:xo},Ho="#toolbar",Ko="pk",Jo="true",Uo=[],Wo=!0,zo="",Go="",Yo="",Xo=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],S={toolbar:Ho,idfield:Ko,showFooter:Jo,data:Uo,detailView:Wo,onClickRow:zo,onExpandRow:Go,icons:Yo,columns:Xo};let qo=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):L()};const _o=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return qo({inFromFetch:c}),c};let Qo=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&_o({inRowData:t}).then(l=>{})})};const Zo=(t,e,l)=>{l==="Opts"&&(t.IsSettled||Qo({inRowData:t}))};let tn=({inFindColumn:t})=>{t.formatter=en},en=(t,e,l)=>l+1,an=({inFindColumn:t})=>{t.footerFormatter=on,t.formatter=ln};const ln=(t,e,l)=>t===""?"":`₹ ${t}`;function on(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let nn=({inFindColumn:t})=>{t.footerFormatter=rn};function rn(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,o){return a+o},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,o){return a+o},0);return`${l}/${e}`}const cn=({inFindColumn:t})=>{t.formatter=sn},sn=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((o,n)=>o+n.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let dn=({inFindColumn:t})=>{t.formatter=un};function un(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let mn=({inFindColumn:t})=>{t.formatter=fn,t.footerFormatter=Fn};function fn(t,e,l){let a=localStorage.getItem("PresentOrder"),o=JSON.parse(a),n=e.ItemSerial,c=Object.values(o.AddOnData).filter(s=>s.AddOnItemSerial===n);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function Fn(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let Ln=({inFindColumn:t})=>{t.formatter=$n};const $n=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),o=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+o+" min..."};let pn=({inFindColumn:t})=>{t.footerFormatter=In};function In(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Sn=({inFindColumn:t})=>{t.formatter=jn},jn=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),Vn=({inFindColumn:t})=>{t.formatter=Cn},Cn=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),bn=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="AggValues.SettlementAmount"),o=e.find(r=>r.field==="AggValues.ItemDetails"),n=e.find(r=>r.field==="KS-AddOns"),c=e.find(r=>r.field==="Opts"),s=e.find(r=>r.field==="KS-Amount"),i=e.find(r=>r.field==="DateTime");e.find(r=>r.field==="ItemName");let d=e.find(r=>r.field==="Pcs");e.find(r=>r.field==="location");let m=e.find(r=>r.field==="DeliveryDateTime");e.find(r=>r.field==="ItemService");let f=e.find(r=>r.field==="IsSettled");l!==void 0&&tn({inFindColumn:l}),a!==void 0&&an({inFindColumn:a}),o!==void 0&&nn({inFindColumn:o}),n!==void 0&&cn({inFindColumn:n}),c!==void 0&&dn({inFindColumn:c}),s!==void 0&&mn({inFindColumn:s}),i!==void 0&&Ln({inFindColumn:i}),d!==void 0&&pn({inFindColumn:d}),m!==void 0&&Sn({inFindColumn:m}),f!==void 0&&Vn({inFindColumn:f})};const gn="ThisWeekTableId",hn=()=>{var t=$(`#${gn}`);S.icons=Mo,S.onExpandRow=Eo,S.onClickRow=Zo,bn({inColumns:S.columns}),t.bootstrapTable(S)},On="#toolbar",An="pk",Tn="true",yn=[],Dn="",wn="",vn=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],y={toolbar:On,idfield:An,showFooter:Tn,data:yn,onClickRow:Dn,icons:wn,columns:vn};let Nn=({inFindColumn:t})=>{t.formatter=Bn},Bn=(t,e,l)=>l+1,Rn=({inFindColumn:t})=>{t.footerFormatter=kn};function kn(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let En=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="AddOnRate");l!==void 0&&Nn({inFindColumn:l}),a!==void 0&&Rn({inFindColumn:a})},Pn=(t,e,l)=>{let a=e.AddOnArray,n=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");y.data=a,En({inColumns:y.columns}),i.bootstrapTable(y)};const xn="#toolbar",Mn="pk",Hn="true",Kn=[],Jn=!0,Un="",Wn="",zn="",Gn=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],g={toolbar:xn,idfield:Mn,showFooter:Hn,data:Kn,detailView:Jn,onClickRow:Un,onExpandRow:Wn,icons:zn,columns:Gn};let Yn=({inFindColumn:t})=>{t.formatter=Xn},Xn=(t,e,l)=>l+1,qn=({inFindColumn:t})=>{t.footerFormatter=_n};function _n(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let Qn=({inFindColumn:t})=>{t.footerFormatter=Zn};function Zn(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let tr=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="Rate"),o=e.find(n=>n.field==="Pcs");l!==void 0&&Yn({inFindColumn:l}),a!==void 0&&qn({inFindColumn:a}),o!==void 0&&Qn({inFindColumn:o})},er=(t,e,l)=>{let a=e.AggValues.ItemsArray,n=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(n);let i=l.html(s).find("table");g.data=a,g.onExpandRow=Pn,tr({inColumns:g.columns}),i.bootstrapTable(g)};const ar="bi-plus-circle fs-4",lr="bi-dash-circle fs-4",or={detailOpen:ar,detailClose:lr},nr="#toolbar",rr="pk",cr="true",ir=[],sr=!0,dr="",ur="",mr="",fr=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],j={toolbar:nr,idfield:rr,showFooter:cr,data:ir,detailView:sr,onClickRow:dr,onExpandRow:ur,icons:mr,columns:fr};let Fr=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):L()};const Lr=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return Fr({inFromFetch:c}),c};let $r=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&Lr({inRowData:t}).then(l=>{})})};const pr=(t,e,l)=>{l==="Opts"&&(t.IsSettled||$r({inRowData:t}))};let Ir=({inFindColumn:t})=>{t.formatter=Sr},Sr=(t,e,l)=>l+1,jr=({inFindColumn:t})=>{t.footerFormatter=Cr,t.formatter=Vr};const Vr=(t,e,l)=>t===""?"":`₹ ${t}`;function Cr(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let br=({inFindColumn:t})=>{t.footerFormatter=gr};function gr(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,o){return a+o},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,o){return a+o},0);return`${l}/${e}`}const hr=({inFindColumn:t})=>{t.formatter=Or},Or=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((o,n)=>o+n.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let Ar=({inFindColumn:t})=>{t.formatter=Tr};function Tr(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let yr=({inFindColumn:t})=>{t.formatter=Dr,t.footerFormatter=wr};function Dr(t,e,l){let a=localStorage.getItem("PresentOrder"),o=JSON.parse(a),n=e.ItemSerial,c=Object.values(o.AddOnData).filter(s=>s.AddOnItemSerial===n);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function wr(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let vr=({inFindColumn:t})=>{t.formatter=Nr};const Nr=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),o=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+o+" min..."};let Br=({inFindColumn:t})=>{t.footerFormatter=Rr};function Rr(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,o){return a+o},0).toFixed(0)}let kr=({inFindColumn:t})=>{t.formatter=Er},Er=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),Pr=({inFindColumn:t})=>{t.formatter=xr},xr=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),Mr=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="AggValues.SettlementAmount"),o=e.find(r=>r.field==="AggValues.ItemDetails"),n=e.find(r=>r.field==="KS-AddOns"),c=e.find(r=>r.field==="Opts"),s=e.find(r=>r.field==="KS-Amount"),i=e.find(r=>r.field==="DateTime");e.find(r=>r.field==="ItemName");let d=e.find(r=>r.field==="Pcs");e.find(r=>r.field==="location");let m=e.find(r=>r.field==="DeliveryDateTime");e.find(r=>r.field==="ItemService");let f=e.find(r=>r.field==="IsSettled");l!==void 0&&Ir({inFindColumn:l}),a!==void 0&&jr({inFindColumn:a}),o!==void 0&&br({inFindColumn:o}),n!==void 0&&hr({inFindColumn:n}),c!==void 0&&Ar({inFindColumn:c}),s!==void 0&&yr({inFindColumn:s}),i!==void 0&&vr({inFindColumn:i}),d!==void 0&&Br({inFindColumn:d}),m!==void 0&&kr({inFindColumn:m}),f!==void 0&&Pr({inFindColumn:f})};const Hr="AllTableId",Kr=()=>{var t=$(`#${Hr}`);j.icons=or,j.onExpandRow=er,j.onClickRow=pr,Mr({inColumns:j.columns}),t.bootstrapTable(j)},Jr=()=>{ro(),hn(),Kr()},Ur=()=>{Jr(),Ja(),he(),Oe(),Wr()};let Wr=()=>{if(zr()!==""){var t=document.getElementById("CustomerNameSearchButtonId"),e=new Event("click");t.dispatchEvent(e)}},zr=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()};const Gr=async()=>{if(Ur(),N({inSuccessFunc:D})===!1)return await!1;D()};document.addEventListener("DOMContentLoaded",function(){let t=document.getElementById("editCustomerModal"),l=document.getElementById("CustomerNameInputId");t.addEventListener("shown.bs.modal",function(){document.getElementById("CustomerName").focus()}),t.addEventListener("hidden.bs.modal",()=>{setTimeout(()=>{l.setAttribute("tabindex","-1"),l.focus()},5)})});Gr().then();
