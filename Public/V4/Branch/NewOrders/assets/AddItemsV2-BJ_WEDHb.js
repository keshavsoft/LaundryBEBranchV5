var O=Object.defineProperty,v=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var V=(e,t,a)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,L=(e,t)=>{for(var a in t||(t={}))A.call(t,a)&&V(e,a,t[a]);if(S)for(var a of S(t))N.call(t,a)&&V(e,a,t[a]);return e},F=(e,t)=>v(e,h(t));import{S as B}from"./EntryFile-D68kwv0T.js";let C=()=>{D()},D=()=>{const e=new URL(window.location.href),t=new URL("./Customer.html",e);let a=R(),l=w();t.searchParams.append("CustomerMobile",a),t.searchParams.append("CustomerName",l),window.location.href=t.href},R=()=>{let t=document.getElementById("CustomerMobileId");if(t!==null)return t.value.trim()},w=()=>{let t=document.getElementById("CustomerNameId");if(t!==null)return t.value.trim()},E=()=>{let e=document.getElementById("BranchNameAnchorId");e!==null&&e.addEventListener("click",C)};const H=()=>{var e=$("#table").bootstrapTable("getData");return e.length===0?(window.alert("Please Add Items"),!1):!0};let K=()=>{H()&&M()},M=()=>{const e=new URL(window.location.href),t=new URL("./Settlement.html",e);let a=P();t.searchParams.append("OrderNumber",a),window.location.href=t.href},P=()=>{let t=document.getElementById("OrderNumberId");if(t!==null)return t.innerHTML.trim()},J=()=>{let e=document.getElementById("CheckOutButtonId");e!==null&&e.addEventListener("click",K)},k=()=>{E(),J()};const x=()=>{let e=W(),t=U(),a=z(),l={};return l.AddOnService=e,l.AddOnRate=parseInt(t),l.AddOnItemSerial=parseInt(a),l};let U=()=>{let t=document.getElementById("AddOnRateId");if(t!==null)return t.value.trim()},W=()=>{let t=document.getElementById("TableFooterAddOnSelectId");if(t!==null)return t.value.trim()},z=()=>{let t=document.getElementById("AddOnModalItemSerialId");if(t!==null)return t.value.trim()},G=({PrepareBody:e})=>{var t=$("#AddOnTable"),a=t.bootstrapTable("getData");if(a.find(r=>r.AddOnService===e.AddOnService)!==void 0){let r=document.getElementById("TableFooterAddOnSelectId");return r.classList.add("is-invalid"),r.focus(),!1}return!0};const q="POST",Y={Accept:"application/json","Content-Type":"application/json"},_="",g={method:q,headers:Y,body:_};let Q=({PrepareBody:e})=>(g.body=JSON.stringify(e),g);const X="binV4",Z="Transactions",ee="Kakinada",te={OrderKey:"PresentOrder",ItemNamesKey:"ItemNames",AddOnsKey:"AddOns"},ae={ItemsTable:{DeleteUrl:"$tableName/SubTable/Delete/SubKey/:Id/:inKey/:SubId"}},m={routePath:X,folderName:Z,tableName:ee,localStorageKeys:te,ApiUrls:ae};let le=async({PrepareBody:e})=>{let t=Q({PrepareBody:e}),a=localStorage.getItem("BranchName"),l=document.getElementById("OrderNumberId").innerHTML,r=`/${m.routePath}/${a}/SubTable/Create/${l}/AddOnData`;return await await fetch(r,t)},oe=async()=>{let e=localStorage.getItem("BranchName"),t=m.localStorageKeys.OrderKey,a=`/Custom/Cleaning/Branch/Order/NewOrder/MaxRow/${e}`,r=await(await fetch(a)).json();localStorage.setItem(t,JSON.stringify(r))},T=async()=>{await oe()},re=async()=>{await T();let e=ue(),t=parseInt(se()),a=Object.values(e.AddOnData).filter(l=>l.AddOnItemSerial===t);ce({inAddOnData:a}),de({inItemsData:e}),ne()},ne=()=>{let t=document.getElementById("TableFooterAddOnSelectId");t.classList.remove("is-invalid"),t.focus()},ce=({inAddOnData:e})=>{let t=e;console.log("LocalAddOnData : ",t);var a=$("#AddOnTable");a.bootstrapTable("load",t)},de=({inItemsData:e})=>{let t=e;var a=$("#table");a.bootstrapTable("load",t)},se=()=>{let t=document.getElementById("AddOnModalItemSerialId");if(t!==null)return t.value.trim()},ue=()=>{document.getElementById("AddOnModalItemSerialId");let e=localStorage.getItem("PresentOrder");return JSON.parse(e)},me=async()=>{let e=x();G({PrepareBody:e})&&(await le({PrepareBody:e})).status===200&&re()};const ie=()=>{me()};let Ie=()=>{let e=document.getElementById("AddOnModalSaveButtonId");e!==null&&e.addEventListener("click",ie)};const Le="AddOns",Fe=()=>{const e=event.currentTarget,t=fe({inAddOnData:e.value});Se(t)},je=()=>{const e=localStorage.getItem(Le);return JSON.parse(e)},fe=({inAddOnData:e})=>je().find(l=>l.AddOnService===e).AddOnRate;let Se=e=>{let a=document.getElementById("AddOnRateId");a!==null&&(a.value=e)},Ve=()=>{let e=document.getElementById("TableFooterAddOnSelectId");e!==null&&e.addEventListener("change",Fe)},ge=()=>{Ie(),Ve()},be=()=>{ge()},pe=()=>{k(),be()},ye=({inRow:e})=>{const t=e;Te(t.ItemName),Oe(t.pk),ve(t.Rate)},Te=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},Oe=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},ve=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const $e=({inRow:e})=>{let t=he({inItemSerial:parseInt(e.pk)});var a=$("#AddOnTable");a.bootstrapTable("load",t),ye({inRow:e}),$("#AddOnModal").modal("show")};let he=({inItemSerial:e})=>{let t=m.localStorageKeys.OrderKey,a=localStorage.getItem(t),l=JSON.parse(a),r=e;return Object.keys(l.AddOnData).map(o=>F(L({},l.AddOnData[o]),{AddOnPK:o})).filter(o=>o.AddOnItemSerial===r)};const Ae=async({inRowpk:e,inItemSerial:t})=>{const a=m.ApiUrls.ItemsTable.DeleteUrl,l=m.routePath;let r=localStorage.getItem("BranchName");const s="ItemsInOrder",n=t;let o=a.replace("$tableName",r).replace(":Id",e).replace(":inKey",s).replace(":SubId",n),c={method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}};return await fetch(`/${l}/${o}`,c)},Ne=({inResponse:e})=>{e.status===200&&(window.location.href="")},Be=async({inItemSerial:e})=>{let t=Ce(),a=await Ae({inRowpk:t,inItemSerial:e});Ne({inResponse:a})},Ce=()=>{let e=m.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},De=(e,t,a)=>{console.log("field : ",a,t),a==="KS-AddOns"&&$e({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")&&Be({inItemSerial:e.pk})};let Re=()=>!(we()===!1||Ee()===!1||He()===!1||Ke()===!1||Me()===!1||Pe()===!1||Je()===!1);const we=()=>{let e=document.getElementById("TableFooterItemNameId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Ee=()=>{let e=document.getElementById("TableFooterPcsInputId");return e.value===""||e.value<=0?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},He=()=>{let e=document.getElementById("exampleFormControlInput1");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Ke=()=>{let e=document.getElementById("TableFooterFactoryInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Me=()=>{let e=document.getElementById("TableFooterCategoryId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Pe=()=>{let e=document.getElementById("TableFooterdateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Je=()=>{let e=document.getElementById("TableFooterRateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ke="POST",xe={Accept:"application/json","Content-Type":"application/json"},Ue="",b={method:ke,headers:xe,body:Ue},We=()=>{let e=ze(),t=Ge(),a=qe(),l=Ye(),r=Xe(),s=_e(),n=Qe(),o={};return o.Category=e,o.ItemName=t,o.Rate=a,o.Pcs=l,o.Total=r,o.location=s,o.DeliveryDateTime=n,o};let ze=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},Ge=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},qe=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},Ye=()=>{let t=document.getElementById("TableFooterPcsInputId");if(t!==null)return t.value.trim()},_e=()=>{let t=document.getElementById("TableFooterFactoryInputId");if(t!==null)return t.value.trim()},Qe=()=>{let t=document.getElementById("TableFooterdateInputId");if(t!==null)return t.value.trim()},Xe=()=>{let t=document.getElementById("TableFooterRateInputId"),l=document.getElementById("TableFooterPcsInputId");return console.log("Total:",t.value*l.value),t.value*l.value},Ze=()=>(b.body=JSON.stringify(We()),b),et=async()=>{let e=localStorage.getItem("BranchName"),t=parseInt(document.getElementById("OrderNumberId").innerHTML),a=Ze(),l=`/${m.routePath}/${e}/SubTable/Create/${t}/ItemsInOrder`;return await await fetch(l,a)},tt=()=>{window.location.href=""},at=async()=>{(await et()).status===200&&tt()};const lt=()=>{Re()&&at()};let ot=()=>{let e=document.getElementById("TableFooterSaveButtonId");e!==null&&e.addEventListener("click",lt)},rt=()=>{let e=m.localStorageKeys.ItemNamesKey,t=localStorage.getItem(e);return JSON.parse(t)};const nt=({inCategorySelected:e})=>{let a=document.getElementById("ItemsDataListId"),l=e,n=rt().filter(u=>u.Category===l).sort((u,i)=>u.ItemName==i.ItemName?0:u.ItemName>i.ItemName?1:-1);for(var o="",c=0;c<n.length;c++)o+=`<option value="${n[c].ItemName}">${n[c].ItemName}</option>`;a.innerHTML=o},ct=e=>{let a=e.currentTarget.value;nt({inCategorySelected:a})};let dt=()=>{let e=document.getElementById("TableFooterCategoryId");e!==null&&e.addEventListener("change",ct)},st=({inItemName:e})=>{let t=m.localStorageKeys.ItemNamesKey,a=localStorage.getItem(t);return JSON.parse(a).find(s=>s.ItemName===e)};const ut=e=>{let a=e.currentTarget.value,l=st({inItemName:a});mt(l.DryWashRate)};let mt=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},it=()=>{let e=document.getElementById("TableFooterItemNameId");e!==null&&e.addEventListener("change",ut)};const p=(e,t,a)=>{It(e.ItemName),Lt(e.Category),Ft(e.DryWashRate),jFLocalToInputTableFooterPicsInputId(e.pcs),$("#ItemsOnModal").modal("hide"),document.getElementById("TableFooterSaveButtonId").click()};let It=e=>{let a=document.getElementById("TableFooterItemNameId");a!==null&&(a.value=e)},Lt=e=>{let a=document.getElementById("TableFooterCategoryId");a!==null&&(a.value=e)},Ft=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)};const jt=e=>{let t="ItemsOnModal";var a=$(document.getElementById(t).querySelector("table"));e?(a.bootstrapTable({data:St(e),onClickRow:p}),document.getElementById("SearchString").innerHTML=`Search Results for - ${e}`):(a.bootstrapTable({data:ft(),onClickRow:p}),document.getElementById("SearchString").innerHTML="All Items"),$(`#${t}`).modal("show")},ft=()=>{let e=localStorage.getItem("ItemNames");return JSON.parse(e)},St=e=>{let t=localStorage.getItem("ItemNames");return JSON.parse(t).filter(l=>l.ItemName.toLowerCase().includes(e.toLowerCase()))},Vt=()=>{let e=document.getElementById("TableFooterItemNameId").value;jt(e)};let gt=()=>{let e=document.getElementById("TableFooterItemNameSearchButtonId");e!==null&&e.addEventListener("click",Vt)},bt=()=>{ot(),dt(),it(),gt(),pt()},pt=()=>{var e=new Event("change");let t=document.getElementById("TableFooterCategoryId");console.log("jVarLocalTableFooterCategoryId : ",t),t!==null&&document.getElementById("TableFooterCategoryId").dispatchEvent(e)},yt=({inFindColumn:e})=>{e.formatter=Tt},Tt=(e,t,a)=>a+1,Ot=({inFindColumn:e})=>{e.footerFormatter=vt},vt=e=>` <div class="input-group">
                                        <input type="text" class="form-control" id="TableFooterRateInputId"
                                            autocomplete="off" tabindex="-1" readonly>
                                        <div class="invalid-feedback">
                                            Please provide correct item.
                                        </div>
                                    </div>`,$t=({inFindColumn:e})=>{e.formatter=ht},ht=(e,t,a)=>{let l=localStorage.getItem("PresentOrder"),r=JSON.parse(l),s=parseInt(t.pk),n=Object.values(r.AddOnData).filter(o=>o.AddOnItemSerial===s);if(n.length>0){let o=n.map(c=>c.AddOnRate).reduce((c,u)=>c+u,0);return['<a href="#" class="btn btn-primary ">',`${n.length} -${o}`,"</a>"].join("")}else return n.map(o=>o.AddOnRate).reduce((o,c)=>o+c,0),['<a href="#" class="btn btn-outline-primary ">',"Click","</a>"].join("")},At=({inFindColumn:e})=>{e.formatter=Nt,e.footerFormatter=Bt};function Nt(e,t,a){return['<a href="#" class="btn btn-danger ">','<i class="bi bi-trash3"></i>',"</a>"].join("")}const Bt=e=>(console.log("data : ",e),`<button class="btn btn-outline-success" type="button"
                                        id="TableFooterSaveButtonId">Save</button>`);let Ct=({inFindColumn:e})=>{e.formatter=Dt};function Dt(e,t,a){let l=localStorage.getItem("PresentOrder"),r=JSON.parse(l),s=t.ItemSerial,n=Object.values(r.AddOnData).filter(o=>o.AddOnItemSerial===s);return n.length>0?n.map(c=>c.AddOnRate).reduce((c,u)=>c+u,0)*t.Pcs+t.Total:t.Total}let Rt=({inFindColumn:e})=>{e.footerFormatter=wt};const wt=(e,t,a)=>`  <select class="form-select" aria-label="Default select example"
                                        id="TableFooterCategoryId">
                                        <option selected value="Men">Men</option>
                                        <option value="Women">Women</option>
                                        <option value="Kids">Kids</option>
                                        <option value="Others">Others</option>
                                    </select>`;let Et=({inFindColumn:e})=>{e.footerFormatter=Ht};const Ht=(e,t,a)=>` <div class="input-group">
                                        <input type="text" class="form-control" id="TableFooterItemNameId"
                                            list="ItemsDataListId" autocomplete="off" autofocus>
                                        <button class="btn btn-outline-secondary" type="button"
                                            id="TableFooterItemNameSearchButtonId">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                                <path
                                                    d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
                                            </svg>
                                        </button>
                                        <div class="invalid-feedback">
                                            Select Item Name...
                                        </div>
                                    </div>`;let Kt=({inFindColumn:e})=>{e.footerFormatter=Mt};const Mt=e=>`   <div class="input-group">
                                        <input class="form-control" id="TableFooterPcsInputId" type="number" min="1"
                                            max="100" step="1" value="1">

                                        <div class="invalid-feedback">
                                            Please provide correct pcs.
                                        </div>
                                    </div>`;let Pt=({inFindColumn:e})=>{e.footerFormatter=Jt};const Jt=e=>` <select class="form-select" aria-label="Default select example"
                                        id="TableFooterFactoryInputId" tabindex="-1">
                                        <option value="Vizag" selected>Vizag</option>
                                        <option value="GD">GD</option>
                                        <option value="Vzm">Vzm</option>
                                    </select>`;let kt=({inFindColumn:e})=>{e.footerFormatter=xt};const xt=e=>'<input class="form-control" tabindex="-1" type="date" id="TableFooterdateInputId">';let Ut=({inColumns:e})=>{let t=e,a=t.find(d=>d.field==="KS-Serial"),l=t.find(d=>d.field==="Rate"),r=t.find(d=>d.field==="KS-AddOns"),s=t.find(d=>d.field==="KS-Opts"),n=t.find(d=>d.field==="KS-Amount"),o=t.find(d=>d.field==="Category"),c=t.find(d=>d.field==="ItemName"),u=t.find(d=>d.field==="Pcs"),i=t.find(d=>d.field==="location"),f=t.find(d=>d.field==="DeliveryDateTime");a!==void 0&&yt({inFindColumn:a}),l!==void 0&&Ot({inFindColumn:l}),r!==void 0&&$t({inFindColumn:r}),s!==void 0&&At({inFindColumn:s}),n!==void 0&&Ct({inFindColumn:n}),o!==void 0&&Rt({inFindColumn:o}),c!==void 0&&Et({inFindColumn:c}),u!==void 0&&Kt({inFindColumn:u}),i!==void 0&&Pt({inFindColumn:i}),f!==void 0&&kt({inFindColumn:f})};const Wt=[],zt=[{field:"KS-Serial",title:"#",width:50},{field:"Category",title:"Category",width:200},{field:"ItemName",title:"Item Name",width:350},{field:"KS-AddOns",title:"Add Ons",width:100},{field:"Rate",title:"Rate",align:"right",width:100},{field:"Pcs",title:"Pcs",align:"right",width:220},{field:"KS-Amount",title:"Amount",align:"right",formatter:"",width:200},{field:"location",title:"Factory",width:200},{field:"DeliveryDateTime",title:"Delivery",width:100},{field:"KS-Opts",title:"Opts.",width:100}],Gt="",qt="",I={data:Wt,columns:zt,onPostBody:Gt,onClickRow:qt},Yt=()=>{var e=$("#table");I.onPostBody=()=>{bt(),_t(),$("#TableFooterItemNameId").focus()},I.onClickRow=De,Ut({inColumns:I.columns}),e.bootstrapTable(I)},_t=()=>{var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear(),r=l+"-"+a+"-"+t;e.setDate(e.getDate()+7);var s=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear(),c=o+"-"+n+"-"+s;let u=document.getElementById("TableFooterdateInputId");u!==null&&(u.value=c,u.setAttribute("min",r))};let Qt=()=>{};const Xt=async(e,t,a)=>{a===3&&window.confirm("Do you really want to Delete this AddOn?")&&(Zt(),console.log("aaaaaaaaaa : ,row",e))},Zt=()=>{let e=m.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},ea=[],ta="",aa="",j={data:ea,onPostBody:ta,onClickRow:aa},la=()=>{var e=$("#AddOnTable");j.onPostBody=Qt,j.onClickRow=Xt,e.bootstrapTable(j)},oa=()=>{Yt(),la()};let ra=()=>{let t=document.getElementById("BranchNameId"),a=localStorage.getItem("BranchName");t!==null&&(t.innerHTML=a)};const na=async()=>{ra(),oa(),await T(),pe()},ca=()=>{let e=m.localStorageKeys.OrderKey,t=localStorage.getItem(e),a=JSON.parse(t);return da({inItemsObject:a.ItemsInOrder})},da=({inItemsObject:e})=>Object.entries(e).map(([a,l])=>F(L({},l),{pk:a})),sa=()=>{let e=ca();var t=$("#table");t.bootstrapTable("load",e)},ua=()=>{let e=m.localStorageKeys.AddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},ma=()=>{let e=document.getElementById("TableFooterAddOnSelectId"),t=ua();for(var a=0;a<t.length;a++){let l=document.createElement("option");l.value=t[a].AddOnService,l.innerHTML=t[a].AddOnService,e.appendChild(l)}},ia=()=>{ma()},Ia=()=>{let e=m.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t)},La=()=>{let e=Ia();Sa(e.CustomerData.CustomerMobile),fa(e.CustomerData.CustomerName),ja(e.pk),Fa(localStorage.getItem("BranchName"))};let Fa=e=>{let a=document.getElementById("BranchNameAnchorId");a!==null&&(a.innerHTML=e)},ja=e=>{let a=document.getElementById("OrderNumberId");a!==null&&(a.innerHTML=e)},fa=e=>{let a=document.getElementById("CustomerNameId");a!==null&&(a.value=e)},Sa=e=>{let a=document.getElementById("CustomerMobileId");a!==null&&(a.value=e)};const y=()=>{sa(),ia(),La()},Va=async()=>{await na(),B({inSuccessFunc:y})&&y()};Va().then();
