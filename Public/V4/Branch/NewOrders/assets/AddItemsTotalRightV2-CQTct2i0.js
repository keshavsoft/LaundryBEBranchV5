var w=Object.defineProperty,R=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var O=(e,t,a)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,j=(e,t)=>{for(var a in t||(t={}))D.call(t,a)&&O(e,a,t[a]);if(p)for(var a of p(t))M.call(t,a)&&O(e,a,t[a]);return e},S=(e,t)=>R(e,E(t));import{S as K}from"./EntryFile-D68kwv0T.js";let H=()=>{P()},P=()=>{const e=new URL(window.location.href),t=new URL("./Customer.html",e);let a=k(),l=J();t.searchParams.append("CustomerMobile",a),t.searchParams.append("CustomerName",l),window.location.href=t.href},k=()=>{let t=document.getElementById("CustomerMobileId");if(t!==null)return t.value.trim()},J=()=>{let t=document.getElementById("CustomerNameId");if(t!==null)return t.value.trim()},x=()=>{let e=document.getElementById("BranchNameAnchorId");e!==null&&e.addEventListener("click",H)};const U=()=>{var e=$("#table").bootstrapTable("getData");return e.length===0?(window.alert("Please Add Items"),!1):!0};let W=()=>{U()&&q()},q=()=>{const e=new URL(window.location.href),t=new URL("./Settlement.html",e);let a=z();t.searchParams.append("OrderNumber",a),window.location.href=t.href},z=()=>{let t=document.getElementById("OrderNumberId");if(t!==null)return t.innerHTML.trim()},G=()=>{let e=document.getElementById("CheckOutButtonId");e!==null&&e.addEventListener("click",W)},_=()=>{x(),G()},Y=()=>!(Q()===!1||X()===!1||Z()===!1||ee()===!1||te()===!1||ae()===!1||le()===!1);const Q=()=>{let e=document.getElementById("TableFooterItemNameId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},X=()=>{let e=document.getElementById("TableFooterPcsInputId");return e.value===""||e.value<=0?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Z=()=>{let e=document.getElementById("exampleFormControlInput1");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ee=()=>{let e=document.getElementById("TableFooterFactoryInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},te=()=>{let e=document.getElementById("TableFooterCategoryId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},ae=()=>{let e=document.getElementById("TableFooterdateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},le=()=>{let e=document.getElementById("TableFooterRateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},oe="POST",re={Accept:"application/json","Content-Type":"application/json"},ne="",T={method:oe,headers:re,body:ne},ce="binV4",de="Transactions",me="Kakinada",se={OrderKey:"PresentOrder",ItemNamesKey:"ItemNames",AddOnsKey:"AddOns",PresentOrderAddOnsKey:"PresentOrderAddOns"},ue={ItemsTable:{DeleteUrl_Common:"$tableName/SubTable/Delete/SubKey/:Id/:inKey/:SubId",DeleteAddOnUrl:"/Custom/Cleaning/Branch/Order/NewOrder/addOn/$tableName/:Id/:SubId",DeleteItemUrl:"/Custom/Cleaning/Branch/Order/NewOrder/Item/$tableName/:Id/:SubId"}},ie={AddOnModal:"AddOnModal"},s={routePath:ce,folderName:de,tableName:me,localStorageKeys:se,ApiUrls:ue,ModalIds:ie};let Ie=({inCategory:e,inItemType:t})=>{let a=s.localStorageKeys.ItemNamesKey,l=localStorage.getItem(a);return JSON.parse(l).filter(r=>r.Category===e&&r.ItemType===t)},h=({inCategory:e,inItemType:t,inService:a})=>{let l=s.localStorageKeys.ItemNamesKey,o=localStorage.getItem(l);return JSON.parse(o).find(c=>c.Category===e&&c.ItemType===t&&c.Service===a)},Le=()=>{let e=s.localStorageKeys.ItemNamesKey,t=localStorage.getItem(e);return JSON.parse(t)};const Fe=()=>{let e=Se(),t=fe(),a=Ve(),l=ge(),o=pe(),n=ye(),r=be();const c=je();let u=JSON.parse(localStorage.getItem("PresentOrderAddOns"));const I=h({inCategory:e,inItemType:t,inService:c});let d={};return d.Category=e,d.ItemName=I.ItemName,d.ItemType=t,d.Rate=a,d.Pcs=l,d.Total=o,d.location=n,d.DeliveryDateTime=r,d.ItemService=c,d.AddOnArray=u,d};let je=()=>{let t=document.getElementById("TableFooterItemServiceId");if(t!==null)return t.value.trim()},Se=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},fe=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},Ve=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},ge=()=>{let t=document.getElementById("TableFooterPcsInputId");if(t!==null)return t.value.trim()},ye=()=>{let t=document.getElementById("TableFooterFactoryInputId");if(t!==null)return t.value.trim()},be=()=>{let t=document.getElementById("TableFooterdateInputId");if(t!==null)return t.value.trim()},pe=()=>{let t=document.getElementById("TableFooterRateInputId"),l=document.getElementById("TableFooterPcsInputId");return console.log("Total:",t.value*l.value),t.value*l.value},Oe=()=>(T.body=JSON.stringify(Fe()),T),Te=async()=>{let e=localStorage.getItem("BranchName"),t=parseInt(document.getElementById("OrderNumberId").innerHTML),a=Oe(),l=`/${s.routePath}/${e}/SubTable/Create/${t}/ItemsInOrder`;return await await fetch(l,a)},ve=()=>{window.location.href="",localStorage.removeItem("PresentOrderAddOns")},Ae=async()=>{(await Te()).status===200&&ve()};const $e=()=>{Y()&&Ae()};let he=()=>{let e=document.getElementById("TableFooterSaveButtonId");e!==null&&e.addEventListener("click",$e)};const Ce=({inCategorySelected:e})=>{let a=document.getElementById("ItemsDataListId"),l=e,n=Le().filter(i=>i.Category===l);const r=Object.groupBy(n,({ItemType:i})=>i);let u=Object.keys(r).map(i=>i).sort((i,L)=>i==L?0:i>L?1:-1);for(var I="",d=0;d<u.length;d++)I+=`<option value="${u[d]}">${u[d]}</option>`;a.innerHTML=I},Ne=e=>{let a=e.currentTarget.value;Ce({inCategorySelected:a})};let Be=()=>{let e=document.getElementById("TableFooterCategoryId");e!==null&&e.addEventListener("change",Ne)};const C="TableFooterItemServiceId",we=e=>{let a=e.currentTarget.value;const l=Re();let o=document.getElementById(C),n=Ie({inCategory:l,inItemType:a});const r=Object.groupBy(n,({Service:i})=>i);let u=Object.keys(r).map(i=>i).sort((i,L)=>i==L?0:i>L?1:-1);for(var I="",d=0;d<u.length;d++)I+=`<option value="${u[d]}">${u[d]}</option>`;o.innerHTML=I,Ee()};let Re=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},Ee=()=>{var e=new Event("change");let t=document.getElementById(C);t!==null&&t.dispatchEvent(e)},De=()=>{let e=document.getElementById("TableFooterItemNameId");e!==null&&e.addEventListener("change",we)};const v=(e,t,a)=>{Me(e.ItemName),Ke(e.Category),He(e.DryWashRate),Pe(1),$("#ItemsOnModal").modal("hide"),document.getElementById("TableFooterSaveButtonId").click()};let Me=e=>{let a=document.getElementById("TableFooterItemNameId");a!==null&&(a.value=e)},Ke=e=>{let a=document.getElementById("TableFooterCategoryId");a!==null&&(a.value=e)},He=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},Pe=e=>{let a=document.getElementById("TableFooterPcsInputId");a!==null&&(a.value=e)};const ke=e=>{let t="ItemsOnModal";var a=$(document.getElementById(t).querySelector("table"));e?(a.bootstrapTable({data:xe(e),onClickRow:v}),document.getElementById("SearchString").innerHTML=`Search Results for - ${e}`):(a.bootstrapTable({data:Je(),onClickRow:v}),document.getElementById("SearchString").innerHTML="All Items"),$(`#${t}`).modal("show")},Je=()=>{let e=localStorage.getItem("ItemNames");return JSON.parse(e)},xe=e=>{let t=localStorage.getItem("ItemNames");return JSON.parse(t).filter(l=>l.ItemName.toLowerCase().includes(e.toLowerCase()))},Ue=()=>{let e=document.getElementById("TableFooterItemNameId").value;ke(e)};let We=()=>{let e=document.getElementById("TableFooterItemNameSearchButtonId");e!==null&&e.addEventListener("click",Ue)},N=document.getElementById("AddOnModalLocalStorage"),qe=({inRow:e})=>{const t=ze(),a=Ge();_e(t),Ye(a)},ze=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},Ge=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},_e=e=>{const t=N.querySelector(".AddOnModalLocalStorageItemNameClass");t!==null&&(t.value=e)},Ye=e=>{const t=N.querySelector(".AddOnModalLocalStorageItemRateClass");t!==null&&(t.value=e)};const Qe=()=>{let e=s.localStorageKeys.PresentOrderAddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},Xe="AddOnModalLocalStorageTable",g=()=>{let e=Qe();var t=$(`#${Xe}`);t.bootstrapTable("load",e===null?[]:e)},Ze="AddOnModalLocalStorage",et=({inRow:e})=>{g();let t=document.getElementById(Ze);qe({inRow:e}),$(t).modal("show")};let tt=()=>{let e=document.getElementById("TableFooterAddOnId");e!==null&&e.addEventListener("click",et)};const at=e=>{let a=e.currentTarget.value;const l=ot(),o=lt();let n=h({inCategory:l,inItemType:o,inService:a});rt(n.DryWashRate)};let lt=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},ot=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},rt=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},nt=()=>{let e=document.getElementById("TableFooterItemServiceId");e!==null&&e.addEventListener("change",at)};const ct=()=>{Be(),tt(),We(),nt(),De(),he()};let dt=()=>{_(),ct()},y=async()=>{let e=localStorage.getItem("BranchName"),t=s.localStorageKeys.OrderKey,a=`/Custom/Cleaning/Branch/Order/NewOrder/MaxRow/${e}`,o=await(await fetch(a)).json();localStorage.setItem(t,JSON.stringify(o))},mt=async()=>{await y()},st=({inRow:e})=>{const t=e;ut(t.ItemName),it(t.pk),It(t.Rate)},ut=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},it=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},It=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const Lt=({inRow:e})=>{let t=e.AddOnArray;const a=s.ModalIds.AddOnModal;var l=$("#AddOnTable");l.bootstrapTable("load",t),st({inRow:e}),$(`#${a}`).modal("show")},Ft=async({inRowpk:e,inItemSerial:t})=>{const a=s.ApiUrls.ItemsTable.DeleteItemUrl;let l=localStorage.getItem("BranchName");const o=t;let n=a.replace("$tableName",l).replace(":Id",e).replace(":SubId",o);return await fetch(n,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}})},jt=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e),a=JSON.parse(t);return St({inItemsObject:a.ItemsInOrder})},St=({inItemsObject:e})=>Object.entries(e).map(([a,l])=>S(j({},l),{pk:a})),b=()=>{let e=jt();var t=$("#table");t.bootstrapTable("load",e)},ft=({inResponse:e})=>{e.status===200&&y().then(t=>{b(),$("#TableFooterItemNameId").focus()})},Vt=async({inItemSerial:e})=>{let t=gt(),a=await Ft({inRowpk:t,inItemSerial:e});ft({inResponse:a})},gt=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},yt=(e,t,a)=>{a==="KS-AddOns"&&Lt({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")&&Vt({inItemSerial:e.pk})};let bt=()=>{Ot(),pt(),$("#TableFooterItemNameId").focus()},pt=()=>{var e=new Event("change");document.getElementById("TableFooterCategoryId")!==null&&document.getElementById("TableFooterCategoryId").dispatchEvent(e)};const Ot=()=>{var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear(),o=l+"-"+a+"-"+t;e.setDate(e.getDate()+7);var n=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),c=e.getFullYear(),u=c+"-"+r+"-"+n;let I=document.getElementById("TableFooterdateInputId");I!==null&&(I.value=u,I.setAttribute("min",o))};let Tt=({inFindColumn:e})=>{e.formatter=vt},vt=(e,t,a)=>a+1,At=({inFindColumn:e})=>{e.footerFormatter=$t},$t=e=>` <div class="input-group">
                                        <input type="text" class="form-control" id="TableFooterRateInputId"
                                            autocomplete="off" tabindex="-1" readonly>
                                        <div class="invalid-feedback">
                                            Please provide correct item.
                                        </div>
                                    </div>`,ht=({inFindColumn:e})=>{e.formatter=Ct,e.footerFormatter=Nt},Ct=(e,t,a)=>{let l=t.AddOnArray;if(l.length>0){let o=l.map(n=>n.AddOnRate).reduce((n,r)=>n+r,0);return['<a href="#" class="btn btn-primary ">',`${l.length} -${o}`,"</a>"].join("")}else return['<a href="#" class="btn btn-outline-primary ">',"Click","</a>"].join("")},Nt=(e,t,a)=>['<a href="#" id="TableFooterAddOnId" class="btn btn-outline-primary ">',"Click","</a>"].join(""),Bt=({inFindColumn:e})=>{e.formatter=wt,e.footerFormatter=Rt};function wt(e,t,a){return['<a href="#" class="btn btn-danger ">','<i class="bi bi-trash3"></i>',"</a>"].join("")}const Rt=e=>`<button class="btn btn-outline-success" type="button"
                                        id="TableFooterSaveButtonId">Save</button>`;let Et=({inFindColumn:e})=>{e.formatter=Dt};function Dt(e,t,a){let l=localStorage.getItem("PresentOrder"),o=JSON.parse(l),n=t.ItemSerial,r=Object.values(o.AddOnData).filter(c=>c.AddOnItemSerial===n);return r.length>0?r.map(u=>u.AddOnRate).reduce((u,I)=>u+I,0)*t.Pcs+t.Total:t.Total}let Mt=({inFindColumn:e})=>{e.footerFormatter=Kt};const Kt=(e,t,a)=>`  <select class="form-select" aria-label="Default select example"
                                        id="TableFooterCategoryId">
                                        <option selected value="Men">Men</option>
                                        <option value="Women">Women</option>
                                        <option value="Kids">Kids</option>
                                        <option value="Others">Others</option>
                                    </select>`;let Ht=({inFindColumn:e})=>{e.footerFormatter=Pt};const Pt=(e,t,a)=>` <div class="input-group">
                                        <input type="text" class="form-control" id="TableFooterItemNameId"
                                            list="ItemsDataListId" autocomplete="off" autofocus>
                                        <button class="btn btn-outline-secondary" type="button"
                                            id="TableFooterItemNameSearchButtonId">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                                <path
                                                    d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
                                            </svg>
                                        </button>
                                        <div class="invalid-feedback">
                                            Select Item Name...
                                        </div>
                                    </div>`;let kt=({inFindColumn:e})=>{e.footerFormatter=Jt};const Jt=e=>`   <div class="input-group">
                                        <input class="form-control" id="TableFooterPcsInputId" type="number" min="1"
                                            max="100" step="1" value="1">

                                        <div class="invalid-feedback">
                                            Please provide correct pcs.
                                        </div>
                                    </div>`;let xt=({inFindColumn:e})=>{e.footerFormatter=Ut};const Ut=e=>` <select class="form-select" aria-label="Default select example"
                                        id="TableFooterFactoryInputId" tabindex="-1">
                                        <option value="Vizag" selected>Vizag</option>
                                        <option value="GD">GD</option>
                                        <option value="Vzm">Vzm</option>
                                    </select>`;let Wt=({inFindColumn:e})=>{e.footerFormatter=qt};const qt=e=>'<input class="form-control" tabindex="-1" type="date" id="TableFooterdateInputId">';let zt=({inFindColumn:e})=>{e.footerFormatter=Gt};const Gt=(e,t,a)=>`  <select class="form-select" aria-label="Default select example"
                                        id="TableFooterItemServiceId">
                                        <option>DW</option>
                                          <option>PW</option>
                                          <option>CW</option>
                                    </select>`;let _t=({inColumns:e})=>{let t=e,a=t.find(m=>m.field==="KS-Serial"),l=t.find(m=>m.field==="Rate"),o=t.find(m=>m.field==="KS-AddOns"),n=t.find(m=>m.field==="KS-Opts"),r=t.find(m=>m.field==="KS-Amount"),c=t.find(m=>m.field==="Category"),u=t.find(m=>m.field==="ItemName"),I=t.find(m=>m.field==="Pcs"),d=t.find(m=>m.field==="location"),i=t.find(m=>m.field==="DeliveryDateTime"),L=t.find(m=>m.field==="ItemService");a!==void 0&&Tt({inFindColumn:a}),l!==void 0&&At({inFindColumn:l}),o!==void 0&&ht({inFindColumn:o}),n!==void 0&&Bt({inFindColumn:n}),r!==void 0&&Et({inFindColumn:r}),c!==void 0&&Mt({inFindColumn:c}),u!==void 0&&Ht({inFindColumn:u}),I!==void 0&&kt({inFindColumn:I}),d!==void 0&&xt({inFindColumn:d}),i!==void 0&&Wt({inFindColumn:i}),L!==void 0&&zt({inFindColumn:L})};const Yt=(e,t)=>e.ItemService==="PW"?{classes:"table-warning"}:{},Qt=[],Xt=[{field:"KS-Serial",title:"#",width:5,widthUnit:"%"},{field:"Category",title:"Category",width:10,widthUnit:"%"},{field:"ItemName",title:"Item Name",width:10,widthUnit:"%"},{field:"ItemService",title:"Service",width:10,widthUnit:"%"},{field:"KS-AddOns",title:"Add Ons",width:100},{field:"Rate",title:"Rate",align:"right",width:10,widthUnit:"%"},{field:"Pcs",title:"Pcs",align:"right",width:8,widthUnit:"%"},{field:"KS-Amount",title:"Amount",align:"right",formatter:"",width:15,widthUnit:"%"},{field:"location",title:"Factory",width:200},{field:"DeliveryDateTime",title:"Delivery",width:10,widthUnit:"%"},{field:"KS-Opts",title:"Opts.",width:100}],Zt="",ea="",F={data:Qt,columns:Xt,onPostBody:Zt,onClickRow:ea},ta=()=>{var e=$("#table");F.onPostBody=bt,F.onClickRow=yt,F.rowStyle=Yt,_t({inColumns:F.columns}),e.bootstrapTable(F)};let aa=({inRow:e})=>{const t=e;la(t.ItemName),oa(t.pk),ra(t.Rate)},la=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},oa=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},ra=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const na=({inRow:e})=>{let t=ca({inItemSerial:parseInt(e.pk)});var a=$("#AddOnTable");a.bootstrapTable("load",t),aa({inRow:e}),$("#AddOnModal").modal("show")};let ca=({inItemSerial:e})=>{let t=s.localStorageKeys.OrderKey,a=localStorage.getItem(t),l=JSON.parse(a),o=e;return Object.keys(l.AddOnData).map(c=>S(j({},l.AddOnData[c]),{AddOnPK:c})).filter(c=>c.AddOnItemSerial===o)};const da=async({inRowpk:e,inItemSerial:t})=>{const a=s.ApiUrls.ItemsTable.DeleteAddOnUrl;let l=localStorage.getItem("BranchName");const o=t;let n=a.replace("$tableName",l).replace(":Id",e).replace(":SubId",o);return await fetch(n,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}})},ma=({inResponse:e})=>{e.status===200&&(sa("AddOnModal"),y().then(t=>{b(),$("#TableFooterItemNameId").focus()}))};function sa(e){const t=document.querySelector("#"+e),a=bootstrap.Modal.getInstance(t);a!=null&&a.hide()}const ua=async({inItemSerial:e})=>{debugger;let t=ia(),a=await da({inRowpk:t,inItemSerial:e});ma({inResponse:a})},ia=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},Ia=(e,t,a)=>{console.log("row : ",e),a==="KS-AddOns"&&na({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")&&ua({inItemSerial:e.AddOnPK})};let La=({inFindColumn:e})=>{e.formatter=Fa},Fa=(e,t,a)=>a+1,ja=({inColumns:e})=>{let a=e.find(l=>l.field==="KS-Serial");a!==void 0&&La({inFindColumn:a})};const Sa=[],fa=[{field:"KS-Serial",title:"#",width:75},{field:"AddOnService",title:"Service",width:400},{field:"AddOnRate",title:"Rate",width:200}],Va="",V={data:Sa,columns:fa,onClickRow:Va},ga="AddOnTable",ya=()=>{var e=$(`#${ga}`);V.onClickRow=Ia,ja({inColumns:V.columns}),e.bootstrapTable(V)};let ba=({inRow:e})=>{const t=e;pa(t.ItemName),Oa(t.pk),Ta(t.Rate)},pa=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},Oa=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},Ta=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const va=({inRow:e})=>{let t=Aa({inItemSerial:parseInt(e.pk)});var a=$("#AddOnTable");a.bootstrapTable("load",t),ba({inRow:e}),$("#AddOnModal").modal("show")};let Aa=({inItemSerial:e})=>{let t=s.localStorageKeys.OrderKey,a=localStorage.getItem(t),l=JSON.parse(a),o=e;return Object.keys(l.AddOnData).map(c=>S(j({},l.AddOnData[c]),{AddOnPK:c})).filter(c=>c.AddOnItemSerial===o)};const $a=({inRowIndex:e})=>{Ca({inRowIndex:e}),g(),ha()};let ha=()=>{let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.focus()};const Ca=({inRowIndex:e})=>{let t=s.localStorageKeys.PresentOrderAddOnsKey,a=localStorage.getItem(t),l=JSON.parse(a);l.splice(e,1),localStorage.setItem(t,JSON.stringify(l))},Na=(e,t,a)=>{if(console.log("row------------ : ",e,t[0].dataset.index,a),a==="KS-AddOns"&&va({inRow:e}),a==="KS-Opts"&&window.confirm("Do you really want to Delete Item?")){const l=t[0].dataset.index;$a({inRowIndex:parseInt(l)})}},Ba=()=>{let e=Ra(),t=wa(),a=Ea(),l={};return l.AddOnService=e,l.AddOnRate=parseInt(t),l.AddOnItemSerial=parseInt(a),l};let wa=()=>{let t=document.getElementById("AddOnRateId");if(t!==null)return t.value.trim()},Ra=()=>{let t=document.getElementById("TableFooterAddOnSelectId");if(t!==null)return t.value.trim()},Ea=()=>{let t=document.getElementById("AddOnModalItemSerialId");if(t!==null)return t.value.trim()};const Da=()=>{const e=Ba();Ma({inAddOnRow:e})},Ma=({inAddOnRow:e})=>{let t=s.localStorageKeys.PresentOrderAddOnsKey,a=localStorage.getItem(t);if(a===null){localStorage.setItem(t,JSON.stringify([e]));return}let l=JSON.parse(a);l.push(e),localStorage.setItem(t,JSON.stringify(l))},B=()=>{let e=s.localStorageKeys.PresentOrderAddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},Ka=({inAddOnService:e})=>B().find(l=>l.AddOnService===e)===void 0;let Ha=()=>{const e=Pa();return Ka({inAddOnService:e})},Pa=()=>{let t=document.getElementById("TableFooterAddOnSelectId");if(t!==null)return t.value.trim()};const ka=()=>{const e=Ha();console.log(" : ",e),e&&(Da(),g(),Ja())};let Ja=()=>{let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.focus()},xa=()=>{let e=document.getElementById("AddOnModalSaveButtonId");e!==null&&e.addEventListener("click",ka)};const Ua=()=>{let e=s.localStorageKeys.AddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},Wa=()=>{let e=document.getElementById("TableFooterAddOnSelectId"),t=Ua();console.log("jVarLocalTableFooterAddOnSelectId: ",e);for(var a=0;a<t.length;a++){let l=document.createElement("option");l.value=t[a].AddOnService,l.innerHTML=t[a].AddOnService,e.appendChild(l)}},qa="AddOns",za=()=>{const e=event.currentTarget,t=_a({inAddOnData:e.value});Ya(t)},Ga=()=>{const e=localStorage.getItem(qa);return JSON.parse(e)},_a=({inAddOnData:e})=>Ga().find(l=>l.AddOnService===e).AddOnRate;let Ya=e=>{let a=document.getElementById("AddOnRateId");a!==null&&(a.value=e)};const Qa=e=>{e.currentTarget,e.key==="Enter"&&Xa()};let Xa=()=>{var e=new Event("click");let t=document.getElementById("AddOnModalSaveButtonId");t!==null&&t.dispatchEvent(e)},Za=()=>{let e=document.getElementById("TableFooterAddOnSelectId");e!==null&&e.addEventListener("change",za),e!==null&&e.addEventListener("keypress",Qa)},el=()=>{xa(),Wa(),Za(),tl(),$("#TableFooterItemNameId").focus()},tl=()=>{var e=new Event("change");let t=document.getElementById("TableFooterAddOnSelectId");t!==null&&t.dispatchEvent(e)},al=({inFindColumn:e})=>{e.formatter=ll},ll=(e,t,a)=>a+1,ol=({inFindColumn:e})=>{e.footerFormatter=rl},rl=e=>`<input type="number" name="AddOnRate" id="AddOnRateId" class="form-control"
                                placeholder="AddOn Rate">`,nl=({inFindColumn:e})=>{e.formatter=cl,e.footerFormatter=dl};function cl(e,t,a){return['<a href="#" class="btn btn-danger ">','<i class="bi bi-trash3"></i>',"</a>"].join("")}const dl=e=>`   <button type="button" class="btn btn-primary" id="AddOnModalSaveButtonId">
                                Save
                            </button>`;let ml=({inFindColumn:e})=>{e.footerFormatter=sl};const sl=(e,t,a)=>`  <select class="form-select" aria-label="Select AddOn" id="TableFooterAddOnSelectId">
                            </select>`;let ul=({inColumns:e})=>{let t=e,a=t.find(r=>r.field==="KS-Serial"),l=t.find(r=>r.field==="KS-Opts"),o=t.find(r=>r.field==="AddOnService"),n=t.find(r=>r.field==="AddOnRate");a!==void 0&&al({inFindColumn:a}),l!==void 0&&nl({inFindColumn:l}),o!==void 0&&ml({inFindColumn:o}),n!==void 0&&ol({inFindColumn:n})};const il=[],Il=[{field:"KS-Serial",title:"#",width:75},{field:"AddOnService",title:"Service",width:400},{field:"AddOnRate",title:"Rate",width:200},{field:"KS-Opts",title:"Options",width:100}],Ll="",Fl="",f={data:il,columns:Il,onPostBody:Ll,onClickRow:Fl},jl="AddOnModalLocalStorage",Sl=()=>{let t=document.getElementById(jl).querySelector("table");var a=$(t);f.onPostBody=el,f.onClickRow=Na,ul({inColumns:f.columns}),a.bootstrapTable(f)},fl=()=>{ta(),ya(),Sl()};let Vl=()=>{let t=document.getElementById("BranchNameId"),a=localStorage.getItem("BranchName");t!==null&&(t.innerHTML=a)};const gl=async()=>{Vl(),fl(),await mt(),dt()},yl=()=>{let e=s.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t)},bl=()=>{let e=yl();vl(e.CustomerData.CustomerMobile),Tl(e.CustomerData.CustomerName),Ol(e.pk),pl(localStorage.getItem("BranchName"))};let pl=e=>{let a=document.getElementById("BranchNameAnchorId");a!==null&&(a.innerHTML=e)},Ol=e=>{let a=document.getElementById("OrderNumberId");a!==null&&(a.innerHTML=e)},Tl=e=>{let a=document.getElementById("CustomerNameId");a!==null&&(a.value=e)},vl=e=>{let a=document.getElementById("CustomerMobileId");a!==null&&(a.value=e)};const A=()=>{b(),bl()},Al=()=>{let e=s.localStorageKeys.PresentOrderAddOnsKey;B()===null&&localStorage.setItem(e,JSON.stringify([]))},$l=async()=>{await gl(),K({inSuccessFunc:A})&&(Al(),A())};$l().then();
