var b=Object.defineProperty,T=Object.defineProperties;var p=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var F=(e,t,a)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,u=(e,t)=>{for(var a in t||(t={}))O.call(t,a)&&F(e,a,t[a]);if(j)for(var a of j(t))v.call(t,a)&&F(e,a,t[a]);return e},I=(e,t)=>T(e,p(t));import{S as N}from"./EntryFile-D68kwv0T.js";let A=()=>{h()},h=()=>{const e=new URL(window.location.href),t=new URL("./Customer.html",e);let a=B(),l=D();t.searchParams.append("CustomerMobile",a),t.searchParams.append("CustomerName",l),window.location.href=t.href},B=()=>{let t=document.getElementById("CustomerMobileId");if(t!==null)return t.value.trim()},D=()=>{let t=document.getElementById("CustomerNameId");if(t!==null)return t.value.trim()},E=()=>{let e=document.getElementById("BranchNameAnchorId");e!==null&&e.addEventListener("click",A)};const R=()=>{var e=$("#table").bootstrapTable("getData");return e.length===0?(window.alert("Please Add Items"),!1):!0};let C=()=>{R()&&w()},w=()=>{const e=new URL(window.location.href),t=new URL("./Settlement.html",e);let a=H();t.searchParams.append("OrderNumber",a),window.location.href=t.href},H=()=>{let t=document.getElementById("OrderNumberId");if(t!==null)return t.innerHTML.trim()},M=()=>{let e=document.getElementById("CheckOutButtonId");e!==null&&e.addEventListener("click",C)},K=()=>{E(),M()};const J=()=>{let e=k(),t=P(),a=U(),l={};return l.AddOnService=e,l.AddOnRate=parseInt(t),l.AddOnItemSerial=parseInt(a),l};let P=()=>{let t=document.getElementById("AddOnRateId");if(t!==null)return t.value.trim()},k=()=>{let t=document.getElementById("TableFooterAddOnSelectId");if(t!==null)return t.value.trim()},U=()=>{let t=document.getElementById("AddOnModalItemSerialId");if(t!==null)return t.value.trim()},x=({PrepareBody:e})=>{var t=$("#AddOnTable"),a=t.bootstrapTable("getData");if(a.find(o=>o.AddOnService===e.AddOnService)!==void 0){let o=document.getElementById("TableFooterAddOnSelectId");return o.classList.add("is-invalid"),o.focus(),!1}return!0};const W="POST",Y={Accept:"application/json","Content-Type":"application/json"},_="",V={method:W,headers:Y,body:_};let q=({PrepareBody:e})=>(V.body=JSON.stringify(e),V);const G="binV4",z="Transactions",Q="Kakinada",X={OrderKey:"PresentOrder",ItemNamesKey:"ItemNames",AddOnsKey:"AddOns"},Z={ItemsTable:{DeleteUrl:"$tableName/SubTable/Delete/SubKey/:Id/:inKey/:SubId"}},n={routePath:G,folderName:z,tableName:Q,localStorageKeys:X,ApiUrls:Z};let ee=async({PrepareBody:e})=>{let t=q({PrepareBody:e}),a=localStorage.getItem("BranchName"),l=document.getElementById("OrderNumberId").innerHTML,o=`/${n.routePath}/${a}/SubTable/Create/${l}/AddOnData`;return await await fetch(o,t)},te=async()=>{let e=localStorage.getItem("BranchName"),t=n.localStorageKeys.OrderKey,a=`/Custom/Cleaning/Branch/Order/NewOrder/MaxRow/${e}`,o=await(await fetch(a)).json();localStorage.setItem(t,JSON.stringify(o))},y=async()=>{await te()},ae=async()=>{await y();let e=ce(),t=parseInt(ne()),a=Object.values(e.AddOnData).filter(l=>l.AddOnItemSerial===t);oe({inAddOnData:a}),re({inItemsData:e}),le()},le=()=>{let t=document.getElementById("TableFooterAddOnSelectId");t.classList.remove("is-invalid"),t.focus()},oe=({inAddOnData:e})=>{let t=e;console.log("LocalAddOnData : ",t);var a=$("#AddOnTable");a.bootstrapTable("load",t)},re=({inItemsData:e})=>{let t=e;var a=$("#table");a.bootstrapTable("load",t)},ne=()=>{let t=document.getElementById("AddOnModalItemSerialId");if(t!==null)return t.value.trim()},ce=()=>{document.getElementById("AddOnModalItemSerialId");let e=localStorage.getItem("PresentOrder");return JSON.parse(e)},de=async()=>{let e=J();x({PrepareBody:e})&&(await ee({PrepareBody:e})).status===200&&ae()};const me=()=>{de()};let se=()=>{let e=document.getElementById("AddOnModalSaveButtonId");e!==null&&e.addEventListener("click",me)};const ue="AddOns",Ie=()=>{const e=event.currentTarget,t=ie({inAddOnData:e.value});je(t)},Le=()=>{const e=localStorage.getItem(ue);return JSON.parse(e)},ie=({inAddOnData:e})=>Le().find(l=>l.AddOnService===e).AddOnRate;let je=e=>{let a=document.getElementById("AddOnRateId");a!==null&&(a.value=e)},Fe=()=>{let e=document.getElementById("TableFooterAddOnSelectId");e!==null&&e.addEventListener("change",Ie)},Ve=()=>{se(),Fe()},Se=()=>{Ve()},ge=()=>{K(),Se()},fe=({inRow:e})=>{const t=e;ye(t.ItemName),be(t.pk),Te(t.Rate)},ye=e=>{let a=document.getElementById("AddOnModalItemNameId");a!==null&&(a.value=e)},be=e=>{let a=document.getElementById("AddOnModalItemSerialId");a!==null&&(a.value=e)},Te=e=>{let a=document.getElementById("exampleFormControlInput1");a!==null&&(a.value=e)};const pe=({inRow:e})=>{let t=Oe({inItemSerial:parseInt(e.pk)});var a=$("#AddOnTable");a.bootstrapTable("load",t),fe({inRow:e}),$("#AddOnModal").modal("show")};let Oe=({inItemSerial:e})=>{let t=n.localStorageKeys.OrderKey,a=localStorage.getItem(t),l=JSON.parse(a),o=e;return Object.keys(l.AddOnData).map(r=>I(u({},l.AddOnData[r]),{AddOnPK:r})).filter(r=>r.AddOnItemSerial===o)};const ve=async({inRowpk:e,inItemSerial:t})=>{const a=n.ApiUrls.ItemsTable.DeleteUrl,l=n.routePath;let o=localStorage.getItem("BranchName");const c="ItemsInOrder",d=t;let r=a.replace("$tableName",o).replace(":Id",e).replace(":inKey",c).replace(":SubId",d),m={method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}};return await fetch(`/${l}/${r}`,m)},$e=({inResponse:e})=>{e.status===200&&(window.location.href="")},Ne=async({inItemSerial:e})=>{let t=Ae(),a=await ve({inRowpk:t,inItemSerial:e});$e({inResponse:a})},Ae=()=>{let e=n.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},he=(e,t,a)=>{a===3&&pe({inRow:e}),a===9&&window.confirm("Do you really want to Delete Item?")&&Ne({inItemSerial:e.pk})};let Be=()=>!(De()===!1||Ee()===!1||Re()===!1||Ce()===!1||we()===!1||He()===!1||Me()===!1);const De=()=>{let e=document.getElementById("TableFooterItemNameId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Ee=()=>{let e=document.getElementById("TableFooterPcsInputId");return e.value===""||e.value<=0?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Re=()=>{let e=document.getElementById("exampleFormControlInput1");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Ce=()=>{let e=document.getElementById("TableFooterFactoryInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},we=()=>{let e=document.getElementById("TableFooterCategoryId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},He=()=>{let e=document.getElementById("TableFooterdateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Me=()=>{let e=document.getElementById("TableFooterRateInputId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},Ke="POST",Je={Accept:"application/json","Content-Type":"application/json"},Pe="",S={method:Ke,headers:Je,body:Pe},ke=()=>{let e=Ue(),t=xe(),a=We(),l=Ye(),o=Ge(),c=_e(),d=qe(),r={};return r.Category=e,r.ItemName=t,r.Rate=a,r.Pcs=l,r.Total=o,r.location=c,r.DeliveryDateTime=d,r};let Ue=()=>{let t=document.getElementById("TableFooterCategoryId");if(t!==null)return t.value.trim()},xe=()=>{let t=document.getElementById("TableFooterItemNameId");if(t!==null)return t.value.trim()},We=()=>{let t=document.getElementById("TableFooterRateInputId");if(t!==null)return t.value.trim()},Ye=()=>{let t=document.getElementById("TableFooterPcsInputId");if(t!==null)return t.value.trim()},_e=()=>{let t=document.getElementById("TableFooterFactoryInputId");if(t!==null)return t.value.trim()},qe=()=>{let t=document.getElementById("TableFooterdateInputId");if(t!==null)return t.value.trim()},Ge=()=>{let t=document.getElementById("TableFooterRateInputId"),l=document.getElementById("TableFooterPcsInputId");return console.log("Total:",t.value*l.value),t.value*l.value},ze=()=>(S.body=JSON.stringify(ke()),S),Qe=async()=>{let e=localStorage.getItem("BranchName"),t=parseInt(document.getElementById("OrderNumberId").innerHTML),a=ze(),l=`/${n.routePath}/${e}/SubTable/Create/${t}/ItemsInOrder`;return await await fetch(l,a)},Xe=()=>{window.location.href=""},Ze=async()=>{(await Qe()).status===200&&Xe()};const et=()=>{Be()&&Ze()};let tt=()=>{let e=document.getElementById("TableFooterSaveButtonId");e!==null&&e.addEventListener("click",et)},at=()=>{let e=n.localStorageKeys.ItemNamesKey,t=localStorage.getItem(e);return JSON.parse(t)};const lt=({inCategorySelected:e})=>{let a=document.getElementById("ItemsDataListId"),l=e,d=at().filter(s=>s.Category===l).sort((s,i)=>s.ItemName==i.ItemName?0:s.ItemName>i.ItemName?1:-1);for(var r="",m=0;m<d.length;m++)r+=`<option value="${d[m].ItemName}">${d[m].ItemName}</option>`;a.innerHTML=r},ot=e=>{let a=e.currentTarget.value;lt({inCategorySelected:a})};let rt=()=>{let e=document.getElementById("TableFooterCategoryId");e!==null&&e.addEventListener("change",ot)},nt=({inItemName:e})=>{let t=n.localStorageKeys.ItemNamesKey,a=localStorage.getItem(t);return JSON.parse(a).find(c=>c.ItemName===e)};const ct=e=>{let a=e.currentTarget.value,l=nt({inItemName:a});dt(l.DryWashRate)};let dt=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)},mt=()=>{let e=document.getElementById("TableFooterItemNameId");e!==null&&e.addEventListener("change",ct)};const g=(e,t,a)=>{st(e.ItemName),ut(e.Category),It(e.DryWashRate),jFLocalToInputTableFooterPicsInputId(e.pcs),$("#ItemsOnModal").modal("hide"),document.getElementById("TableFooterSaveButtonId").click()};let st=e=>{let a=document.getElementById("TableFooterItemNameId");a!==null&&(a.value=e)},ut=e=>{let a=document.getElementById("TableFooterCategoryId");a!==null&&(a.value=e)},It=e=>{let a=document.getElementById("TableFooterRateInputId");a!==null&&(a.value=e)};const Lt=e=>{let t="ItemsOnModal";var a=$(document.getElementById(t).querySelector("table"));e?(a.bootstrapTable({data:jt(e),onClickRow:g}),document.getElementById("SearchString").innerHTML=`Search Results for - ${e}`):(a.bootstrapTable({data:it(),onClickRow:g}),document.getElementById("SearchString").innerHTML="All Items"),$(`#${t}`).modal("show")},it=()=>{let e=localStorage.getItem("ItemNames");return JSON.parse(e)},jt=e=>{let t=localStorage.getItem("ItemNames");return JSON.parse(t).filter(l=>l.ItemName.toLowerCase().includes(e.toLowerCase()))},Ft=()=>{let e=document.getElementById("TableFooterItemNameId").value;Lt(e)};let Vt=()=>{let e=document.getElementById("TableFooterItemNameSearchButtonId");e!==null&&e.addEventListener("click",Ft)},St=()=>{tt(),rt(),mt(),Vt(),gt()},gt=()=>{var e=new Event("change");document.getElementById("TableFooterCategoryId").dispatchEvent(e)};const ft=()=>{var e=$("#table");e.bootstrapTable({data:[],onPostBody:function(){St(),yt(),$("#TableFooterItemNameId").focus()},onClickRow:he})},yt=()=>{var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),l=e.getFullYear(),o=l+"-"+a+"-"+t;e.setDate(e.getDate()+7);var c=String(e.getDate()).padStart(2,"0"),d=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear(),m=r+"-"+d+"-"+c,s=document.getElementById("TableFooterdateInputId");s.value=m,s.setAttribute("min",o)};let bt=()=>{};const Tt=async(e,t,a)=>{a===3&&window.confirm("Do you really want to Delete this AddOn?")&&(pt(),console.log("aaaaaaaaaa : ,row",e))},pt=()=>{let e=n.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t).pk},Ot=[],vt="",$t="",L={data:Ot,onPostBody:vt,onClickRow:$t},Nt=()=>{var e=$("#AddOnTable");L.onPostBody=bt,L.onClickRow=Tt,e.bootstrapTable(L)},At=()=>{ft(),Nt()};let ht=()=>{let t=document.getElementById("BranchNameId"),a=localStorage.getItem("BranchName");t!==null&&(t.innerHTML=a)};const Bt=async()=>{ht(),At(),await y(),ge()},Dt=()=>{let e=n.localStorageKeys.OrderKey,t=localStorage.getItem(e),a=JSON.parse(t);return Et({inItemsObject:a.ItemsInOrder})},Et=({inItemsObject:e})=>Object.entries(e).map(([a,l])=>I(u({},l),{pk:a})),Rt=()=>{let e=Dt();var t=$("#table");t.bootstrapTable("load",e)},Ct=()=>{let e=n.localStorageKeys.AddOnsKey,t=localStorage.getItem(e);return JSON.parse(t)},wt=()=>{let e=document.getElementById("TableFooterAddOnSelectId"),t=Ct();for(var a=0;a<t.length;a++){let l=document.createElement("option");l.value=t[a].AddOnService,l.innerHTML=t[a].AddOnService,e.appendChild(l)}},Ht=()=>{wt()},Mt=()=>{let e=n.localStorageKeys.OrderKey,t=localStorage.getItem(e);return JSON.parse(t)},Kt=()=>{let e=Mt();Ut(e.CustomerData.CustomerMobile),kt(e.CustomerData.CustomerName),Pt(e.pk),Jt(localStorage.getItem("BranchName"))};let Jt=e=>{let a=document.getElementById("BranchNameAnchorId");a!==null&&(a.innerHTML=e)},Pt=e=>{let a=document.getElementById("OrderNumberId");a!==null&&(a.innerHTML=e)},kt=e=>{let a=document.getElementById("CustomerNameId");a!==null&&(a.value=e)},Ut=e=>{let a=document.getElementById("CustomerMobileId");a!==null&&(a.value=e)};const f=()=>{Rt(),Ht(),Kt()},xt=async()=>{await Bt(),N({inSuccessFunc:f})&&f()};xt().then();
