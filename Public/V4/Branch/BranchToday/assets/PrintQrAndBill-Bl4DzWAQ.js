import"./modulepreload-polyfill-B5Qt9EMX.js";import"./EntryFile-Dg-mTZIw.js";import{S as m}from"./EntryFile-BnXMtMmL.js";let d=()=>{document.querySelector(".RefreshBSTableClass").click()};const u="/Custom/Cleaning/Branch/Today/Orders/OrdersWithQrs/Today/{BranchName}",h={GetEndPoint:u};let f=async()=>{let e=h.GetEndPoint,t=localStorage.getItem("BranchName");const n=e.replace("{BranchName}",t);return await await fetch(n)},C=({inResponseAsJson:e})=>{const t=e;var n=$("#table");n.bootstrapTable("load",t)},S=({inResponse:e})=>{Swal.fire({text:`${e}`,icon:"error",title:"check"})},v=async({inResponse:e})=>{let t=await e;if(t.status===200){let n=await t.json();C({inResponseAsJson:n})}if(t.status===500){let n=await t.text();S({inResponse:n})}};const g=async()=>{let e=await f();v({inResponse:e})};let F=async()=>{g().then(e=>{})},p=()=>{const e=document.querySelectorAll(".RefreshBSTableClass");for(let t of e)t.addEventListener("click",F)},V=()=>{p()};const L="#toolbar",b="true",j="true",D="pk",B="true",w=[],N="5",y="",A=[{field:"KS-Serial",title:"#",formatter:"jFGlobalSerialColumn",class:"d-none d-sm-table-cell"},{field:"pk",title:"Order #"},{field:"CustomerData.CustomerName",title:"Customer Name"},{field:"CustomerData.inMobileNumber",title:"Mobile",class:"d-none d-sm-table-cell"},{title:"Qr Print",field:"TotalItems"},{title:"Print",field:"OrderPrint"},{title:"Pcs",field:"AggValues.ItemDetails",width:"100",footerFormatter:"pcsFormatter",class:"d-none d-sm-table-cell"},{title:"Settlement",field:"AggValues.SettlementAmount",formatter:"symbolFormatPrice",align:"right",class:"d-none d-sm-table-cell"}],c={toolbar:L,search:b,searchable:j,idfield:D,showFooter:B,data:w,pageSize:N,onClickRow:y,columns:A};let T=({inFindColumn:e})=>{e.formatter=I},I=(e,t,n)=>n+1,H=({inFindColumn:e})=>{e.formatter=O};function O(e){return this.field,"₹ "+e}let k=({inFindColumn:e})=>{e.formatter=P,e.footerFormatter=R};function P(e,t,n){if(console.log("row",t),t.TotalItems)return[`<a href="#" class="btn btn-primary"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-qr-code" viewBox="0 0 16 16"><path d="M2 2h2v2H2V2Z"></path><path d="M6 0v6H0V0h6ZM5 1H1v4h4V1ZM4 12H2v2h2v-2Z"></path><path d="M6 10v6H0v-6h6Zm-5 1v4h4v-4H1Zm11-9h2v2h-2V2Z"></path><path d="M10 0v6h6V0h-6Zm5 1v4h-4V1h4ZM8 1V0h1v2H8v2H7V1h1Zm0 5V4h1v2H8ZM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8H6Zm0 0v1H2V8H1v1H0V7h3v1h3Zm10 1h-1V7h1v2Zm-1 0h-1v2h2v-1h-1V9Zm-4 0h2v1h-1v1h-1V9Zm2 3v-1h-1v1h-1v1H9v1h3v-2h1Zm0 0h3v1h-2v1h-1v-2Zm-4-1v1h1v-2H7v1h2Z"></path><path d="M7 12h1v3h4v1H7v-4Zm9 2v2h-3v-1h2v-1h1Z"></path></svg>  ${t.TotalItems}</a>`].join("")}function R(e){var t=this.field;return+e.map(function(n){return+n[t]}).reduce(function(n,a){return n+a},0)}let x=({inFindColumn:e})=>{e.formatter=M};function M(e,t,n){if(t.IsQrCodesRaised)return[`<a href="./Bill.html?OrderNumber=${t.pk}" target="_blank" class="btn btn-warning">`,'<i class="bi bi-printer-fill"></i>',"</a>"].join("")}let Q=({inColumns:e})=>{let t=e,n=t.find(r=>r.field==="KS-Serial"),a=t.find(r=>r.field==="AggValues.SettlementAmount"),l=t.find(r=>r.field==="TotalItems"),o=t.find(r=>r.field==="OrderPrint");a!==void 0&&H({inFindColumn:a}),n!==void 0&&T({inFindColumn:n}),l!==void 0&&k({inFindColumn:l}),o!==void 0&&x({inFindColumn:o})},Z=({inFindColumn:e})=>{e.footerFormatter=q};function q(e){this.field;var t=e.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,l){return a+l},0),n=e.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,l){return a+l},0);return`${n}/${t}`}let E=({inFindColumn:e})=>{e.footerFormatter=G,e.formatter=J};function G(e){return this.field,"₹ "+e.map(function(t){return+t.AggValues.SettlementAmount}).reduce(function(t,n){return t+n},0)}function J(e,t,n){if(console.log("row",t),t.AggValues.SettlementAmount)return['<a href="#">',"</a>","₹ ",`${t.AggValues.SettlementAmount}`].join("")}let U=({inColumns:e})=>{let t=e,n=t.find(l=>l.field==="AggValues.ItemDetails"),a=t.find(l=>l.field==="AggValues.SettlementAmount");n!==void 0&&Z({inFindColumn:n}),a!==void 0&&E({inFindColumn:a})},z=({inColumns:e})=>{Q({inColumns:e}),U({inColumns:e})};const K="binV4",W="MastersAddOns",X={routePath:K,tableName:W};let Y=async({inRowPk:e})=>{let t=e,n=`/${X.routePath}/QrCodes/Show/Filter/OrderNumber/${t}`;return await await(await fetch(n)).json()},_=({inData:e})=>{let t=e,a=document.getElementById("TemplateForQrCodePrint").content.cloneNode("true");i({inClone:a,inHtmlClassName:"BranchClass",inTextContent:t.BookingData.OrderData.BranchName}),i({inClone:a,inHtmlClassName:"PkClass",inTextContent:t.location}),i({inClone:a,inHtmlClassName:"QrCodeClass",inTextContent:t.UuId}),i({inClone:a,inHtmlClassName:"OrderNumberClass",inTextContent:t.OrderNumber}),i({inClone:a,inHtmlClassName:"ItemNameClass",inTextContent:t.ItemName}),i({inClone:a,inHtmlClassName:"ItemSerialClass",inTextContent:t.ItemSerial}),i({inClone:a,inHtmlClassName:"AddOnDataAsStringClass",inTextContent:t.AddOnDataAsString}),i({inClone:a,inHtmlClassName:"DateTimeClass",inTextContent:new Date(t.BookingData.OrderData.Currentdateandtime).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}).split("/").join("-")}),i({inClone:a,inHtmlClassName:"OrderDateClass",inTextContent:new Date(t.DeliveryDateTime).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}).split("/").join("-")});let l=a.getElementById("CanvasId");return l.dataset.qrcode=`${t.pk}~`,l.dataset.qrcode+=`${t.pk}-${t.OrderNumber}~`,l.dataset.qrcode+=`${t.ItemName}~`,l.dataset.qrcode+=`${t.WashType}@${t.ItemSerial}/${t.Pcs}/${t.TotalQrCodes}~`,l.dataset.qrcode+=`${t.AddOnDataAsString}~`,l.dataset.qrcode+=`${t.BookingData.OrderData.Currentdateandtime}~`,l.dataset.qrcode+=`${t.DeliveryDateTime}`,new XMLSerializer().serializeToString(a)},i=({inClone:e,inHtmlClassName:t,inTextContent:n})=>{let a=e,l=t,o=n,r=a.querySelector(`.${l}`);r.textContent=o},tt=({inData:e})=>{let t=e,n=document.getElementById("ModalBody");n.innerHTML="",t.map(r=>{const s=_({inData:r});n.innerHTML+=s});let a=document.querySelectorAll("canvas");for(let r=0;r<a.length;r++){const s=a[r];et({inQrData:t,inCanvasId:s})}let l="ModalForQrCode";var o=new bootstrap.Modal(document.getElementById(l),{keyboard:!0,focus:!0});o.show()},et=({inQrData:e="",inCanvasId:t})=>{var n=t;n.height=1,n.width=1,n.style.visibility="hidden";let a={};a.text=n.dataset.qrcode,a.bcid="qrcode",a.scaleX=1,a.scaleY=1,a.rotate="N";try{let o=new Date;bwipjs.toCanvas(n,a),l(o,new Date)}catch(o){console.log("error : ",o);return}function l(o,r){n.style.visibility="visible"}},at=({inQrCodeData:e,inRowPk:t})=>{let n=e;const l=localStorage.getItem("BranchName").replace("BranOrders","");let o=n.filter(s=>s.OrderNumber==t&&s.BookingData.OrderData.BranchName==l),r=nt({inQrCodeData:o});tt({inData:r})},nt=({inQrCodeData:e})=>{let t=e.length;return e.map(a=>{let l=a.AddOnArray.map(o=>o.AddOnService);return a.AddOnDataAsString=l.join(", "),a.TotalQrCodes=t,a})},lt=async({inRowData:e})=>{var t=e.pk;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ok",focusCancel:!0,focusButtonColor:"#0000ff"}).then(n=>{n.isConfirmed&&Y({inRowPk:t}).then(a=>{a&&at({inQrCodeData:a,inRowPk:t})})})};const rt=(e,t,n)=>{n==="TotalItems"&&lt({inRowData:e})},ot=$("#table"),it=()=>{z({inColumns:c.columns}),c.onClickRow=rt,ot.bootstrapTable(c)};let st=()=>{let t=document.getElementById("BranchNameId");const a=localStorage.getItem("BranchName").replace("BranOrders","");t!==null&&(t.innerHTML=a)};const ct=()=>{st(),it(),V()},dt=()=>{m({inSuccessFunc:d})&&(ct(),d())};dt();
